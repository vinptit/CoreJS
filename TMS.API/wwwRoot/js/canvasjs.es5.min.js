"use strict";(function(){function it(n,t){n.prototype=di(t.prototype);n.prototype.constructor=n;n.base=t.prototype}function di(n){function t(){}return t.prototype=n,new t}function ai(n,t,i){return"millisecond"===i?n.setMilliseconds(n.getMilliseconds()+1*t):"second"===i?n.setSeconds(n.getSeconds()+1*t):"minute"===i?n.setMinutes(n.getMinutes()+1*t):"hour"===i?n.setHours(n.getHours()+1*t):"day"===i?n.setDate(n.getDate()+1*t):"week"===i?n.setDate(n.getDate()+7*t):"month"===i?n.setMonth(n.getMonth()+1*t):"year"===i&&n.setFullYear(n.getFullYear()+1*t),n}function k(n,t){var i=!1;for(0>n&&(i=!0,n*=-1),n=""+n,t=t?t:1;n.length<t;)n="0"+n;return i?"-"+n:n}function kt(n){if(!n)return n;n=n.replace(/^\s\s*/,"");for(var t=n.length;/\s/.test(n.charAt(--t)););return n.slice(0,t+1)}function vt(n){n.roundRect=function(n,t,i,r,u,f,e,o){e&&(this.fillStyle=e);o&&(this.strokeStyle=o);"undefined"==typeof u&&(u=5);this.lineWidth=f;this.beginPath();this.moveTo(n+u,t);this.lineTo(n+i-u,t);this.quadraticCurveTo(n+i,t,n+i,t+u);this.lineTo(n+i,t+r-u);this.quadraticCurveTo(n+i,t+r,n+i-u,t+r);this.lineTo(n+u,t+r);this.quadraticCurveTo(n,t+r,n,t+r-u);this.lineTo(n,t+u);this.quadraticCurveTo(n,t,n+u,t);this.closePath();e&&this.fill();o&&0<f&&this.stroke()}}function ei(n,t){return n-t}function oi(n,t,i){var e,o,r;if(n&&t&&i){if(i=i+"."+t,e="image/"+t,n=n.toDataURL(e),o=!1,r=document.createElement("a"),r.download=i,r.href=n,"undefined"!=typeof Blob&&new Blob){for(var u=n.replace(/^data:[a-z\/]*;base64,/,""),u=atob(u),s=new ArrayBuffer(u.length),s=new Uint8Array(s),f=0;f<u.length;f++)s[f]=u.charCodeAt(f);t=new Blob([s.buffer],{type:"image/"+t});try{window.navigator.msSaveBlob(t,i);o=!0}catch(h){r.dataset.downloadurl=[e,r.download,r.href].join(":");r.href=window.URL.createObjectURL(t)}}if(!o)try{event=document.createEvent("MouseEvents");event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);r.dispatchEvent?r.dispatchEvent(event):r.fireEvent&&r.fireEvent("onclick")}catch(c){t=window.open();t.document.write("<img src='"+n+"'><\/img><div>Please right click on the image and save it to your device<\/div>");t.document.close()}}}function e(n){var t=((n&16711680)>>16).toString(16),i=((n&65280)>>8).toString(16);return n=((n&255)>>0).toString(16),t=2>t.length?"0"+t:t,i=2>i.length?"0"+i:i,n=2>n.length?"0"+n:n,"#"+t+i+n}function gi(n,t){var r=this.length>>>0,i=Number(t)||0,i=0>i?Math.ceil(i):Math.floor(i);for(0>i&&(i+=r);i<r;i++)if(i in this&&this[i]===n)return i;return-1}function t(n){return null===n||"undefined"==typeof n}function yt(n){return n.indexOf||(n.indexOf=gi),n}function nr(n){h.fSDec&&n[tt("`eeDwdouMhrudods")](tt("e`u`@ohl`uhnoHuds`uhnoDoe"),function(){h._fTWm&&h._fTWm(n)})}function vi(n,t,i){var u,r,f,e;if(i=i||"normal",u=n+"_"+t+"_"+i,r=wi[u],isNaN(r)){try{n="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+n+"; font-size:"+t+"px; font-weight:"+i+";";st||(f=document.body,st=document.createElement("span"),st.innerHTML="",e=document.createTextNode("Mpgyi"),st.appendChild(e),f.appendChild(st));st.style.display="";st.setAttribute("style",n);r=Math.round(st.offsetHeight);st.style.display="none"}catch(o){r=Math.ceil(1.1*t)}r=Math.max(r,t);wi[u]=r}return r}function u(n,t){var i=[],r;if(i={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[n||"solid"])for(r=0;r<i.length;r++)i[r]*=t;else i=[];return i}function o(n,t,i,r,u){return r=r||[],u=u||!1,r.push([n,t,i,u]),n.addEventListener?(n.addEventListener(t,i,u),i):n.attachEvent?(r=function(t){t=t||window.event;t.preventDefault=t.preventDefault||function(){t.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0};i.call(n,t)},n.attachEvent("on"+t,r),r):!1}function yi(n,t,i){for(n*=p,t*=p,n=i.getImageData(n,t,2,2).data,t=!0,i=0;4>i;i++)if(n[i]!==n[i+4]|n[i]!==n[i+8]|n[i]!==n[i+12]){t=!1;break}return t?n[0]<<16|n[1]<<8|n[2]:0}function d(n,t,i){return n in t?t[n]:i[n]}function ii(t,i,r){if(n&&bi){var u=t.getContext("2d");fi=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;p=li/fi;t.width=i*p;t.height=r*p;li!==fi&&(t.style.width=i+"px",t.style.height=r+"px",u.scale(p,p))}else t.width=i,t.height=r}function ut(t,i){ni&&(this.canvasCount|=0,window.console.log(++this.canvasCount));var r=document.createElement("canvas");return r.setAttribute("class","canvasjs-chart-canvas"),ii(r,t,i),n||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(r),r}function rt(n,t,i){for(var r in i)t.style[r]=i[r]}function ft(n,t,i){t.getAttribute("state")||(t.style.backgroundColor=n.toolbar.backgroundColor,t.style.color=n.toolbar.fontColor,t.style.border="none",rt(n,t,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"}));t.getAttribute("state")!==i&&(t.setAttribute("state",i),t.setAttribute("type","button"),rt(n,t,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),t.setAttribute("title",n._cultureInfo[i+"Text"]),t.innerHTML="<img style='height:95%; pointer-events: none;' src='"+ur[i].image+"' alt='"+n._cultureInfo[i+"Text"]+"' />")}function ri(){for(var n=null,t=0;t<arguments.length;t++)n=arguments[t],n.style&&(n.style.display="inline")}function et(){for(var n=null,t=0;t<arguments.length;t++)(n=arguments[t])&&n.style&&(n.style.display="none")}function c(n,i,r,u,f){this._defaultsKey=n;this._themeOptionsKey=i;this._index=u;this.parent=f;this._eventListeners=[];n={};this.theme&&t(i)&&t(u)?n=t(ht[this.theme])?ht.light1:ht[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[i]&&(null===u?n=this.parent.themeOptions[i]:0<this.parent.themeOptions[i].length&&(u=Math.min(this.parent.themeOptions[i].length-1,u),n=this.parent.themeOptions[i][u]));this.themeOptions=n;this.options=r?r:{_isPlaceholder:!0};this.setOptions(this.options,n)}function pt(n,t,i,r,u){"undefined"==typeof u&&(u=0);this._padding=u;this._x1=n;this._y1=t;this._x2=i;this._y2=r;this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function y(n,t){y.base.constructor.call(this,"TextBlock",null,t,null,null);this.ctx=n;this._isDirty=!0;this._wrappedText=null;this._initialize()}function si(n,t){si.base.constructor.call(this,"Toolbar","toolbar",t,null,n);this.chart=n;this.canvas=n.canvas;this.ctx=this.chart.ctx;this.optionsName="toolbar"}function ct(n,i){if(ct.base.constructor.call(this,"Title","title",i,null,n),this.chart=n,this.canvas=n.canvas,this.ctx=this.chart.ctx,this.optionsName="title",t(this.options.margin)&&n.options.subtitles)for(var u=n.options.subtitles,r=0;r<u.length;r++)if((t(u[r].horizontalAlign)&&"center"===this.horizontalAlign||u[r].horizontalAlign===this.horizontalAlign)&&(t(u[r].verticalAlign)&&"top"===this.verticalAlign||u[r].verticalAlign===this.verticalAlign)&&!u[r].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}"undefined"==typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize));this.height=this.width=null;this.bounds={x1:null,y1:null,x2:null,y2:null}}function dt(n,t,i){dt.base.constructor.call(this,"Subtitle","subtitles",t,i,n);this.chart=n;this.canvas=n.canvas;this.ctx=this.chart.ctx;this.optionsName="subtitles";this.isOptionsInArray=!0;"undefined"==typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize));this.height=this.width=null;this.bounds={x1:null,y1:null,x2:null,y2:null}}function hi(){this.pool=[]}function gt(n){var t;n&&ti[n]&&(t=ti[n]);gt.base.constructor.call(this,"CultureInfo",null,t,null,null)}var ni=!1,h={},n=!!document.createElement("canvas").getContext,ot={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditHref:"",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:n?"transparent":null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{backgroundColor:"white",backgroundColorOnHover:"#2196f3",borderColor:"#2196f3",borderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:n?"transparent":null,borderColor:n?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:n?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:n?"transparent":null,titleBorderColor:n?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:n?"transparent":null,labelBorderColor:n?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:n?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:n?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:n?"grey":null,labelBorderColor:n?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:n?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:n?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:n?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},ti={en:{}},i=n?"Trebuchet MS, Helvetica, sans-serif":"Arial",wt=n?"Impact, Charcoal, sans-serif":"Arial",lt={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},f,w,l,g,nt,bt;w="#333333";l="#000000";f="#666666";nt=g="#000000";var b=20,r=14,ci={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:wt,fontSize:32,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:wt,fontSize:r,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:i,indexLabelFontSize:r,indexLabelFontColor:w,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:i,titleFontSize:b,titleFontColor:w,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:w,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:i,titleFontSize:b,titleFontColor:w,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:w,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:i,fontSize:14,fontColor:w,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:i,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};l=w="#F5F5F5";f="#FFFFFF";g="#40BAF1";nt="#F5F5F5";var b=20,r=14,pi={colorSet:"colorSet2",title:{fontFamily:i,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:i,fontSize:r,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:i,indexLabelFontSize:r,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:i,titleFontSize:b,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:i,titleFontSize:b,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:i,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:i,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};l=w="#F5F5F5";f="#FFFFFF";g="#40BAF1";nt="#F5F5F5";b=20;r=14;wt={colorSet:"colorSet12",backgroundColor:"#2A2A2A",title:{fontFamily:wt,fontSize:32,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:wt,fontSize:r,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:i,indexLabelFontSize:r,indexLabelFontColor:l,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:i,fontSize:14,fontColor:w,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:i,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:l,backgroundColor:"rgba(0, 0, 0, .7)"}};f="#FFFFFF";l=w="#FAFAFA";g="#40BAF1";nt="#F5F5F5";var b=20,r=14,ht={light1:ci,light2:pi,dark1:wt,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:i,fontSize:32,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:i,fontSize:r,fontColor:w,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:i,indexLabelFontSize:r,indexLabelFontColor:l,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:1,lineColor:f,tickThickness:1,tickColor:f,gridThickness:0,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:0,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:i,titleFontSize:b,titleFontColor:l,titleFontWeight:"normal",labelFontFamily:i,labelFontSize:r,labelFontColor:l,labelFontWeight:"normal",lineThickness:0,lineColor:f,tickThickness:1,tickColor:f,gridThickness:1,gridColor:f,stripLines:[{labelFontFamily:i,labelFontSize:r,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:i,labelFontSize:r,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:nt,color:g,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:i,fontSize:14,fontColor:w,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:i,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:l,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:ci,theme2:pi,theme3:ci},s={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};(function(){h.fSDec=function(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(Math.ceil(n.length/285)^n.charCodeAt(t));return i};h.obj={trVs:"Ush`m!Wdsrhno",fntStr:"qy!B`mhcsh-!Mtbhe`!Fs`oed-!Mtbhe`!R`or!Tohbned-!@sh`m-!r`or,rdshg",txtBl:"udyuC`rdmhod",fnt:"gnou",fSy:"ghmmRuxmd",fTx:"ghmmUdyu",grClr:"fsdx",cntx:"buy",tp:"unq"};delete ot[h.fSDec("Bi`su")][h.fSDec("bsdehuIsdg")];h.pro={sCH:ot[h.fSDec("Bi`su")][h.fSDec("bsdehuIsdg")]};h._fTWm=function(n){if("undefined"==typeof h.pro.sCH&&!ki)try{var t=n[h.fSDec(h.obj.cntx)];t[h.fSDec(h.obj.txtBl)]=h.fSDec(h.obj.tp);t[h.fSDec(h.obj.fnt)]=11+h.fSDec(h.obj.fntStr);t[h.fSDec(h.obj.fSy)]=h.fSDec(h.obj.grClr);t[h.fSDec(h.obj.fTx)](h.fSDec(h.obj.trVs),2,n.height-13)}catch(i){}}})();var wi={},st=null,tr=function(){this.ctx.clearRect(0,0,this.width,this.height);this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},ir=function(n,t){return t=Math.min(this.width,this.height),Math.max("theme4"===this.theme?0:300<=t?12:10,Math.round(t*(n/400)))},at=function(){var n=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),i="Sun Mon Tue Wed Thu Fri Sat".split(" "),r="January February March April May June July August September October November December".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g;return function(o,s,h){var nt=h?h.days:t,tt=h?h.months:r,it=h?h.shortDays:i,rt=h?h.shortMonths:u,a;if(h="",a=!1,o=o&&o.getTime?o:o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");"UTC:"===s.slice(0,4)&&(s=s.slice(4),a=!0);h=a?"getUTC":"get";var w=o[h+"Date"](),b=o[h+"Day"](),v=o[h+"Month"](),y=o[h+"FullYear"](),c=o[h+"Hours"](),d=o[h+"Minutes"](),g=o[h+"Seconds"](),p=o[h+"Milliseconds"](),l=a?0:o.getTimezoneOffset();return s.replace(n,function(n){switch(n){case"D":return w;case"DD":return k(w,2);case"DDD":return it[b];case"DDDD":return nt[b];case"M":return v+1;case"MM":return k(v+1,2);case"MMM":return rt[v];case"MMMM":return tt[v];case"Y":return parseInt(String(y).slice(-2));case"YY":return k(String(y).slice(-2),2);case"YYY":return k(String(y).slice(-3),3);case"YYYY":return k(y,4);case"h":return c%12||12;case"hh":return k(c%12||12,2);case"H":return c;case"HH":return k(c,2);case"m":return d;case"mm":return k(d,2);case"s":return g;case"ss":return k(g,2);case"f":return String(p).slice(0,1);case"ff":return k(String(p).slice(0,2),2);case"fff":return k(String(p).slice(0,3),3);case"t":return 12>c?"a":"p";case"tt":return 12>c?"am":"pm";case"T":return 12>c?"A":"P";case"TT":return 12>c?"AM":"PM";case"K":return a?"UTC":(String(o).match(f)||[""]).pop().replace(e,"");case"z":return(0<l?"-":"+")+Math.floor(Math.abs(l)/60);case"zz":return(0<l?"-":"+")+k(Math.floor(Math.abs(l)/60),2);case"zzz":return(0<l?"-":"+")+k(Math.floor(Math.abs(l)/60),2)+k(Math.abs(l)%60,2);default:return n.slice(1,n.length-1)}})}}(),v=function(n,t,i){var y,u,c,r;if(null===n)return"";if(!isFinite(n))return n;n=Number(n);y=0>n?!0:!1;y&&(n*=-1);var b=i?i.decimalSeparator:".",f=i?i.digitGroupSeparator:",",r="";t=String(t);var r=1,o=i="",s=-1,h=[],p=[],v=0,l=0,w=0,e=!1,a=0,o=t.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);for(t=null,u=0;o&&u<o.length;u++)if(t=o[u],"."===t&&0>s)s=u;else{if("%"===t)r*=100;else if("‰"===t){r*=1e3;continue}else if(","===t[0]&&"."===t[t.length-1]){r/=Math.pow(1e3,t.length-1);s=u+t.length-1;continue}else"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||(e=!0);0>s?(h.push(t),"#"===t||"0"===t?v++:","===t&&w++):(p.push(t),"#"!==t&&"0"!==t||l++)}for(e&&(t=Math.floor(n),o=-Math.floor(Math.log(n)/Math.LN10+1),a=0===n?0:0===t?-(v+o):String(t).length-v,r/=Math.pow(10,a)),0>s&&(s=u),r=(n*r).toFixed(l),t=r.split("."),r=(t[0]+"").split(""),n=(t[1]+"").split(""),r&&"0"===r[0]&&r.shift(),e=o=u=l=s=0;0<h.length;)if(t=h.pop(),"#"===t||"0"===t)if(s++,s===v){if(c=r,r=[],"0"===t)for(t=v-l-(c?c.length:0);0<t;)c.unshift("0"),t--;for(;0<c.length;)i=c.pop()+i,e++,0==e%o&&u===w&&0<c.length&&(i=f+i)}else 0<r.length?(i=r.pop()+i,l++,e++):"0"===t&&(i="0"+i,l++,e++),0==e%o&&u===w&&0<r.length&&(i=f+i);else"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?","===t?(u++,o=e,e=0,0<r.length&&(i=f+i)):i=1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?t.slice(1,t.length-1)+i:t+i:(t=0>a?t.replace("+","").replace("-",""):t.replace("-",""),i+=t.replace(/[0]+/,function(n){return k(a,n.length)}));for(f="",h=!1;0<p.length;)t=p.shift(),"#"===t||"0"===t?0<n.length&&0!==Number(n.join(""))?(f+=n.shift(),h=!0):"0"===t&&(f+="0",h=!0):1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?f+=t.slice(1,t.length-1):"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?f+=t:(t=0>a?t.replace("+","").replace("-",""):t.replace("-",""),f+=t.replace(/[0]+/,function(n){return k(a,n.length)}));return i+=(h?b:"")+f,y?"-"+i:i},ui=function(n){var t=0,i=0;return n=n||window.event,n.offsetX||0===n.offsetX?(t=n.offsetX,i=n.offsetY):n.layerX||0==n.layerX?(t=n.layerX,i=n.layerY):(t=n.pageX-n.target.offsetLeft,i=n.pageY-n.target.offsetTop),{x:t,y:i}},bi=!0,li=window.devicePixelRatio||1,fi=1,p=bi?li/fi:1,a=function(n,t,i,r,u,f,e,o,s,h,c,l,a){"undefined"==typeof a&&(a=1);e=e||0;o=o||"black";var v=15<r-t&&15<u-i?8:.35*Math.min(r-t,u-i);n.beginPath();n.moveTo(t,i);n.save();n.fillStyle=f;n.globalAlpha=a;n.fillRect(t,i,r-t,u-i);n.globalAlpha=1;0<e&&(a=0==e%2?0:.5,n.beginPath(),n.lineWidth=e,n.strokeStyle=o,n.moveTo(t,i),n.rect(t-a,i-a,r-t+2*a,u-i+2*a),n.stroke());n.restore();!0===s&&(n.save(),n.beginPath(),n.moveTo(t,i),n.lineTo(t+v,i+v),n.lineTo(r-v,i+v),n.lineTo(r,i),n.closePath(),e=n.createLinearGradient((r+t)/2,i+v,(r+t)/2,i),e.addColorStop(0,f),e.addColorStop(1,"rgba(255, 255, 255, .4)"),n.fillStyle=e,n.fill(),n.restore());!0===h&&(n.save(),n.beginPath(),n.moveTo(t,u),n.lineTo(t+v,u-v),n.lineTo(r-v,u-v),n.lineTo(r,u),n.closePath(),e=n.createLinearGradient((r+t)/2,u-v,(r+t)/2,u),e.addColorStop(0,f),e.addColorStop(1,"rgba(255, 255, 255, .4)"),n.fillStyle=e,n.fill(),n.restore());!0===c&&(n.save(),n.beginPath(),n.moveTo(t,i),n.lineTo(t+v,i+v),n.lineTo(t+v,u-v),n.lineTo(t,u),n.closePath(),e=n.createLinearGradient(t+v,(u+i)/2,t,(u+i)/2),e.addColorStop(0,f),e.addColorStop(1,"rgba(255, 255, 255, 0.1)"),n.fillStyle=e,n.fill(),n.restore());!0===l&&(n.save(),n.beginPath(),n.moveTo(r,i),n.lineTo(r-v,i+v),n.lineTo(r-v,u-v),n.lineTo(r,u),e=n.createLinearGradient(r-v,(u+i)/2,r,(u+i)/2),e.addColorStop(0,f),e.addColorStop(1,"rgba(255, 255, 255, 0.1)"),n.fillStyle=e,e.addColorStop(0,f),e.addColorStop(1,"rgba(255, 255, 255, 0.1)"),n.fillStyle=e,n.fill(),n.closePath(),n.restore())},tt=function(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(Math.ceil(n.length/285)^n.charCodeAt(t));return i},ki=window&&window[tt("mnb`uhno")]&&window[tt("mnb`uhno")].href&&window[tt("mnb`uhno")].href.indexOf&&(-1!==window[tt("mnb`uhno")].href.indexOf(tt("b`ow`rkr/bnl"))||-1!==window[tt("mnb`uhno")].href.indexOf(tt("gdonqhy/bnl"))||-1!==window[tt("mnb`uhno")].href.indexOf(tt("gheemd"))),rr=ki&&-1===window[tt("mnb`uhno")].href.indexOf(tt("gheemd")),ur={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"},handle:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="}};c.prototype.setOptions=function(n,t){if(ot[this._defaultsKey]){var r=ot[this._defaultsKey];for(var i in r)"publicProperties"!==i&&r.hasOwnProperty(i)&&(this[i]=n&&i in n?n[i]:t&&i in t?t[i]:r[i])}else ni&&window.console&&console.log("defaults not set")};c.prototype.get=function(n){var t=ot[this._defaultsKey];if("options"===n)return this.options&&this.options._isPlaceholder?null:this.options;if(t.hasOwnProperty(n)||t.publicProperties&&t.publicProperties.hasOwnProperty(n))return this[n];window.console&&window.console.log('Property "'+n+"\" doesn't exist. Please check for typo.")};c.prototype.set=function(n,t,i){i="undefined"==typeof i?!0:i;var r=ot[this._defaultsKey];if("options"===n)this.createUserOptions(t);else if(r.hasOwnProperty(n)||r.publicProperties&&r.publicProperties.hasOwnProperty(n)&&"readWrite"===r.publicProperties[n])this.options._isPlaceholder&&this.createUserOptions(),this.options[n]=t;else{window.console&&(r.publicProperties&&r.publicProperties.hasOwnProperty(n)&&"readOnly"===r.publicProperties[n]?window.console.log('Property "'+n+'" is read-only.'):window.console.log('Property "'+n+"\" doesn't exist. Please check for typo."));return}i&&(this.stockChart||this.chart||this).render()};c.prototype.addTo=function(n,t,i,r){r="undefined"==typeof r?!0:r;var u=ot[this._defaultsKey];u.hasOwnProperty(n)||u.publicProperties&&u.publicProperties.hasOwnProperty(n)&&"readWrite"===u.publicProperties[n]?(this.options._isPlaceholder&&this.createUserOptions(),"undefined"==typeof this.options[n]&&(this.options[n]=[]),n=this.options[n],i="undefined"==typeof i||null===i?n.length:i,n.splice(i,0,t),r&&(this.chart||this).render()):window.console&&(u.publicProperties&&u.publicProperties.hasOwnProperty(n)&&"readOnly"===u.publicProperties[n]?window.console.log('Property "'+n+'" is read-only.'):window.console.log('Property "'+n+"\" doesn't exist. Please check for typo."))};c.prototype.createUserOptions=function(n){if("undefined"!=typeof n||this.options._isPlaceholder)if(this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var t=this.parent.options[this.optionsName],i=t.length;this.options._isPlaceholder||(yt(t),i=t.indexOf(this.options));this.options="undefined"==typeof n?{}:n;t[i]=this.options}else this.options="undefined"==typeof n?{}:n,n=this.parent.options,this.optionsName?t=this.optionsName:(t=this._defaultsKey)&&0!==t.length?(i=t.charAt(0).toLowerCase(),1<t.length&&(i=i.concat(t.slice(1))),t=i):t=void 0,n[t]=this.options};c.prototype.remove=function(n){var t,i;n="undefined"==typeof n?!0:n;this.isOptionsInArray?(t=this.parent.options[this.optionsName],yt(t),i=t.indexOf(this.options),0<=i&&t.splice(i,1)):delete this.parent.options[this.optionsName];n&&(this.chart||this).render()};c.prototype.updateOption=function(n){!ot[this._defaultsKey]&&ni&&window.console&&console.log("defaults not set");var e=ot[this._defaultsKey],i={},u=this[n],r=this._themeOptionsKey,f=this._index;return(this.theme&&t(r)&&t(f)?i=t(ht[this.theme])?ht.light1:ht[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[r]&&(null===f?i=this.parent.themeOptions[r]:0<this.parent.themeOptions[r].length&&(i=Math.min(this.parent.themeOptions[r].length-1,f),i=this.parent.themeOptions[r][i])),this.themeOptions=i,n in e&&(u=n in this.options?this.options[n]:i&&n in i?i[n]:e[n]),u===this[n])?!1:(this[n]=u,!0)};c.prototype.trackChanges=function(n){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[n]=this.options[n]};c.prototype.isBeingTracked=function(n){return this.options._oldOptions||(this.options._oldOptions={}),this.options._oldOptions[n]?!0:!1};c.prototype.hasOptionChanged=function(n){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[n]!==this.options[n]};c.prototype.addEventListener=function(n,t,i){n&&t&&(this._eventListeners[n]=this._eventListeners[n]||[],this._eventListeners[n].push({context:i||this,eventHandler:t}))};c.prototype.removeEventListener=function(n,t){if(n&&t&&this._eventListeners[n])for(var r=this._eventListeners[n],i=0;i<r.length;i++)if(r[i].eventHandler===t){r[i].splice(i,1);break}};c.prototype.removeAllEventListeners=function(){this._eventListeners=[]};c.prototype.dispatchEvent=function(n,t,i){if(n&&this._eventListeners[n]){t=t||{};for(var u=this._eventListeners[n],r=0;r<u.length;r++)u[r].eventHandler.call(u[r].context,t)}"function"==typeof this[n]&&this[n].call(i||this.chart,t)};pt.prototype.registerSpace=function(n,t){"top"===n?this._topOccupied+=t.height:"bottom"===n?this._bottomOccupied+=t.height:"left"===n?this._leftOccupied+=t.width:"right"===n&&(this._rightOccupied+=t.width)};pt.prototype.unRegisterSpace=function(n,t){"top"===n?this._topOccupied-=t.height:"bottom"===n?this._bottomOccupied-=t.height:"left"===n?this._leftOccupied-=t.width:"right"===n&&(this._rightOccupied-=t.width)};pt.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}};pt.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding};it(y,c);y.prototype._initialize=function(){t(this.padding)||"object"!=typeof this.padding?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=Number(this.padding)|0:(this.topPadding=t(this.padding.top)?0:Number(this.padding.top)|0,this.rightPadding=t(this.padding.right)?0:Number(this.padding.right)|0,this.bottomPadding=t(this.padding.bottom)?0:Number(this.padding.bottom)|0,this.leftPadding=t(this.padding.left)?0:Number(this.padding.left)|0)};y.prototype.render=function(n){var u,t;if(0!==this.fontSize){n&&this.ctx.save();u=this.ctx.font;this.ctx.textBaseline=this.textBaseline;t=0;this._isDirty&&this.measureText(this.ctx);this.ctx.translate(this.x,this.y+t);"middle"===this.textBaseline&&(t=-this._lineHeight/2);this.ctx.font=this._getFontString();this.ctx.rotate(Math.PI/180*this.angle);var r=0,f=this.topPadding,i=null;for(this.ctx.roundRect||vt(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,t,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,t=0;t<this._wrappedText.lines.length;t++)i=this._wrappedText.lines[t],"right"===this.horizontalAlign?r=(this.width-(this.leftPadding+this.rightPadding))/2-i.width/2+this.leftPadding:"left"===this.horizontalAlign?r=this.leftPadding:"center"===this.horizontalAlign&&(r=(this.width-(this.leftPadding+this.rightPadding))/2-i.width/2+this.leftPadding),this.ctx.fillText(i.text,r,f),f+=i.height;this.ctx.font=u;n&&this.ctx.restore()}};y.prototype.setText=function(n){this.text=n;this._isDirty=!0;this._wrappedText=null};y.prototype.measureText=function(){if(this._lineHeight=vi(this.fontFamily,this.fontSize,this.fontWeight),null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}};y.prototype._getLineWithWidth=function(n,t,i){var u,r;if(n=String(n),!n)return{text:"",width:0};var f=i=0,e=n.length-1,u=Infinity;for(this.ctx.font=this._getFontString();f<=e;)if(u=Math.floor((f+e)/2),r=n.substr(0,u+1),i=this.ctx.measureText(r).width,i<t)f=u+1;else if(i>t)e=u-1;else break;return i>t&&1<r.length&&(r=r.substr(0,r.length-1),i=this.ctx.measureText(r).width),t=!0,(r.length===n.length||" "===n[r.length])&&(t=!1),t&&(n=r.split(" "),1<n.length&&n.pop(),r=n.join(" "),i=this.ctx.measureText(r).width),{text:r,width:i}};y.prototype._wrapText=function(){var r=new String(kt(String(this.text))),u=[],e=this.ctx.font,t=0,i=0,f,n;if(this.ctx.font=this._getFontString(),0===this.frontSize)i=t=0;else for(;0<r.length;){f=this.maxHeight-(this.topPadding+this.bottomPadding);n=this._getLineWithWidth(r,this.maxWidth-(this.leftPadding+this.rightPadding),!1);n.height=this._lineHeight;u.push(n);var o=i,i=Math.max(i,n.width),t=t+n.height,r=kt(r.slice(n.text.length,r.length));f&&t>f&&(n=u.pop(),t-=n.height,i=o)}this._wrappedText={lines:u,width:i,height:t};this.width=i+(this.leftPadding+this.rightPadding);this.height=t+(this.topPadding+this.bottomPadding);this.ctx.font=e};y.prototype._getFontString=function(){var i,t;return i=""+(this.fontStyle?this.fontStyle+" ":""),i+=this.fontWeight?this.fontWeight+" ":"",i+=this.fontSize?this.fontSize+"px ":"",t=this.fontFamily?this.fontFamily+"":"",!n&&t&&(t=t.split(",")[0],"'"!==t[0]&&'"'!==t[0]&&(t="'"+t+"'")),i+t};it(si,c);it(ct,c);ct.prototype.setLayout=function(){var n;if(this.text){var o=this.dockInsidePlotArea?this.chart.plotArea:this.chart,i=o.layoutManager.getFreeSpace(),f=i.x1,e=i.y1,s=0,r=0,c=this.chart._menuButton&&this.chart.exportEnabled&&"top"===this.verticalAlign?22:0,h,u;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(null===this.maxWidth&&(this.maxWidth=i.width-4-c*("center"===this.horizontalAlign?2:1)),r=.5*i.height-this.margin-2,s=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(null===this.maxWidth&&(this.maxWidth=i.height-4),r=.5*i.width-this.margin-2):"center"===this.horizontalAlign&&(null===this.maxWidth&&(this.maxWidth=i.width-4),r=.5*i.height-4));t(this.padding)||"number"!=typeof this.padding?t(this.padding)||"object"!=typeof this.padding||(n=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,n+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0,n*=1.25):n=2.5*this.padding;this.wrap||(r=Math.min(r,Math.max(1.5*this.fontSize,this.fontSize+n)));r=new y(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:r,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"});n=r.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(e=i.y1+2,u="top"):"bottom"===this.verticalAlign&&(e=i.y2-2-n.height,u="bottom"),"left"===this.horizontalAlign?f=i.x1+2:"center"===this.horizontalAlign?f=i.x1+i.width/2-n.width/2:"right"===this.horizontalAlign&&(f=i.x2-2-n.width-c),h=this.horizontalAlign,this.width=n.width,this.height=n.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(f=i.x1+2,e=i.y2-2-(this.maxWidth/2-n.width/2),s=-90,u="left",this.width=n.height,this.height=n.width):"right"===this.horizontalAlign?(f=i.x2-2,e=i.y1+2+(this.maxWidth/2-n.width/2),s=90,u="right",this.width=n.height,this.height=n.width):"center"===this.horizontalAlign&&(e=o.y1+(o.height/2-n.height/2),f=o.x1+(o.width/2-n.width/2),u="center",this.width=n.width,this.height=n.height),h="center");r.x=f;r.y=e;r.angle=s;r.horizontalAlign=h;this._textBlock=r;o.layoutManager.registerSpace(u,{width:this.width+("left"===u||"right"===u?this.margin+2:0),height:this.height+("top"===u||"bottom"===u?this.margin+2:0)});this.bounds={x1:f,y1:e,x2:f+this.width,y2:e+this.height};this.ctx.textBaseline="top"}};ct.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)};it(dt,c);dt.prototype.setLayout=ct.prototype.setLayout;dt.prototype.render=ct.prototype.render;hi.prototype.get=function(n,t){var i=null;return 0<this.pool.length?(i=this.pool.pop(),ii(i,n,t)):i=ut(n,t),i};hi.prototype.release=function(n){this.pool.push(n)};it(gt,c);bt={addTheme:function(n,t){ht[n]=t},addColorSet:function(n,t){lt[n]=t},addCultureInfo:function(n,t){ti[n]=t},formatNumber:function(n,t,i){if(i=i||"en",ti[i])return v(n,t||"#,##0.##",new gt(i));throw"Unknown Culture Name";},formatDate:function(n,t,i){if(i=i||"en",ti[i])return at(n,t||"DD MMM YYYY",new gt(i));throw"Unknown Culture Name";}};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=bt:"function"==typeof define&&define.amd?define([],function(){return bt}):window.CanvasJS=bt;bt.Chart=function(){function pi(n,t){return n.x-t.x}function i(r,u){var f;if(u=u||{},this.theme=t(u.theme)||t(ht[u.theme])?"light1":u.theme,i.base.constructor.call(this,"Chart",null,u,null,null),f=this,this._containerId=r,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new hi,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this.container="string"==typeof this._containerId?document.getElementById(this._containerId):this._containerId){this.container.innerHTML="";var e=0,s=0,e=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,s=this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height;this.width=e;this.height=s;this.x1=this.y1=0;this.x2=this.width;this.y2=this.height;this._selectedColorSet="undefined"!=typeof lt[this.colorSet]?lt[this.colorSet]:lt.colorSet1;this._canvasJSContainer=document.createElement("div");this._canvasJSContainer.setAttribute("class","canvasjs-chart-container");this._canvasJSContainer.style.position="relative";this._canvasJSContainer.style.textAlign="left";this._canvasJSContainer.style.cursor="auto";n||(this._canvasJSContainer.style.height="0px");this.container.appendChild(this._canvasJSContainer);this.canvas=ut(e,s);this._preRenderCanvas=ut(e,s);this.canvas.style.position="absolute";this.canvas.style.WebkitUserSelect="none";this.canvas.style.MozUserSelect="none";this.canvas.style.msUserSelect="none";this.canvas.style.userSelect="none";this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",vt(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",vt(this._preRenderCtx),n?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=ut(e,s),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=ut(e,s),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",vt(this.overlaidCanvasCtx)),this._eventManager=new tt(this),this.windowResizeHandler=o(window,"resize",function(){f._updateSize()&&f.render()},this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.cssText="position: absolute; right: 1px; top: 1px;",this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},o(this.overlaidCanvas,"click",function(n){f._mouseEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,"mousemove",function(n){f._mouseEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,"mouseup",function(n){f._mouseEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,"mousedown",function(n){f._mouseEventHandler(n);et(f._dropdownMenu)},this.allDOMEventHandlers),o(this.overlaidCanvas,"mouseout",function(n){f._mouseEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(n){f._touchEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(n){f._touchEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(n){f._touchEventHandler(n)},this.allDOMEventHandlers),o(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(n){f._touchEventHandler(n)},this.allDOMEventHandlers),this.toolTip=new w(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function ot(n,t){for(var u,r,f,i,o,e=[],s=0;s<n.length;s++)0==s?e.push(n[0]):(i=s-1,r=0===i?0:i-1,f=i===n.length-1?i:i+1,u=Math.abs((n[f].x-n[r].x)/(0==n[f].x-n[i].x?.01:n[f].x-n[i].x))*(t-1)/2+1,o=(n[f].x-n[r].x)/u,u=(n[f].y-n[r].y)/u,e[e.length]=n[i].x>n[r].x&&0<o||n[i].x<n[r].x&&0>o?{x:n[i].x+o/3,y:n[i].y+u/3}:{x:n[i].x,y:n[i].y+u/9},i=s,r=0===i?0:i-1,f=i===n.length-1?i:i+1,u=Math.abs((n[f].x-n[r].x)/(0==n[i].x-n[r].x?.01:n[i].x-n[r].x))*(t-1)/2+1,o=(n[f].x-n[r].x)/u,u=(n[f].y-n[r].y)/u,e[e.length]=n[i].x>n[r].x&&0<o||n[i].x<n[r].x&&0>o?{x:n[i].x-o/3,y:n[i].y-u/3}:{x:n[i].x,y:n[i].y-u/9},e[e.length]=n[s]);return e}function ti(n,t,i,r,f,e,o,s,h,c){var l=0,a;c?(o.color=e,s.color=e):c=1;l=h?Math.abs(f-i):Math.abs(r-t);l=0<o.trimLength?Math.abs(l*o.trimLength/100):Math.abs(l-o.length);h?(i+=l/2,f-=l/2):(t+=l/2,r-=l/2);l=1==Math.round(o.thickness)%2?.5:0;a=1==Math.round(s.thickness)%2?.5:0;n.save();n.globalAlpha=c;n.strokeStyle=s.color||e;n.lineWidth=s.thickness||2;n.setLineDash&&n.setLineDash(u(s.dashType,s.thickness));n.beginPath();h&&0<s.thickness?(n.moveTo(r-o.thickness/2,Math.round((i+f)/2)-a),n.lineTo(t+o.thickness/2,Math.round((i+f)/2)-a)):0<s.thickness&&(n.moveTo(Math.round((t+r)/2)-a,i+o.thickness/2),n.lineTo(Math.round((t+r)/2)-a,f-o.thickness/2));n.stroke();n.strokeStyle=o.color||e;n.lineWidth=o.thickness||2;n.setLineDash&&n.setLineDash(u(o.dashType,o.thickness));n.beginPath();h&&0<o.thickness?(n.moveTo(r-l,i),n.lineTo(r-l,f),n.moveTo(t+l,i),n.lineTo(t+l,f)):0<o.thickness&&(n.moveTo(t,i+l),n.lineTo(r,i+l),n.moveTo(t,f-l),n.lineTo(r,f-l));n.stroke();n.restore()}function fi(n,t,i,r,u){return null===n||"undefined"==typeof n?"undefined"==typeof i?t:i:(n=parseFloat(n.toString())*(0<=n.toString().indexOf("%")?t/100:1),"undefined"!=typeof r&&(n=Math.min(r,n),"undefined"!=typeof u&&(n=Math.max(u,n))),!isNaN(n)&&n<=t&&0<=n?n:"undefined"==typeof i?t:i)}function g(n,t){g.base.constructor.call(this,"Legend","legend",t,null,n);this.chart=n;this.canvas=n.canvas;this.ctx=this.chart.ctx;this.ghostCtx=this.chart._eventManager.ghostCtx;this.items=[];this.optionsName="legend";this.height=this.width=0;this.orientation=null;this.dataSeries=[];this.bounds={x1:null,y1:null,x2:null,y2:null};"undefined"==typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize));this.lineHeight=vi(this.fontFamily,this.fontSize,this.fontWeight);this.horizontalSpacing=this.fontSize}function b(n,t,i,r){for(b.base.constructor.call(this,"DataSeries","data",t,i,n),this.chart=n,this.canvas=n.canvas,this._ctx=n.canvas.ctx,this.index=i,this.noDataPointsInPlotArea=0,this.id=r,this.chart._eventManager.objectMap[r]={id:r,objectType:"dataSeries",dataSeriesIndex:i},n=t.dataPoints?t.dataPoints.length:0,this.dataPointEOs=[],t=0;t<n;t++)this.dataPointEOs[t]={};this.dataPointIds=[];this.plotUnit=[];this.axisY=this.axisX=null;this.optionsName="data";this.isOptionsInArray=!0;null===this.fillOpacity&&(this.fillOpacity=this.type.match(/area/i)?.7:1);this.axisPlacement=this.getDefaultAxisPlacement();"undefined"==typeof this.options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function r(n,i,u,f,e,o){if(r.base.constructor.call(this,"Axis",i,u,f,n),this.chart=n,this.canvas=n.canvas,this.ctx=n.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:Infinity,max:-Infinity,viewPortMin:Infinity,viewPortMax:-Infinity,minDiff:Infinity},this.isOptionsInArray=!0,"axisX"===e?("left"===o||"bottom"===o?(this.optionsName="axisX",t(this.chart.sessionVariables.axisX[f])&&(this.chart.sessionVariables.axisX[f]={}),this.sessionVariables=this.chart.sessionVariables.axisX[f]):(this.optionsName="axisX2",t(this.chart.sessionVariables.axisX2[f])&&(this.chart.sessionVariables.axisX2[f]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[f]),this.options.interval||(this.intervalType=null)):"left"===o||"bottom"===o?(this.optionsName="axisY",t(this.chart.sessionVariables.axisY[f])&&(this.chart.sessionVariables.axisY[f]={}),this.sessionVariables=this.chart.sessionVariables.axisY[f]):(this.optionsName="axisY2",t(this.chart.sessionVariables.axisY2[f])&&(this.chart.sessionVariables.axisY2[f]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[f]),"undefined"==typeof this.options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"==typeof this.options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=e,"axisX"!==e||u&&"undefined"!=typeof u.gridThickness||(this.gridThickness=0),this._position=o,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new ci(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(n=0;n<this.options.stripLines.length;n++)this.stripLines.push(new nt(this.chart,this.options.stripLines[n],n,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new st(this.chart,this.options.crosshair,this));this._titleTextBlock=null;this.hasOptionChanged("viewportMinimum")&&null===this.viewportMinimum&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null);this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||null===this.sessionVariables.newViewportMinimum?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum;this.hasOptionChanged("viewportMaximum")&&null===this.viewportMaximum&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null);this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||null===this.sessionVariables.newViewportMaximum?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum;null!==this.minimum&&null!==this.viewportMinimum&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum));null!==this.maximum&&null!==this.viewportMaximum&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum));this.trackChanges("viewportMinimum");this.trackChanges("viewportMaximum")}function ci(n,t,i,r){if(ci.base.constructor.call(this,"ScaleBreaks","scaleBreaks",t,null,r),this.id=i,this.chart=n,this.ctx=this.chart.ctx,this.axis=r,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],"string"==typeof this.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):"number"!=typeof this.spacing&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(n=0;n<this.options.customBreaks.length;n++)this.customBreaks.push(new k(this.chart,"customBreaks",this.options.customBreaks[n],n,++this.chart._eventManager.lastObjectId,this)),"number"==typeof this.customBreaks[n].startValue&&"number"==typeof this.customBreaks[n].endValue&&this.customBreaks[n].endValue!==this.customBreaks[n].startValue&&this._appliedBreaks.push(this.customBreaks[n]);for(this._appliedBreaks.sort(function(n,t){return n.startValue-t.startValue}),n=0;n<this._appliedBreaks.length-1;n++)this._appliedBreaks[n].endValue>=this._appliedBreaks[n+1].startValue&&(this._appliedBreaks[n].endValue=Math.max(this._appliedBreaks[n].endValue,this._appliedBreaks[n+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+n+" and "+(n+1)+" are overlapping."),this._appliedBreaks.splice(n,2),n--)}}function k(n,i,r,u,f,e){k.base.constructor.call(this,"Break",i,r,u,e);this.id=f;this.chart=n;this.ctx=this.chart.ctx;this.scaleBreaks=e;this.optionsName=i;this.isOptionsInArray=!0;this.type=r.type?this.type:e.type;this.fillOpacity=t(r.fillOpacity)?e.fillOpacity:this.fillOpacity;this.lineThickness=t(r.lineThickness)?e.lineThickness:this.lineThickness;this.color=r.color?this.color:e.color;this.lineColor=r.lineColor?this.lineColor:e.lineColor;this.lineDashType=r.lineDashType?this.lineDashType:e.lineDashType;!t(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime());!t(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime());"number"==typeof this.startValue&&"number"==typeof this.endValue&&this.endValue<this.startValue&&(n=this.startValue,this.startValue=this.endValue,this.endValue=n);this.spacing="undefined"==typeof r.spacing?e.spacing:r.spacing;"string"==typeof this.options.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):"number"!=typeof this.options.spacing&&(this.spacing=e.spacing);this.size=e.parent.logarithmic?1:0}function nt(n,t,i,r,u){nt.base.constructor.call(this,"StripLine","stripLines",t,i,u);this.id=r;this.chart=n;this.ctx=this.chart.ctx;this.label=this.label;this.axis=u;this.optionsName="stripLines";this.isOptionsInArray=!0;this._thicknessType="pixel";null!==this.startValue&&null!==this.endValue&&(this.value=u.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function st(n,t,i){st.base.constructor.call(this,"Crosshair","crosshair",t,null,i);this.chart=n;this.ctx=this.chart.ctx;this.axis=i;this.optionsName="crosshair";this._thicknessType="pixel"}function w(n,t){w.base.constructor.call(this,"ToolTip","toolTip",t,null,n);this.chart=n;this.canvas=n.canvas;this.ctx=this.chart.ctx;this.currentDataPointIndex=this.currentSeriesIndex=-1;this._prevY=this._prevX=NaN;this.containerTransitionDuration=.1;this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration);this.optionsName="toolTip";this._initialize()}function tt(n){this.chart=n;this.lastObjectId=0;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.ghostCanvas=ut(this.chart.width,this.chart.height);this.ghostCtx=this.ghostCanvas.getContext("2d");this.mouseoveredObjectMaps=[]}function li(n){this.chart=n;this.ctx=this.chart.plotArea.ctx;this.animations=[];this.animationRequestId=null}var wt,bt,f,l;return it(i,c),i.prototype.destroy=function(){var t=this.allDOMEventHandlers,n;for(this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId),n=0;n<t.length;n++){var i=t[n][0],r=t[n][1],u=t[n][2],f=t[n][3],f=f||!1;i.removeEventListener?i.removeEventListener(r,u,f):i.detachEvent&&i.detachEvent("on"+r,u)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.overlaidCanvas=this.canvas=this.container=this._canvasJSContainer=null;this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=this._breaksCanvas=this._preRenderCanvas=this.toolTip.container=null},i.prototype._updateOptions=function(){var t=this,r,i,u;this.updateOption("width");this.updateOption("height");this.updateOption("dataPointWidth");this.updateOption("dataPointMinWidth");this.updateOption("dataPointMaxWidth");this.updateOption("interactivityEnabled");this.updateOption("theme");this.updateOption("colorSet")&&(this._selectedColorSet="undefined"!=typeof lt[this.colorSet]?lt[this.colorSet]:lt.colorSet1);this.updateOption("backgroundColor");this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)");this.updateOption("culture");this._cultureInfo=new gt(this.options.culture);this.updateOption("animationEnabled");this.animationEnabled=this.animationEnabled&&n;this.updateOption("animationDuration");this.updateOption("rangeChanging");this.updateOption("rangeChanged");this.updateOption("exportEnabled");this.updateOption("exportFileName");this.updateOption("zoomType");this.options.zoomEnabled?(this._zoomButton||(r=!1,et(this._zoomButton=document.createElement("button")),ft(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,o(this._zoomButton,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(this._zoomButton,"click",function(){t.zoomEnabled?(t.zoomEnabled=!1,t.panEnabled=!0,ft(t,t._zoomButton,"zoom")):(t.zoomEnabled=!0,t.panEnabled=!1,ft(t,t._zoomButton,"pan"));t.render()},this.allDOMEventHandlers),o(this._zoomButton,"mouseover",function(){r?r=!1:(rt(t,t._zoomButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),o(this._zoomButton,"mouseout",function(){r||(rt(t,t._zoomButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers)),this._resetButton||(r=!1,et(this._resetButton=document.createElement("button")),ft(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor,this._toolBar.appendChild(this._resetButton),o(this._resetButton,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(this._resetButton,"click",function(){if(t.toolTip.hide(),t.zoomEnabled||t.panEnabled?(t.zoomEnabled=!0,t.panEnabled=!1,ft(t,t._zoomButton,"pan"),t._defaultCursor="default",t.overlaidCanvas.style.cursor=t._defaultCursor):(t.zoomEnabled=!1,t.panEnabled=!1),t.sessionVariables.axisX)for(var n=0;n<t.sessionVariables.axisX.length;n++)t.sessionVariables.axisX[n].newViewportMinimum=null,t.sessionVariables.axisX[n].newViewportMaximum=null;if(t.sessionVariables.axisX2)for(n=0;n<t.sessionVariables.axisX2.length;n++)t.sessionVariables.axisX2[n].newViewportMinimum=null,t.sessionVariables.axisX2[n].newViewportMaximum=null;if(t.sessionVariables.axisY)for(n=0;n<t.sessionVariables.axisY.length;n++)t.sessionVariables.axisY[n].newViewportMinimum=null,t.sessionVariables.axisY[n].newViewportMaximum=null;if(t.sessionVariables.axisY2)for(n=0;n<t.sessionVariables.axisY2.length;n++)t.sessionVariables.axisY2[n].newViewportMinimum=null,t.sessionVariables.axisY2[n].newViewportMaximum=null;t.resetOverlayedCanvas();et(t._zoomButton,t._resetButton);t._dispatchRangeEvent("rangeChanging","reset");t.render();t._dispatchRangeEvent("rangeChanged","reset");t.syncCharts&&t.syncCharts(null,null)},this.allDOMEventHandlers),o(this._resetButton,"mouseover",function(){r||(rt(t,t._resetButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.hoverFfontColorOnHoverontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),o(this._resetButton,"mouseout",function(){r||(rt(t,t._resetButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=t._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(t._zoomButton.getAttribute("state")===t._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),ri(t._zoomButton,t._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))):this.panEnabled=this.zoomEnabled=!1;this._menuButton?this.exportEnabled?ri(this._menuButton):et(this._menuButton):this.exportEnabled&&n&&(r=!1,this._menuButton=document.createElement("button"),ft(this,this._menuButton,"menu"),this._toolBar.appendChild(this._menuButton),o(this._menuButton,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(this._menuButton,"click",function(){"none"!==t._dropdownMenu.style.display||t._dropDownCloseTime&&500>=(new Date).getTime()-t._dropDownCloseTime.getTime()||(t._dropdownMenu.style.display="block",t._menuButton.blur(),t._dropdownMenu.focus())},this.allDOMEventHandlers,!0),o(this._menuButton,"mouseover",function(){r||(rt(t,t._menuButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers,!0),o(this._menuButton,"mouseout",function(){r||(rt(t,t._menuButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&rt(t,t._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers,!0));!this._dropdownMenu&&this.exportEnabled&&n&&(r=!1,this._dropdownMenu=document.createElement("div"),this._dropdownMenu.setAttribute("tabindex",-1),i=-1!==this.theme.indexOf("dark")?"black":"#888888",this._dropdownMenu.style.cssText="position: absolute; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 0px;top: 25px;min-width: 120px;outline: 0;font-size: 14px; font-family: Arial, Helvetica, sans-serif;padding: 5px 0px 5px 0px;text-align: left;line-height: 10px;background-color:"+this.toolbar.backgroundColor+";box-shadow: 2px 2px 10px "+i,t._dropdownMenu.style.display="none",this._toolBar.appendChild(this._dropdownMenu),o(this._dropdownMenu,"blur",function(){et(t._dropdownMenu);t._dropDownCloseTime=new Date},this.allDOMEventHandlers,!0),i=document.createElement("div"),i.style.cssText="padding: 12px 8px 12px 8px",i.innerHTML=this._cultureInfo.printText,i.style.backgroundColor=this.toolbar.backgroundColor,i.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(i),o(i,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(i,"mouseover",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),o(i,"mouseout",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)},this.allDOMEventHandlers,!0),o(i,"click",function(){t.print();et(t._dropdownMenu)},this.allDOMEventHandlers,!0),i=document.createElement("div"),i.style.cssText="padding: 12px 8px 12px 8px",i.innerHTML=this._cultureInfo.saveJPGText,i.style.backgroundColor=this.toolbar.backgroundColor,i.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(i),o(i,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(i,"mouseover",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),o(i,"mouseout",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)},this.allDOMEventHandlers,!0),o(i,"click",function(){oi(t.canvas,"jpeg",t.exportFileName);et(t._dropdownMenu)},this.allDOMEventHandlers,!0),i=document.createElement("div"),i.style.cssText="padding: 12px 8px 12px 8px",i.innerHTML=this._cultureInfo.savePNGText,i.style.backgroundColor=this.toolbar.backgroundColor,i.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(i),o(i,"touchstart",function(){r=!0},this.allDOMEventHandlers),o(i,"mouseover",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)},this.allDOMEventHandlers,!0),o(i,"mouseout",function(){r||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)},this.allDOMEventHandlers,!0),o(i,"click",function(){oi(t.canvas,"png",t.exportFileName);et(t._dropdownMenu)},this.allDOMEventHandlers,!0));"none"!==this._toolBar.style.display&&this._zoomButton&&(this.panEnabled?ft(t,t._zoomButton,"zoom"):ft(t,t._zoomButton,"pan"),t._resetButton.getAttribute("state")!==t._cultureInfo.resetText&&ft(t,t._resetButton,"reset"));this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip);for(u in this.toolTip.options)this.toolTip.options.hasOwnProperty(u)&&this.toolTip.updateOption(u)},i.prototype._updateSize=function(){var n,t,i,r;if(n=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas],t=0,i=0,this.options.width?t=this.width:this.width=t=0<this.container.clientWidth?this.container.clientWidth:this.width,this.options.height?i=this.height:this.height=i=0<this.container.clientHeight?this.container.clientHeight:this.height,this.canvas.width!==t*p||this.canvas.height!==i*p){for(r=0;r<n.length;r++)ii(n[r],t,i);n=!0}else n=!1;return n},i.prototype._initialize=function(){var s,u,r,e,o,f;if(this.isNavigator=t(this.parent)||t(this.parent._defaultsKey)||"Navigator"!==this.parent._defaultsKey?!1:!0,this.toolbar=new si(this,this.options.toolbar),this._animator?this._animator.cancelAllAnimations():this._animator=new li(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=n&&this.animationEnabled&&0===this.renderCount,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new pt(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[],s=0,o=null,this.options.data){for(u=0;u<this.options.data.length;u++)if((s++,!this.options.data[u].type||0<=i._supportedChartTypes.indexOf(this.options.data[u].type))&&(r=new b(this,this.options.data[u],s-1,++this._eventManager.lastObjectId),"error"===r.type&&(r.linkedDataSeriesIndex=t(this.options.data[u].linkedDataSeriesIndex)?u-1:this.options.data[u].linkedDataSeriesIndex,0>r.linkedDataSeriesIndex||r.linkedDataSeriesIndex>=this.options.data.length||"number"!=typeof r.linkedDataSeriesIndex||"error"===this.options.data[r.linkedDataSeriesIndex].type)&&(r.linkedDataSeriesIndex=null),null===r.name&&(r.name="DataSeries "+s),null===r.color?1<this.options.data.length?(r._colorSet=[this._selectedColorSet[r.index%this._selectedColorSet.length]],r.color=this._selectedColorSet[r.index%this._selectedColorSet.length]):r._colorSet="line"===r.type||"stepLine"===r.type||"spline"===r.type||"area"===r.type||"stepArea"===r.type||"splineArea"===r.type||"stackedArea"===r.type||"stackedArea100"===r.type||"rangeArea"===r.type||"rangeSplineArea"===r.type||"candlestick"===r.type||"ohlc"===r.type||"waterfall"===r.type||"boxAndWhisker"===r.type?[this._selectedColorSet[0]]:this._selectedColorSet:r._colorSet=[r.color],null===r.markerSize&&(("line"===r.type||"stepLine"===r.type||"spline"===r.type||0<=r.type.toLowerCase().indexOf("area"))&&r.dataPoints&&r.dataPoints.length<this.width/16||"scatter"===r.type)&&(r.markerSize=8),("bubble"===r.type||"scatter"===r.type)&&r.dataPoints&&(r.dataPoints.some?r.dataPoints.some(function(n){return n.x})&&r.dataPoints.sort(pi):r.dataPoints.sort(pi)),this.data.push(r),e=r.axisPlacement,o=o||e,"normal"===e?"xySwapped"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===e?"normal"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"===e?"normal"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?f='You cannot combine "'+r.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none"):null===e&&"none"===this.plotInfo.axisPlacement&&(f='You cannot combine "'+r.type+'" with pie chart'),f&&window.console)){window.console.log(f);return}for(u=0;u<this.data.length;u++){if("none"==o&&"error"===this.data[u].type&&window.console){window.console.log('You cannot combine "'+r.type+'" with error chart');return}"error"===this.data[u].type&&(this.data[u].axisPlacement=this.plotInfo.axisPlacement=o||"normal",this.data[u]._linkedSeries=null===this.data[u].linkedDataSeriesIndex?null:this.data[this.data[u].linkedDataSeriesIndex])}}this._objectsInitialized=!0;this._plotAreaElements=[]},i._supportedChartTypes=yt("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),i.prototype.setLayout=function(){for(var t,u=this._plotAreaElements,i=0;i<this.data.length;i++)if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement){if(!this.data[i].axisYType||"primary"===this.data[i].axisYType)if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(t=0;t<this.options.axisY.length;t++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[t]=new r(this,"axisY",this.options.axisY[t],t,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[t]=new r(this,"axisY",this.options.axisY[t],t,"axisY","bottom"));this.data[i].axisY=this.axisY[0<=this.data[i].axisYIndex&&this.data[i].axisYIndex<this.axisY.length?this.data[i].axisYIndex:0];this.axisY[0<=this.data[i].axisYIndex&&this.data[i].axisYIndex<this.axisY.length?this.data[i].axisYIndex:0].dataSeries.push(this.data[i])}else this.axisY.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[0]=new r(this,"axisY",this.options.axisY,0,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[0]=new r(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[i].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[i]);if("secondary"===this.data[i].axisYType)if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(t=0;t<this.options.axisY2.length;t++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[t]=new r(this,"axisY2",this.options.axisY2[t],t,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[t]=new r(this,"axisY2",this.options.axisY2[t],t,"axisY","top"));this.data[i].axisY=this.axisY2[0<=this.data[i].axisYIndex&&this.data[i].axisYIndex<this.axisY2.length?this.data[i].axisYIndex:0];this.axisY2[0<=this.data[i].axisYIndex&&this.data[i].axisYIndex<this.axisY2.length?this.data[i].axisYIndex:0].dataSeries.push(this.data[i])}else this.axisY2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[0]=new r(this,"axisY2",this.options.axisY2,0,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[0]=new r(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[i].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[i]);if(!this.data[i].axisXType||"primary"===this.data[i].axisXType)if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(t=0;t<this.options.axisX.length;t++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[t]=new r(this,"axisX",this.options.axisX[t],t,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[t]=new r(this,"axisX",this.options.axisX[t],t,"axisX","left"));this.data[i].axisX=this.axisX[0<=this.data[i].axisXIndex&&this.data[i].axisXIndex<this.axisX.length?this.data[i].axisXIndex:0];this.axisX[0<=this.data[i].axisXIndex&&this.data[i].axisXIndex<this.axisX.length?this.data[i].axisXIndex:0].dataSeries.push(this.data[i])}else this.axisX.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[0]=new r(this,"axisX",this.options.axisX,0,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[0]=new r(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[i].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[i]);if("secondary"===this.data[i].axisXType)if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(t=0;t<this.options.axisX2.length;t++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[t]=new r(this,"axisX2",this.options.axisX2[t],t,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[t]=new r(this,"axisX2",this.options.axisX2[t],t,"axisX","right"));this.data[i].axisX=this.axisX2[0<=this.data[i].axisXIndex&&this.data[i].axisXIndex<this.axisX2.length?this.data[i].axisXIndex:0];this.axisX2[0<=this.data[i].axisXIndex&&this.data[i].axisXIndex<this.axisX2.length?this.data[i].axisXIndex:0].dataSeries.push(this.data[i])}else this.axisX2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[0]=new r(this,"axisX2",this.options.axisX2,0,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[0]=new r(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[i].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[i])}if(this.axisY){for(t=1;t<this.axisY.length;t++)"undefined"==typeof this.axisY[t].options.gridThickness&&(this.axisY[t].gridThickness=0);for(t=0;t<this.axisY.length-1;t++)"undefined"==typeof this.axisY[t].options.margin&&(this.axisY[t].margin=10)}if(this.axisY2){for(t=1;t<this.axisY2.length;t++)"undefined"==typeof this.axisY2[t].options.gridThickness&&(this.axisY2[t].gridThickness=0);for(t=0;t<this.axisY2.length-1;t++)"undefined"==typeof this.axisY2[t].options.margin&&(this.axisY2[t].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&"undefined"==typeof this.axisY2[0].options.gridThickness?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&"undefined"==typeof this.axisY[0].options.gridThickness&&(this.axisY[0].gridThickness=0)),this.axisX)for(t=0;t<this.axisX.length;t++)"undefined"==typeof this.axisX[t].options.gridThickness&&(this.axisX[t].gridThickness=0);if(this.axisX2)for(t=0;t<this.axisX2.length;t++)"undefined"==typeof this.axisX2[t].options.gridThickness&&(this.axisX2[t].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&"undefined"==typeof this.axisX2[0].options.gridThickness?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&"undefined"==typeof this.axisX[0].options.gridThickness&&(this.axisX[0].gridThickness=0)),t=!1,0<this._axes.length&&(this.zoomEnabled||this.panEnabled))for(i=0;i<this._axes.length;i++)if(null!==this._axes[i].viewportMinimum||null!==this._axes[i].viewportMaximum){t=!0;break}if(t?(ri(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor):(et(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),nr(this),this._processData(),this.options.title&&(this.title=new ct(this,this.options.title),this.title.dockInsidePlotArea?u.push(this.title):this.title.setLayout()),this.subtitles=[],this.options.subtitles)for(i=0;i<this.options.subtitles.length;i++)t=new dt(this,this.options.subtitles[i],i),this.subtitles.push(t),t.dockInsidePlotArea?u.push(t):t.setLayout();for(this.legend=new g(this,this.options.legend),i=0;i<this.data.length;i++)(this.data[i].showInLegend||"pie"===this.data[i].type||"doughnut"===this.data[i].type||"funnel"===this.data[i].type||"pyramid"===this.data[i].type)&&this.legend.dataSeries.push(this.data[i]);for(this.legend.dockInsidePlotArea?u.push(this.legend):this.legend.setLayout(),i=0;i<this._axes.length;i++)if(this._axes[i].scaleBreaks&&this._axes[i].scaleBreaks._appliedBreaks.length){n?(this._breaksCanvas=ut(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=ut(this.width,this.height);this._preRenderCtx=this._preRenderCanvas.getContext("2d");"normal"!==this.plotInfo.axisPlacement&&"xySwapped"!==this.plotInfo.axisPlacement||r.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},i.prototype.renderElements=function(){var h=this._plotAreaElements,e,s,c,l,v,a,t,i,o,u;for(this.title&&!this.title.dockInsidePlotArea&&this.title.render(),e=0;e<this.subtitles.length;e++)this.subtitles[e].dockInsidePlotArea||this.subtitles[e].render();if(this.legend.dockInsidePlotArea||this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)r.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else if("none"===this.plotInfo.axisPlacement)this.preparePlotArea();else return;for(e=0;e<h.length;e++)h[e].setLayout(),h[e].render();for(s=[],this.animatedRender&&(c=ut(this.width,this.height),c.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)),h=this.ctx.miterLimit,this.ctx.miterLimit=3,n&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),e=0;e<this.plotInfo.plotTypes.length;e++)for(v=this.plotInfo.plotTypes[e],a=0;a<v.plotUnits.length;a++){for(t=v.plotUnits[a],i=null,t.targetCanvas=null,this.animatedRender&&(t.targetCanvas=ut(this.width,this.height),t.targetCanvasCtx=t.targetCanvas.getContext("2d"),l=t.targetCanvasCtx.miterLimit,t.targetCanvasCtx.miterLimit=3),"line"===t.type?i=this.renderLine(t):"stepLine"===t.type?i=this.renderStepLine(t):"spline"===t.type?i=this.renderSpline(t):"column"===t.type?i=this.renderColumn(t):"bar"===t.type?i=this.renderBar(t):"area"===t.type?i=this.renderArea(t):"stepArea"===t.type?i=this.renderStepArea(t):"splineArea"===t.type?i=this.renderSplineArea(t):"stackedColumn"===t.type?i=this.renderStackedColumn(t):"stackedColumn100"===t.type?i=this.renderStackedColumn100(t):"stackedBar"===t.type?i=this.renderStackedBar(t):"stackedBar100"===t.type?i=this.renderStackedBar100(t):"stackedArea"===t.type?i=this.renderStackedArea(t):"stackedArea100"===t.type?i=this.renderStackedArea100(t):"bubble"===t.type?i=i=this.renderBubble(t):"scatter"===t.type?i=this.renderScatter(t):"pie"===t.type?this.renderPie(t):"doughnut"===t.type?this.renderPie(t):"funnel"===t.type?i=this.renderFunnel(t):"pyramid"===t.type?i=this.renderFunnel(t):"candlestick"===t.type?i=this.renderCandlestick(t):"ohlc"===t.type?i=this.renderCandlestick(t):"rangeColumn"===t.type?i=this.renderRangeColumn(t):"error"===t.type?i=this.renderError(t):"rangeBar"===t.type?i=this.renderRangeBar(t):"rangeArea"===t.type?i=this.renderRangeArea(t):"rangeSplineArea"===t.type?i=this.renderRangeSplineArea(t):"waterfall"===t.type?i=this.renderWaterfall(t):"boxAndWhisker"===t.type&&(i=this.renderBoxAndWhisker(t)),o=0;o<t.dataSeriesIndexes.length;o++)this._dataInRenderedOrder.push(this.data[t.dataSeriesIndexes[o]]);this.animatedRender&&(t.targetCanvasCtx.miterLimit=l,i&&s.push(i))}if(this.ctx.miterLimit=h,this.animatedRender&&this._breaksCanvasCtx&&s.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(l=ut(this.width,this.height).getContext("2d"),s.push(this.renderIndexLabels(l))),u=this,0<s.length)u.disableToolTip=!0,u._animator.animate(200,u.animationDuration,function(n){u.ctx.clearRect(0,0,u.width,u.height);u.ctx.drawImage(c,0,0,Math.floor(u.width*p),Math.floor(u.height*p),0,0,u.width,u.height);for(var t=0;t<s.length;t++)i=s[t],1>n&&"undefined"!=typeof i.startTimePercent?n>=i.startTimePercent&&i.animationCallback(i.easingFunction(n-i.startTimePercent,0,1,1-i.startTimePercent),i):i.animationCallback(i.easingFunction(n,0,1,1),i);u.dispatchEvent("dataAnimationIterationEnd",{chart:u})},function(){var n,i,t;for(s=[],n=0;n<u.plotInfo.plotTypes.length;n++)for(i=u.plotInfo.plotTypes[n],t=0;t<i.plotUnits.length;t++)i.plotUnits[t].targetCanvas=null;c=null;u.disableToolTip=!1});else{if(u._breaksCanvas)if(n)u.plotArea.ctx.drawImage(u._breaksCanvas,0,0,this.width,this.height);else for(o=0;o<u._axes.length;o++)u._axes[o].createMask();0<u._indexLabels.length&&u.renderIndexLabels();u.dispatchEvent("dataAnimationIterationEnd",{chart:u})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||"none"===this._zoomButton.style.display||et(this._zoomButton,this._resetButton),this.toolTip._updateToolTip(),this.renderCount++,ni&&(u=this,setTimeout(function(){var n=document.getElementById("ghostCanvasCopy");n&&(ii(n,u.width,u.height),n.getContext("2d").drawImage(u._eventManager.ghostCanvas,0,0))},2e3)),this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),o=0;o<this._axes.length;o++)this._axes[o].maskCanvas&&(delete this._axes[o].maskCanvas,delete this._axes[o].maskCtx)},i.prototype.render=function(n){n&&(this.options=n);this._initialize();this.setLayout();this.renderElements();this._preRenderCanvas=null},i.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},i.prototype.categoriseDataSeries=function(){for(var n="",u=0;u<this.data.length;u++)if(n=this.data[u],n.dataPoints&&0!==n.dataPoints.length&&n.visible&&0<=i._supportedChartTypes.indexOf(n.type)){for(var t=null,e=!1,f=null,o=!1,r=0;r<this.plotInfo.plotTypes.length;r++)if(this.plotInfo.plotTypes[r].type===n.type){e=!0;t=this.plotInfo.plotTypes[r];break}for(e||(t={type:n.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(t)),r=0;r<t.plotUnits.length;r++)if(t.plotUnits[r].axisYType===n.axisYType&&t.plotUnits[r].axisXType===n.axisXType&&t.plotUnits[r].axisYIndex===n.axisYIndex&&t.plotUnits[r].axisXIndex===n.axisXIndex){o=!0;f=t.plotUnits[r];break}o||(f={type:n.type,previousDataSeriesCount:0,index:t.plotUnits.length,plotType:t,axisXType:n.axisXType,axisYType:n.axisYType,axisYIndex:n.axisYIndex,axisXIndex:n.axisXIndex,axisY:"primary"===n.axisYType?this.axisY[0<=n.axisYIndex&&n.axisYIndex<this.axisY.length?n.axisYIndex:0]:this.axisY2[0<=n.axisYIndex&&n.axisYIndex<this.axisY2.length?n.axisYIndex:0],axisX:"primary"===n.axisXType?this.axisX[0<=n.axisXIndex&&n.axisXIndex<this.axisX.length?n.axisXIndex:0]:this.axisX2[0<=n.axisXIndex&&n.axisXIndex<this.axisX2.length?n.axisXIndex:0],dataSeriesIndexes:[],yTotals:[]},t.plotUnits.push(f));t.totalDataSeries++;f.dataSeriesIndexes.push(u);n.plotUnit=f}for(u=0;u<this.plotInfo.plotTypes.length;u++)for(t=this.plotInfo.plotTypes[u],r=n=0;r<t.plotUnits.length;r++)t.plotUnits[r].previousDataSeriesCount=n,n+=t.plotUnits[r].dataSeriesIndexes.length},i.prototype.assignIdToDataPoints=function(){for(var t,r,i,n=0;n<this.data.length;n++)if(t=this.data[n],t.dataPoints)for(r=t.dataPoints.length,i=0;i<r;i++)t.dataPointIds[i]=++this._eventManager.lastObjectId},i.prototype._processData=function(){var t,r,i,n;for(this.assignIdToDataPoints(),this.categoriseDataSeries(),t=0;t<this.plotInfo.plotTypes.length;t++)for(r=this.plotInfo.plotTypes[t],i=0;i<r.plotUnits.length;i++)n=r.plotUnits[i],"line"===n.type||"stepLine"===n.type||"spline"===n.type||"column"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"bar"===n.type||"bubble"===n.type||"scatter"===n.type?this._processMultiseriesPlotUnit(n):"stackedColumn"===n.type||"stackedBar"===n.type||"stackedArea"===n.type?this._processStackedPlotUnit(n):"stackedColumn100"===n.type||"stackedBar100"===n.type||"stackedArea100"===n.type?this._processStacked100PlotUnit(n):"candlestick"===n.type||"ohlc"===n.type||"rangeColumn"===n.type||"rangeBar"===n.type||"rangeArea"===n.type||"rangeSplineArea"===n.type||"error"===n.type||"boxAndWhisker"===n.type?this._processMultiYPlotUnit(n):"waterfall"===n.type&&this._processSpecificPlotUnit(n);this.calculateAutoBreaks()},i.prototype._processMultiseriesPlotUnit=function(n){var y,v,t;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length))for(var o=n.axisY.dataInfo,e=n.axisX.dataInfo,u,f,s=!1,h=0;h<n.dataSeriesIndexes.length;h++){var r=this.data[n.dataSeriesIndexes[h]],i=0,c=!1,l=!1,a;for(("normal"===r.axisPlacement||"xySwapped"===r.axisPlacement)&&(y=n.axisX.sessionVariables.newViewportMinimum?n.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:n.axisX.logarithmic?0:-Infinity,v=n.axisX.sessionVariables.newViewportMaximum?n.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:Infinity),(r.dataPoints[i].x&&r.dataPoints[i].x.getTime||"dateTime"===r.xValueType)&&(s=!0),i=0;i<r.dataPoints.length;i++)if("undefined"==typeof r.dataPoints[i].x&&(r.dataPoints[i].x=i+(n.axisX.logarithmic?1:0)),r.dataPoints[i].x.getTime?(s=!0,u=r.dataPoints[i].x.getTime()):u=r.dataPoints[i].x,f=r.dataPoints[i].y,u<e.min&&(e.min=u),u>e.max&&(e.max=u),f<o.min&&"number"==typeof f&&(o.min=f),f>o.max&&"number"==typeof f&&(o.max=f),0<i&&(n.axisX.logarithmic?(t=u/r.dataPoints[i-1].x,1>t&&(t=1/t),e.minDiff>t&&1!==t&&(e.minDiff=t)):(t=u-r.dataPoints[i-1].x,0>t&&(t*=-1),e.minDiff>t&&0!==t&&(e.minDiff=t)),null!==f&&null!==r.dataPoints[i-1].y&&(n.axisY.logarithmic?(t=f/r.dataPoints[i-1].y,1>t&&(t=1/t),o.minDiff>t&&1!==t&&(o.minDiff=t)):(t=f-r.dataPoints[i-1].y,0>t&&(t*=-1),o.minDiff>t&&0!==t&&(o.minDiff=t)))),u<y&&!c)null!==f&&(a=u);else{if(!c&&(c=!0,0<i)){i-=2;continue}if(u>v&&!l)l=!0;else if(u>v&&l)continue;r.dataPoints[i].label&&(n.axisX.labels[u]=r.dataPoints[i].label);u<e.viewPortMin&&(e.viewPortMin=u);u>e.viewPortMax&&(e.viewPortMax=u);null===f?e.viewPortMin===u&&a<u&&(e.viewPortMin=a):(f<o.viewPortMin&&"number"==typeof f&&(o.viewPortMin=f),f>o.viewPortMax&&"number"==typeof f&&(o.viewPortMax=f))}r.axisX.valueType=r.xValueType=s?"dateTime":"number"}},i.prototype._processStackedPlotUnit=function(n){var d,k,f;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length)){for(var u=n.axisY.dataInfo,o=n.axisX.dataInfo,r,s,v=!1,h=[],c=[],l=Infinity,a=-Infinity,y=0;y<n.dataSeriesIndexes.length;y++){var e=this.data[n.dataSeriesIndexes[y]],i=0,p=!1,w=!1,b;for(("normal"===e.axisPlacement||"xySwapped"===e.axisPlacement)&&(d=n.axisX.sessionVariables.newViewportMinimum?n.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-Infinity,k=n.axisX.sessionVariables.newViewportMaximum?n.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:Infinity),(e.dataPoints[i].x&&e.dataPoints[i].x.getTime||"dateTime"===e.xValueType)&&(v=!0),i=0;i<e.dataPoints.length;i++)if("undefined"==typeof e.dataPoints[i].x&&(e.dataPoints[i].x=i+(n.axisX.logarithmic?1:0)),e.dataPoints[i].x.getTime?(v=!0,r=e.dataPoints[i].x.getTime()):r=e.dataPoints[i].x,s=t(e.dataPoints[i].y)?0:e.dataPoints[i].y,r<o.min&&(o.min=r),r>o.max&&(o.max=r),0<i&&(n.axisX.logarithmic?(f=r/e.dataPoints[i-1].x,1>f&&(f=1/f),o.minDiff>f&&1!==f&&(o.minDiff=f)):(f=r-e.dataPoints[i-1].x,0>f&&(f*=-1),o.minDiff>f&&0!==f&&(o.minDiff=f)),null!==s&&null!==e.dataPoints[i-1].y&&(n.axisY.logarithmic?0<s&&(f=s/e.dataPoints[i-1].y,1>f&&(f=1/f),u.minDiff>f&&1!==f&&(u.minDiff=f)):(f=s-e.dataPoints[i-1].y,0>f&&(f*=-1),u.minDiff>f&&0!==f&&(u.minDiff=f)))),r<d&&!p)null!==e.dataPoints[i].y&&(b=r);else{if(!p&&(p=!0,0<i)){i-=2;continue}if(r>k&&!w)w=!0;else if(r>k&&w)continue;e.dataPoints[i].label&&(n.axisX.labels[r]=e.dataPoints[i].label);r<o.viewPortMin&&(o.viewPortMin=r);r>o.viewPortMax&&(o.viewPortMax=r);null===e.dataPoints[i].y?o.viewPortMin===r&&b<r&&(o.viewPortMin=b):(n.yTotals[r]=(n.yTotals[r]?n.yTotals[r]:0)+s,0<=s?h[r]?h[r]+=s:(h[r]=s,l=Math.min(s,l)):c[r]?c[r]+=s:(c[r]=s,a=Math.max(s,a)))}n.axisY.scaleBreaks&&n.axisY.scaleBreaks.autoCalculate&&1<=n.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(u.dataPointYPositiveSums?(u.dataPointYPositiveSums.push.apply(u.dataPointYPositiveSums,h),u.dataPointYNegativeSums.push.apply(u.dataPointYPositiveSums,c)):(u.dataPointYPositiveSums=h,u.dataPointYNegativeSums=c));e.axisX.valueType=e.xValueType=v?"dateTime":"number"}for(i in h)h.hasOwnProperty(i)&&!isNaN(i)&&(n=h[i],n<u.min&&(u.min=Math.min(n,l)),n>u.max&&(u.max=n),i<o.viewPortMin||i>o.viewPortMax||(n<u.viewPortMin&&(u.viewPortMin=Math.min(n,l)),n>u.viewPortMax&&(u.viewPortMax=n)));for(i in c)c.hasOwnProperty(i)&&!isNaN(i)&&(n=c[i],n<u.min&&(u.min=n),n>u.max&&(u.max=Math.max(n,a)),i<o.viewPortMin||i>o.viewPortMax||(n<u.viewPortMin&&(u.viewPortMin=n),n>u.viewPortMax&&(u.viewPortMax=Math.max(n,a))))}},i.prototype._processStacked100PlotUnit=function(n){var k,b,r;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length)){for(var i=n.axisY.dataInfo,o=n.axisX.dataInfo,u,s,a=!1,h=!1,c=!1,l=[],v=0;v<n.dataSeriesIndexes.length;v++){var e=this.data[n.dataSeriesIndexes[v]],f=0,y=!1,p=!1,w;for(("normal"===e.axisPlacement||"xySwapped"===e.axisPlacement)&&(k=n.axisX.sessionVariables.newViewportMinimum?n.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-Infinity,b=n.axisX.sessionVariables.newViewportMaximum?n.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:Infinity),(e.dataPoints[f].x&&e.dataPoints[f].x.getTime||"dateTime"===e.xValueType)&&(a=!0),f=0;f<e.dataPoints.length;f++)if("undefined"==typeof e.dataPoints[f].x&&(e.dataPoints[f].x=f+(n.axisX.logarithmic?1:0)),e.dataPoints[f].x.getTime?(a=!0,u=e.dataPoints[f].x.getTime()):u=e.dataPoints[f].x,s=t(e.dataPoints[f].y)?null:e.dataPoints[f].y,u<o.min&&(o.min=u),u>o.max&&(o.max=u),0<f&&(n.axisX.logarithmic?(r=u/e.dataPoints[f-1].x,1>r&&(r=1/r),o.minDiff>r&&1!==r&&(o.minDiff=r)):(r=u-e.dataPoints[f-1].x,0>r&&(r*=-1),o.minDiff>r&&0!==r&&(o.minDiff=r)),t(s)||null===e.dataPoints[f-1].y||(n.axisY.logarithmic?0<s&&(r=s/e.dataPoints[f-1].y,1>r&&(r=1/r),i.minDiff>r&&1!==r&&(i.minDiff=r)):(r=s-e.dataPoints[f-1].y,0>r&&(r*=-1),i.minDiff>r&&0!==r&&(i.minDiff=r)))),u<k&&!y)null!==s&&(w=u);else{if(!y&&(y=!0,0<f)){f-=2;continue}if(u>b&&!p)p=!0;else if(u>b&&p)continue;e.dataPoints[f].label&&(n.axisX.labels[u]=e.dataPoints[f].label);u<o.viewPortMin&&(o.viewPortMin=u);u>o.viewPortMax&&(o.viewPortMax=u);null===s?o.viewPortMin===u&&w<u&&(o.viewPortMin=w):(n.yTotals[u]=(n.yTotals[u]?n.yTotals[u]:0)+s,0<=s?h=!0:0>s&&(c=!0),l[u]=l[u]?l[u]+Math.abs(s):Math.abs(s))}e.axisX.valueType=e.xValueType=a?"dateTime":"number"}n.axisY.logarithmic?(i.max=t(i.viewPortMax)?99*Math.pow(n.axisY.logarithmBase,-.05):Math.max(i.viewPortMax,99*Math.pow(n.axisY.logarithmBase,-.05)),i.min=t(i.viewPortMin)?1:Math.min(i.viewPortMin,1)):h&&!c?(i.max=t(i.viewPortMax)?99:Math.max(i.viewPortMax,99),i.min=t(i.viewPortMin)?1:Math.min(i.viewPortMin,1)):h&&c?(i.max=t(i.viewPortMax)?99:Math.max(i.viewPortMax,99),i.min=t(i.viewPortMin)?-99:Math.min(i.viewPortMin,-99)):!h&&c&&(i.max=t(i.viewPortMax)?-1:Math.max(i.viewPortMax,-1),i.min=t(i.viewPortMin)?-99:Math.min(i.viewPortMin,-99));i.viewPortMin=i.min;i.viewPortMax=i.max;n.dataPointYSums=l}},i.prototype._processMultiYPlotUnit=function(n){var k,w,h;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length))for(var o=n.axisY.dataInfo,f=n.axisX.dataInfo,u,e,c,l,v=!1,y=0;y<n.dataSeriesIndexes.length;y++){var r=this.data[n.dataSeriesIndexes[y]],i=0,a=!1,p=!1,s,t,b;for(("normal"===r.axisPlacement||"xySwapped"===r.axisPlacement)&&(k=n.axisX.sessionVariables.newViewportMinimum?n.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:n.axisX.logarithmic?0:-Infinity,w=n.axisX.sessionVariables.newViewportMaximum?n.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:Infinity),(r.dataPoints[i].x&&r.dataPoints[i].x.getTime||"dateTime"===r.xValueType)&&(v=!0),i=0;i<r.dataPoints.length;i++){if("undefined"==typeof r.dataPoints[i].x&&(r.dataPoints[i].x=i+(n.axisX.logarithmic?1:0)),r.dataPoints[i].x.getTime?(v=!0,u=r.dataPoints[i].x.getTime()):u=r.dataPoints[i].x,(e=r.dataPoints[i].y)&&e.length){for(c=Math.min.apply(null,e),l=Math.max.apply(null,e),t=!0,h=0;h<e.length;h++)null===e.k&&(t=!1);t&&(a||(b=s),s=u)}if(u<f.min&&(f.min=u),u>f.max&&(f.max=u),c<o.min&&(o.min=c),l>o.max&&(o.max=l),0<i&&(n.axisX.logarithmic?(t=u/r.dataPoints[i-1].x,1>t&&(t=1/t),f.minDiff>t&&1!==t&&(f.minDiff=t)):(t=u-r.dataPoints[i-1].x,0>t&&(t*=-1),f.minDiff>t&&0!==t&&(f.minDiff=t)),e&&null!==e[0]&&r.dataPoints[i-1].y&&null!==r.dataPoints[i-1].y[0]&&(n.axisY.logarithmic?(t=e[0]/r.dataPoints[i-1].y[0],1>t&&(t=1/t),o.minDiff>t&&1!==t&&(o.minDiff=t)):(t=e[0]-r.dataPoints[i-1].y[0],0>t&&(t*=-1),o.minDiff>t&&0!==t&&(o.minDiff=t)))),!(u<k)||a){if(!a&&(a=!0,0<i)){i-=2;s=b;continue}if(u>w&&!p)p=!0;else if(u>w&&p)continue;if(r.dataPoints[i].label&&(n.axisX.labels[u]=r.dataPoints[i].label),u<f.viewPortMin&&(f.viewPortMin=u),u>f.viewPortMax&&(f.viewPortMax=u),f.viewPortMin===u&&e)for(h=0;h<e.length;h++)if(null===e[h]&&s<u){f.viewPortMin=s;break}null===e?f.viewPortMin===u&&s<u&&(f.viewPortMin=s):(c<o.viewPortMin&&(o.viewPortMin=c),l>o.viewPortMax&&(o.viewPortMax=l))}}r.axisX.valueType=r.xValueType=v?"dateTime":"number"}},i.prototype._processSpecificPlotUnit=function(n){var v,a;if("waterfall"===n.type&&n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length))for(var f=n.axisY.dataInfo,o=n.axisX.dataInfo,r,u,s=!1,h=0;h<n.dataSeriesIndexes.length;h++){var i=this.data[n.dataSeriesIndexes[h]],t=0,c=!1,l=!1,e=r=0;for(("normal"===i.axisPlacement||"xySwapped"===i.axisPlacement)&&(v=n.axisX.sessionVariables.newViewportMinimum?n.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:n.axisX.logarithmic?0:-Infinity,a=n.axisX.sessionVariables.newViewportMaximum?n.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:Infinity),(i.dataPoints[t].x&&i.dataPoints[t].x.getTime||"dateTime"===i.xValueType)&&(s=!0),t=0;t<i.dataPoints.length;t++)"undefined"!=typeof i.dataPoints[t].isCumulativeSum&&!0===i.dataPoints[t].isCumulativeSum?(i.dataPointEOs[t].cumulativeSumYStartValue=0,i.dataPointEOs[t].cumulativeSum=0===t?0:i.dataPointEOs[t-1].cumulativeSum,i.dataPoints[t].y=0===t?0:i.dataPointEOs[t-1].cumulativeSum):"undefined"!=typeof i.dataPoints[t].isIntermediateSum&&!0===i.dataPoints[t].isIntermediateSum?(i.dataPointEOs[t].cumulativeSumYStartValue=e,i.dataPointEOs[t].cumulativeSum=0===t?0:i.dataPointEOs[t-1].cumulativeSum,i.dataPoints[t].y=0===t?0:r,e=0===t?0:i.dataPointEOs[t-1].cumulativeSum,r=0):(u="number"!=typeof i.dataPoints[t].y?0:i.dataPoints[t].y,i.dataPointEOs[t].cumulativeSumYStartValue=0===t?0:i.dataPointEOs[t-1].cumulativeSum,i.dataPointEOs[t].cumulativeSum=0===t?u:i.dataPointEOs[t-1].cumulativeSum+u,r+=u);for(t=0;t<i.dataPoints.length;t++)if("undefined"==typeof i.dataPoints[t].x&&(i.dataPoints[t].x=t+(n.axisX.logarithmic?1:0)),i.dataPoints[t].x.getTime?(s=!0,r=i.dataPoints[t].x.getTime()):r=i.dataPoints[t].x,u=i.dataPoints[t].y,r<o.min&&(o.min=r),r>o.max&&(o.max=r),i.dataPointEOs[t].cumulativeSum<f.min&&(f.min=i.dataPointEOs[t].cumulativeSum),i.dataPointEOs[t].cumulativeSum>f.max&&(f.max=i.dataPointEOs[t].cumulativeSum),0<t&&(n.axisX.logarithmic?(e=r/i.dataPoints[t-1].x,1>e&&(e=1/e),o.minDiff>e&&1!==e&&(o.minDiff=e)):(e=r-i.dataPoints[t-1].x,0>e&&(e*=-1),o.minDiff>e&&0!==e&&(o.minDiff=e)),null!==u&&null!==i.dataPoints[t-1].y&&(n.axisY.logarithmic?(u=i.dataPointEOs[t].cumulativeSum/i.dataPointEOs[t-1].cumulativeSum,1>u&&(u=1/u),f.minDiff>u&&1!==u&&(f.minDiff=u)):(u=i.dataPointEOs[t].cumulativeSum-i.dataPointEOs[t-1].cumulativeSum,0>u&&(u*=-1),f.minDiff>u&&0!==u&&(f.minDiff=u)))),!(r<v)||c){if(!c&&(c=!0,0<t)){t-=2;continue}if(r>a&&!l)l=!0;else if(r>a&&l)continue;i.dataPoints[t].label&&(n.axisX.labels[r]=i.dataPoints[t].label);r<o.viewPortMin&&(o.viewPortMin=r);r>o.viewPortMax&&(o.viewPortMax=r);0<t&&(i.dataPointEOs[t-1].cumulativeSum<f.viewPortMin&&(f.viewPortMin=i.dataPointEOs[t-1].cumulativeSum),i.dataPointEOs[t-1].cumulativeSum>f.viewPortMax&&(f.viewPortMax=i.dataPointEOs[t-1].cumulativeSum));i.dataPointEOs[t].cumulativeSum<f.viewPortMin&&(f.viewPortMin=i.dataPointEOs[t].cumulativeSum);i.dataPointEOs[t].cumulativeSum>f.viewPortMax&&(f.viewPortMax=i.dataPointEOs[t].cumulativeSum)}i.axisX.valueType=i.xValueType=s?"dateTime":"number"}},i.prototype.calculateAutoBreaks=function(){function a(n,t,i,r){return r?(i=Math.pow(Math.min(i*n/t,t/n),.2),1>=i&&(i=Math.pow(1>n?1/n:Math.min(t/n,n),.25)),{startValue:n*i,endValue:t/i}):(i=.2*Math.min(i-t+n,t-n),0>=i&&(i=.25*Math.min(t-n,Math.abs(n))),{startValue:n+i,endValue:t-i})}function v(n){var h,c,e,y,o;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length)&&(h=n.axisX.scaleBreaks&&n.axisX.scaleBreaks.autoCalculate&&1<=n.axisX.scaleBreaks.maxNumberOfAutoBreaks,c=n.axisY.scaleBreaks&&n.axisY.scaleBreaks.autoCalculate&&1<=n.axisY.scaleBreaks.maxNumberOfAutoBreaks,h||c))for(var u=n.axisY.dataInfo,s=n.axisX.dataInfo,i,p=s.min,w=s.max,a=u.min,b=u.max,s=s._dataRanges,u=u._dataRanges,r,f=0,v=0;v<n.dataSeriesIndexes.length;v++)if(e=l.data[n.dataSeriesIndexes[v]],!(4>e.dataPoints.length))for(f=0;f<e.dataPoints.length;f++)if(h&&(r=(w+1-p)*Math.max(parseFloat(n.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,i=e.dataPoints[f].x.getTime?e.dataPoints[f].x.getTime():e.dataPoints[f].x,r=Math.floor((i-p)/r),i<s[r].min&&(s[r].min=i),i>s[r].max&&(s[r].max=i)),c)if(y=(b+1-a)*Math.max(parseFloat(n.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100,(i="waterfall"===n.type?e.dataPointEOs[f].cumulativeSum:e.dataPoints[f].y)&&i.length)for(o=0;o<i.length;o++)r=Math.floor((i[o]-a)/y),i[o]<u[r].min&&(u[r].min=i[o]),i[o]>u[r].max&&(u[r].max=i[o]);else t(i)||(r=Math.floor((i-a)/y),i<u[r].min&&(u[r].min=i),i>u[r].max&&(u[r].max=i))}function y(n){var u;if(n.dataSeriesIndexes&&!(1>n.dataSeriesIndexes.length)&&n.axisX.scaleBreaks&&n.axisX.scaleBreaks.autoCalculate&&1<=n.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var t=n.axisX.dataInfo,o=t.min,s=t.max,f=t._dataRanges,i,r=0,e=0;e<n.dataSeriesIndexes.length;e++)if(u=l.data[n.dataSeriesIndexes[e]],!(4>u.dataPoints.length))for(r=0;r<u.dataPoints.length;r++)i=(s+1-o)*Math.max(parseFloat(n.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,t=u.dataPoints[r].x.getTime?u.dataPoints[r].x.getTime():u.dataPoints[r].x,i=Math.floor((t-o)/i),t<f[i].min&&(f[i].min=t),t>f[i].max&&(f[i].max=t)}for(var r,s,c,e,f,h,o,i,l=this,u=!1,n=0;n<this._axes.length;n++)if(this._axes[n].scaleBreaks&&this._axes[n].scaleBreaks.autoCalculate&&1<=this._axes[n].scaleBreaks.maxNumberOfAutoBreaks)for(u=!0,this._axes[n].dataInfo._dataRanges=[],r=0;r<100/Math.max(parseFloat(this._axes[n].scaleBreaks.collapsibleThreshold)||10,10);r++)this._axes[n].dataInfo._dataRanges.push({min:Infinity,max:-Infinity});if(u){for(n=0;n<this.plotInfo.plotTypes.length;n++)for(u=this.plotInfo.plotTypes[n],r=0;r<u.plotUnits.length;r++)i=u.plotUnits[r],"line"===i.type||"stepLine"===i.type||"spline"===i.type||"column"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"bar"===i.type||"bubble"===i.type||"scatter"===i.type||"candlestick"===i.type||"ohlc"===i.type||"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"waterfall"===i.type||"error"===i.type||"boxAndWhisker"===i.type?v(i):0<=i.type.indexOf("stacked")&&y(i);for(n=0;n<this._axes.length;n++)if(this._axes[n].dataInfo._dataRanges){if(s=this._axes[n].dataInfo.min,i=(this._axes[n].dataInfo.max+1-s)*Math.max(parseFloat(this._axes[n].scaleBreaks.collapsibleThreshold)||10,10)/100,c=this._axes[n].dataInfo._dataRanges,u=[],this._axes[n].dataInfo.dataPointYPositiveSums){h=this._axes[n].dataInfo.dataPointYPositiveSums;e=c;for(r in h)!h.hasOwnProperty(r)||isNaN(r)||(f=h[r],t(f))||(o=Math.floor((f-s)/i),f<e[o].min&&(e[o].min=f),f>e[o].max&&(e[o].max=f));delete this._axes[n].dataInfo.dataPointYPositiveSums}if(this._axes[n].dataInfo.dataPointYNegativeSums){h=this._axes[n].dataInfo.dataPointYNegativeSums;e=c;for(r in h)h.hasOwnProperty(r)&&!isNaN(r)&&(f=-1*h[r],t(f)||(o=Math.floor((f-s)/i),f<e[o].min&&(e[o].min=f),f>e[o].max&&(e[o].max=f)));delete this._axes[n].dataInfo.dataPointYNegativeSums}for(r=0;r<c.length-1;r++)if(e=c[r].max,isFinite(e))for(;r<c.length-1;)if(s=c[r+1].min,isFinite(s)){f=s-e;f>i&&u.push({diff:f,start:e,end:s});break}else r++;if(this._axes[n].scaleBreaks.customBreaks)for(r=0;r<this._axes[n].scaleBreaks.customBreaks.length;r++)for(i=0;i<u.length;i++)(this._axes[n].scaleBreaks.customBreaks[r].startValue<=u[i].start&&u[i].start<=this._axes[n].scaleBreaks.customBreaks[r].endValue||this._axes[n].scaleBreaks.customBreaks[r].startValue<=u[i].start&&u[i].start<=this._axes[n].scaleBreaks.customBreaks[r].endValue||u[i].start<=this._axes[n].scaleBreaks.customBreaks[r].startValue&&this._axes[n].scaleBreaks.customBreaks[r].startValue<=u[i].end||u[i].start<=this._axes[n].scaleBreaks.customBreaks[r].endValue&&this._axes[n].scaleBreaks.customBreaks[r].endValue<=u[i].end)&&(u.splice(i,1),i--);for(u.sort(function(n,t){return t.diff-n.diff}),r=0;r<Math.min(u.length,this._axes[n].scaleBreaks.maxNumberOfAutoBreaks);r++)i=a(u[r].start,u[r].end,this._axes[n].logarithmic?this._axes[n].dataInfo.max/this._axes[n].dataInfo.min:this._axes[n].dataInfo.max-this._axes[n].dataInfo.min,this._axes[n].logarithmic),this._axes[n].scaleBreaks.autoBreaks.push(new k(this,"autoBreaks",i,r,++this._eventManager.lastObjectId,this._axes[n].scaleBreaks)),this._axes[n].scaleBreaks._appliedBreaks.push(this._axes[n].scaleBreaks.autoBreaks[this._axes[n].scaleBreaks.autoBreaks.length-1]);this._axes[n].scaleBreaks._appliedBreaks.sort(function(n,t){return n.startValue-t.startValue})}}},i.prototype.getDataPointAtXY=function(n,t,i){var r,u,f;for(i=i||!1,r=[],u=this._dataInRenderedOrder.length-1;0<=u;u--)f=null,(f=this._dataInRenderedOrder[u].getDataPointAtXY(n,t,i))&&r.push(f);for(n=null,t=!1,i=0;i<r.length;i++)if(("line"===r[i].dataSeries.type||"stepLine"===r[i].dataSeries.type||"area"===r[i].dataSeries.type||"stepArea"===r[i].dataSeries.type)&&(u=d("markerSize",r[i].dataPoint,r[i].dataSeries)||8,r[i].distance<=u/2)){t=!0;break}for(i=0;i<r.length;i++)t&&"line"!==r[i].dataSeries.type&&"stepLine"!==r[i].dataSeries.type&&"area"!==r[i].dataSeries.type&&"stepArea"!==r[i].dataSeries.type||(n?r[i].distance<=n.distance&&(n=r[i]):n=r[i]);return n},i.prototype.getObjectAtXY=function(t,i,r){var f=null,u;if(r=this.getDataPointAtXY(t,i,r||!1))f=r.dataSeries.dataPointIds[r.dataPointIndex];else if(n)f=yi(t,i,this._eventManager.ghostCtx);else for(r=0;r<this.legend.items.length;r++)u=this.legend.items[r],t>=u.x1&&t<=u.x2&&i>=u.y1&&i<=u.y2&&(f=u.id);return f},i.prototype.getAutoFontSize=ir,i.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},i.prototype.clearCanvas=tr,i.prototype.attachEvent=function(n){this._events.push(n)},i.prototype._touchEventHandler=function(n){var e,f,o;if(n.changedTouches&&this.interactivityEnabled){var e=[],i=n.changedTouches,r=i?i[0]:n,u=null;switch(n.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"];this._lastTouchData=ui(r);this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":o=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0;e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType||300>o?["mouseup","click"]:["mouseup"];break;default:return}if(!(i&&1<i.length)){u=ui(r);u.time=new Date;try{f=u.y-this._lastTouchData.y;o=u.time-this._lastTouchData.time;(1<Math.abs(f)&&this._lastTouchData.scroll||5<Math.abs(f)&&250>o)&&(this._lastTouchData.scroll=!0)}catch(s){}if(this._lastTouchEventType=n.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(i=0;i<e.length;i++)(u=e[i],f=document.createEvent("MouseEvent"),f.initMouseEvent(u,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(f),!t(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<o||"click"===u)&&(n.preventManipulation&&n.preventManipulation(),n.preventDefault&&n.preventDefault())}}},i.prototype._dispatchRangeEvent=function(n,i){var e={chart:this},r,u,f;for(e.type=n,e.trigger=i,r=[],this.axisX&&0<this.axisX.length&&r.push("axisX"),this.axisX2&&0<this.axisX2.length&&r.push("axisX2"),this.axisY&&0<this.axisY.length&&r.push("axisY"),this.axisY2&&0<this.axisY2.length&&r.push("axisY2"),u=0;u<r.length;u++)if(t(e[r[u]])&&(e[r[u]]=[]),"axisY"===r[u])for(f=0;f<this.axisY.length;f++)e[r[u]].push({viewportMinimum:this[r[u]][f].sessionVariables.newViewportMinimum,viewportMaximum:this[r[u]][f].sessionVariables.newViewportMaximum});else if("axisY2"===r[u])for(f=0;f<this.axisY2.length;f++)e[r[u]].push({viewportMinimum:this[r[u]][f].sessionVariables.newViewportMinimum,viewportMaximum:this[r[u]][f].sessionVariables.newViewportMaximum});else if("axisX"===r[u])for(f=0;f<this.axisX.length;f++)e[r[u]].push({viewportMinimum:this[r[u]][f].sessionVariables.newViewportMinimum,viewportMaximum:this[r[u]][f].sessionVariables.newViewportMaximum});else if("axisX2"===r[u])for(f=0;f<this.axisX2.length;f++)e[r[u]].push({viewportMinimum:this[r[u]][f].sessionVariables.newViewportMinimum,viewportMaximum:this[r[u]][f].sessionVariables.newViewportMaximum});this.dispatchEvent(n,e,this)},i.prototype._mouseEventHandler=function(t){var f,u,r,e,o;if("undefined"==typeof t.target&&t.srcElement&&(t.target=t.srcElement),f=ui(t),u=t.type,t.which?e=3==t.which:t.button&&(e=2==t.button),i.capturedEventParam&&(r=i.capturedEventParam,"mouseup"===u&&(i.capturedEventParam=null,r.chart.overlaidCanvas.releaseCapture?r.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",r.chart._mouseEventHandler,!1)),r.hasOwnProperty(u)&&("mouseup"!==u||r.chart.overlaidCanvas.releaseCapture?t.target!==r.chart.overlaidCanvas&&n||r[u].call(r.context,f.x,f.y):t.target!==r.chart.overlaidCanvas&&(r.chart.isDrag=!1))),this.interactivityEnabled)if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else if(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),ni&&window.console&&(window.console.log(u+" --> x: "+f.x+"; y:"+f.y),e&&window.console.log(t.which),"mouseup"===u&&window.console.log("mouseup")),!e){if(!i.capturedEventParam&&this._events){for(o=0;o<this._events.length;o++)if(this._events[o].hasOwnProperty(u))if(r=this._events[o],e=r.bounds,f.x>=e.x1&&f.x<=e.x2&&f.y>=e.y1&&f.y<=e.y2){r[u].call(r.context,f.x,f.y);"mousedown"===u&&!0===r.capture?(i.capturedEventParam=r,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===u&&(r.chart.overlaidCanvas.releaseCapture?r.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else r=null;t.target.style.cursor=r&&r.cursor?r.cursor:this._defaultCursor}u=this.plotArea;(f.x<u.x1||f.x>u.x2||f.y<u.y1||f.y>u.y2)&&(this.toolTip&&this.toolTip.enabled?this.toolTip.hide():this.resetOverlayedCanvas());this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}},i.prototype._plotAreaMouseDown=function(n,t){this.isDrag=!0;this.dragStartPoint={x:n,y:t}},i.prototype._plotAreaMouseUp=function(n,t){if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var i=t-this.dragStartPoint.y,e=n-this.dragStartPoint.x,f=0<=this.zoomType.indexOf("x"),u=0<=this.zoomType.indexOf("y"),r=!1;if(this.resetOverlayedCanvas(),"xySwapped"===this.plotInfo.axisPlacement)var o=u,u=f,f=o;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(f=u=0;f<this._axes.length;f++)i=this._axes[f],i.logarithmic?i.viewportMinimum<i.minimum?(u=i.minimum/i.viewportMinimum,i.sessionVariables.newViewportMinimum=i.viewportMinimum*u,i.sessionVariables.newViewportMaximum=i.viewportMaximum*u,r=!0):i.viewportMaximum>i.maximum&&(u=i.viewportMaximum/i.maximum,i.sessionVariables.newViewportMinimum=i.viewportMinimum/u,i.sessionVariables.newViewportMaximum=i.viewportMaximum/u,r=!0):i.viewportMinimum<i.minimum?(u=i.minimum-i.viewportMinimum,i.sessionVariables.newViewportMinimum=i.viewportMinimum+u,i.sessionVariables.newViewportMaximum=i.viewportMaximum+u,r=!0):i.viewportMaximum>i.maximum&&(u=i.viewportMaximum-i.maximum,i.sessionVariables.newViewportMinimum=i.viewportMinimum-u,i.sessionVariables.newViewportMaximum=i.viewportMaximum-u,r=!0);else if((!f||2<Math.abs(e))&&(!u||2<Math.abs(i))&&this.zoomEnabled){if(!this.dragStartPoint)return;i=f?this.dragStartPoint.x:this.plotArea.x1;e=u?this.dragStartPoint.y:this.plotArea.y1;f=f?n:this.plotArea.x2;u=u?t:this.plotArea.y2;2<Math.abs(i-f)&&2<Math.abs(e-u)&&this._zoomPanToSelectedRegion(i,e,f,u)&&(r=!0)}r&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),r&&this.zoomEnabled&&"none"===this._zoomButton.style.display&&(ri(this._zoomButton,this._resetButton),ft(this,this._zoomButton,"pan"),ft(this,this._resetButton,"reset")))}}if(this.isDrag=!1,"none"!==this.plotInfo.axisPlacement){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(r=0;r<this.axisX.length;r++)this.axisX[r].crosshair&&this.axisX[r].crosshair.enabled&&this.axisX[r].renderCrosshair(n,t);if(this.axisX2&&0<this.axisX2.length)for(r=0;r<this.axisX2.length;r++)this.axisX2[r].crosshair&&this.axisX2[r].crosshair.enabled&&this.axisX2[r].renderCrosshair(n,t);if(this.axisY&&0<this.axisY.length)for(r=0;r<this.axisY.length;r++)this.axisY[r].crosshair&&this.axisY[r].crosshair.enabled&&this.axisY[r].renderCrosshair(n,t);if(this.axisY2&&0<this.axisY2.length)for(r=0;r<this.axisY2.length;r++)this.axisY2[r].crosshair&&this.axisY2[r].crosshair.enabled&&this.axisY2[r].renderCrosshair(n,t)}},i.prototype._plotAreaMouseMove=function(n,t){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var r=0,e=0,i=r=null,i=0<=this.zoomType.indexOf("x"),u=0<=this.zoomType.indexOf("y"),f=this;if("xySwapped"===this.plotInfo.axisPlacement&&(r=u,u=i,i=r),r=this.dragStartPoint.x-n,e=this.dragStartPoint.y-t,2<Math.abs(r)&&8>Math.abs(r)&&(this.panEnabled||this.zoomEnabled)?this.toolTip.hide():this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(n,t),(!i||2<Math.abs(r)||!u||2<Math.abs(e))&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled)i={x1:i?this.plotArea.x1+r:this.plotArea.x1,y1:u?this.plotArea.y1+e:this.plotArea.y1,x2:i?this.plotArea.x2+r:this.plotArea.x2,y2:u?this.plotArea.y2+e:this.plotArea.y2},clearTimeout(f._panTimerId),f._panTimerId=setTimeout(function(i,r,u,e){return function(){f._zoomPanToSelectedRegion(i,r,u,e,!0)&&(f._dispatchRangeEvent("rangeChanging","pan"),f.render(),f._dispatchRangeEvent("rangeChanged","pan"),f.dragStartPoint.x=n,f.dragStartPoint.y=t)}}(i.x1,i.y1,i.x2,i.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas();r=this.overlaidCanvasCtx.globalAlpha;this.overlaidCanvasCtx.fillStyle="#A89896";var e=i?this.dragStartPoint.x:this.plotArea.x1,o=u?this.dragStartPoint.y:this.plotArea.y1,s=i?n-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,h=u?t-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(e,o,i?n:this.plotArea.x2-this.plotArea.x1,u?t:this.plotArea.y2-this.plotArea.y1,"xy"!==this.zoomType).isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5");this.overlaidCanvasCtx.globalAlpha=.7;this.overlaidCanvasCtx.fillRect(e,o,s,h);this.overlaidCanvasCtx.globalAlpha=r}}else if(this.toolTip.mouseMoveHandler(n,t),"none"!==this.plotInfo.axisPlacement){if(this.axisX&&0<this.axisX.length)for(i=0;i<this.axisX.length;i++)this.axisX[i].crosshair&&this.axisX[i].crosshair.enabled&&this.axisX[i].renderCrosshair(n,t);if(this.axisX2&&0<this.axisX2.length)for(i=0;i<this.axisX2.length;i++)this.axisX2[i].crosshair&&this.axisX2[i].crosshair.enabled&&this.axisX2[i].renderCrosshair(n,t);if(this.axisY&&0<this.axisY.length)for(i=0;i<this.axisY.length;i++)this.axisY[i].crosshair&&this.axisY[i].crosshair.enabled&&this.axisY[i].renderCrosshair(n,t);if(this.axisY2&&0<this.axisY2.length)for(i=0;i<this.axisY2.length;i++)this.axisY2[i].crosshair&&this.axisY2[i].crosshair.enabled&&this.axisY2[i].renderCrosshair(n,t)}},i.prototype._zoomPanToSelectedRegion=function(n,t,i,r,u){if(n=this.validateRegion(n,t,i,r,u),t=n.axesWithValidRange,i=n.axesRanges,n.isValid)for(r=0;r<t.length;r++)u=i[r],t[r].setViewPortRange(u.val1,u.val2),this.syncCharts&&this.syncCharts(u.val1,u.val2);return n.isValid},i.prototype.validateRegion=function(n,t,i,r,u){u=u||!1;for(var c=0<=this.zoomType.indexOf("x"),h=0<=this.zoomType.indexOf("y"),l=!1,v=[],a=[],y=[],f=0;f<this._axes.length;f++)("axisX"===this._axes[f].type&&c||"axisY"===this._axes[f].type&&h)&&a.push(this._axes[f]);for(h=0;h<a.length;h++){var f=a[h],c=!1,o=f.convertPixelToValue({x:n,y:t}),s=f.convertPixelToValue({x:i,y:r});if(o>s)var e=s,s=o,o=e;if(f.scaleBreaks)for(e=0;!c&&e<f.scaleBreaks._appliedBreaks.length;e++)c=f.scaleBreaks._appliedBreaks[e].startValue<=o&&f.scaleBreaks._appliedBreaks[e].endValue>=s;if(isFinite(f.dataInfo.minDiff))if(e=f.getApparentDifference(o,s,null,!0),c||!(this.panEnabled&&f.scaleBreaks&&f.scaleBreaks._appliedBreaks.length)&&(f.logarithmic&&e<Math.pow(f.dataInfo.minDiff,3)||!f.logarithmic&&e<3*Math.abs(f.dataInfo.minDiff))||o<f.minimum||s>f.maximum){if(!u){l=!1;break}}else v.push(f),y.push({val1:o,val2:s}),l=!0}return{isValid:l,axesWithValidRange:v,axesRanges:y}},i.prototype.preparePlotArea=function(){var t=this.plotArea,i,r;!n&&(0<t.x1||0<t.y1)&&t.ctx.translate(t.x1,t.y1);(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])?(i=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates,this.axisY&&0<this.axisY.length&&this.axisY[0]&&(r=this.axisY[0],t.x1=i.x1<i.x2?i.x1:r.lineCoordinates.x1,t.y1=i.y1<r.lineCoordinates.y1?i.y1:r.lineCoordinates.y1,t.x2=i.x2>r.lineCoordinates.x2?i.x2:r.lineCoordinates.x2,t.y2=i.y2>i.y1?i.y2:r.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1),this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(r=this.axisY2[0],t.x1=i.x1<i.x2?i.x1:r.lineCoordinates.x1,t.y1=i.y1<r.lineCoordinates.y1?i.y1:r.lineCoordinates.y1,t.x2=i.x2>r.lineCoordinates.x2?i.x2:r.lineCoordinates.x2,t.y2=i.y2>i.y1?i.y2:r.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1)):(i=this.layoutManager.getFreeSpace(),t.x1=i.x1,t.x2=i.x2,t.y1=i.y1,t.y2=i.y2,t.width=i.width,t.height=i.height);n||(t.canvas.width=t.width,t.canvas.height=t.height,t.canvas.style.left=t.x1+"px",t.canvas.style.top=t.y1+"px",(0<t.x1||0<t.y1)&&t.ctx.translate(-t.x1,-t.y1));t.layoutManager=new pt(t.x1,t.y1,t.x2,t.y2,2)},i.prototype.renderIndexLabels=function(i){var b=i||this.plotArea.ctx,o=this.plotArea,l=0,a=0,k=0,c=0,w=l=c=a=k=0,s=0,et;for(i=0;i<this._indexLabels.length;i++){var r=this._indexLabels[i],e=r.chartType.toLowerCase(),v,h,w=d("indexLabelFontColor",r.dataPoint,r.dataSeries),s=d("indexLabelFontSize",r.dataPoint,r.dataSeries);v=d("indexLabelFontFamily",r.dataPoint,r.dataSeries);h=d("indexLabelFontStyle",r.dataPoint,r.dataSeries);var c=d("indexLabelFontWeight",r.dataPoint,r.dataSeries),g=d("indexLabelBackgroundColor",r.dataPoint,r.dataSeries),a=d("indexLabelMaxWidth",r.dataPoint,r.dataSeries),k=d("indexLabelWrap",r.dataPoint,r.dataSeries),st=d("indexLabelLineDashType",r.dataPoint,r.dataSeries),ot=d("indexLabelLineColor",r.dataPoint,r.dataSeries),ft=t(r.dataPoint.indexLabelLineThickness)?t(r.dataSeries.options.indexLabelLineThickness)?0:r.dataSeries.options.indexLabelLineThickness:r.dataPoint.indexLabelLineThickness,l=0<ft?Math.min(10,("normal"===this.plotInfo.axisPlacement?this.plotArea.height:this.plotArea.width)<<0):0,p={percent:null,total:null},tt=null;if((0<=r.dataSeries.type.indexOf("stacked")||"pie"===r.dataSeries.type||"doughnut"===r.dataSeries.type)&&(p=this.getPercentAndTotal(r.dataSeries,r.dataPoint)),(r.dataSeries.indexLabelFormatter||r.dataPoint.indexLabelFormatter)&&(tt={chart:this,dataSeries:r.dataSeries,dataPoint:r.dataPoint,index:r.indexKeyword,total:p.total,percent:p.percent}),et=r.dataPoint.indexLabelFormatter?r.dataPoint.indexLabelFormatter(tt):r.dataPoint.indexLabel?this.replaceKeywordsWithValue(r.dataPoint.indexLabel,r.dataPoint,r.dataSeries,null,r.indexKeyword):r.dataSeries.indexLabelFormatter?r.dataSeries.indexLabelFormatter(tt):r.dataSeries.indexLabel?this.replaceKeywordsWithValue(r.dataSeries.indexLabel,r.dataPoint,r.dataSeries,null,r.indexKeyword):null,null!==et&&""!==et){var p=d("indexLabelPlacement",r.dataPoint,r.dataSeries),tt=d("indexLabelOrientation",r.dataPoint,r.dataSeries),it=r.direction,nt=r.dataSeries.axisX,rt=r.dataSeries.axisY,ut=!1,g=new y(b,{x:0,y:0,maxWidth:a?a:.5*this.width,maxHeight:k?5*s:1.5*s,angle:"horizontal"===tt?0:-90,text:et,padding:0,backgroundColor:g,horizontalAlign:"left",fontSize:s,fontFamily:v,fontWeight:c,fontColor:w,fontStyle:h,textBaseline:"top"});if(g.measureText(),r.dataSeries.indexLabelMaxWidth=g.maxWidth,"stackedarea100"===e){if(r.point.x<o.x1||r.point.x>o.x2||r.point.y<o.y1-1||r.point.y>o.y2+1)continue}else if("rangearea"===e||"rangesplinearea"===e){if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum||Math.max.apply(null,r.dataPoint.y)<rt.viewportMinimum||Math.min.apply(null,r.dataPoint.y)>rt.viewportMaximum)continue}else if(0<=e.indexOf("line")||0<=e.indexOf("area")||0<=e.indexOf("bubble")||0<=e.indexOf("scatter")){if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum||r.dataPoint.y<rt.viewportMinimum||r.dataPoint.y>rt.viewportMaximum)continue}else if(0<=e.indexOf("column")||"waterfall"===e||"error"===e&&!r.axisSwapped){if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum||r.bounds.y1>o.y2||r.bounds.y2<o.y1)continue}else if(0<=e.indexOf("bar")||"error"===e){if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum||r.bounds.x1>o.x2||r.bounds.x2<o.x1)continue}else if("candlestick"===e||"ohlc"===e){if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum||Math.max.apply(null,r.dataPoint.y)<rt.viewportMinimum||Math.min.apply(null,r.dataPoint.y)>rt.viewportMaximum)continue}else if(r.dataPoint.x<nt.viewportMinimum||r.dataPoint.x>nt.viewportMaximum)continue;a=c=2;"horizontal"===tt?(w=g.width,s=g.height):(s=g.width,w=g.height);"normal"===this.plotInfo.axisPlacement?(0<=e.indexOf("line")||0<=e.indexOf("area")?(p="auto",c=4):0<=e.indexOf("stacked")?"auto"===p&&(p="inside"):("bubble"===e||"scatter"===e)&&(p="inside"),v=r.point.x-w/2,"inside"!==p?(a=o.y1,k=o.y2,0<it?(h=r.point.y-s-c-l,h<a&&(h="auto"===p?Math.max(r.point.y,a)+c+l:a+c+l,ut=h+s>r.point.y)):(h=r.point.y+c+l,h>k-s-c-l&&(h="auto"===p?Math.min(r.point.y,k)-s-c-l:k-s-c-l,ut=h<r.point.y))):(a=Math.max(r.bounds.y1,o.y1),k=Math.min(r.bounds.y2,o.y2),l=0<=e.indexOf("range")||"error"===e?0<it?Math.max(r.bounds.y1,o.y1)+s/2+c:Math.min(r.bounds.y2,o.y2)-s/2-c:(Math.max(r.bounds.y1,o.y1)+Math.min(r.bounds.y2,o.y2))/2,0<it?(h=Math.max(r.point.y,l)-s/2,h<a&&("bubble"===e||"scatter"===e)&&(h=Math.max(r.point.y-s-c,o.y1+c))):(h=Math.min(r.point.y,l)-s/2,h>k-s-c&&("bubble"===e||"scatter"===e)&&(h=Math.min(r.point.y+c,o.y2-s-c))),h=Math.min(h,k-s))):(0<=e.indexOf("line")||0<=e.indexOf("area")||0<=e.indexOf("scatter")?(p="auto",a=4):0<=e.indexOf("stacked")?"auto"===p&&(p="inside"):"bubble"===e&&(p="inside"),h=r.point.y-s/2,"inside"!==p?(c=o.x1,k=o.x2,0>it?(v=r.point.x-w-a-l,v<c&&(v="auto"===p?Math.max(r.point.x,c)+a+l:c+a+l,ut=v+w>r.point.x)):(v=r.point.x+a+l,v>k-w-a-l&&(v="auto"===p?Math.min(r.point.x,k)-w-a-l:k-w-a-l,ut=v<r.point.x))):(c=Math.max(r.bounds.x1,o.x1),Math.min(r.bounds.x2,o.x2),l=0<=e.indexOf("range")||"error"===e?0>it?Math.max(r.bounds.x1,o.x1)+w/2+a:Math.min(r.bounds.x2,o.x2)-w/2-a:(Math.max(r.bounds.x1,o.x1)+Math.min(r.bounds.x2,o.x2))/2,v=0>it?Math.max(r.point.x,l)-w/2:Math.min(r.point.x,l)-w/2,v=Math.max(v,c)));"vertical"===tt&&(h+=s);g.x=v;g.y=h;g.render(!0);ft&&"inside"!==p&&(0>e.indexOf("bar")&&("error"!==e||!r.axisSwapped)&&r.point.x>o.x1&&r.point.x<o.x2||!ut)&&(0>e.indexOf("column")&&("error"!==e||r.axisSwapped)&&r.point.y>o.y1&&r.point.y<o.y2||!ut)&&(b.lineWidth=ft,b.strokeStyle=ot?ot:"gray",b.setLineDash&&b.setLineDash(u(st,ft)),b.beginPath(),b.moveTo(r.point.x,r.point.y),0<=e.indexOf("bar")||"error"===e&&r.axisSwapped?b.lineTo(v+(0<r.direction?0:w),h+("horizontal"===tt?s:-s)/2):0<=e.indexOf("column")||"error"===e&&!r.axisSwapped?b.lineTo(v+w/2,h+((0<r.direction?s:-s)+("horizontal"===tt?s:-s))/2):b.lineTo(v+w/2,h+((h<r.point.y?s:-s)+("horizontal"===tt?s:-s))/2),b.stroke())}}for(b={source:b,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0,startTimePercent:.7},i=0;i<this._indexLabels.length;i++)r=this._indexLabels[i],g=d("indexLabelBackgroundColor",r.dataPoint,r.dataSeries),r.dataSeries.indexLabelBackgroundColor=t(g)?n?"transparent":null:g;return b},i.prototype.renderLine=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:rt,a,y,g,ut,nt,tt,r,s,p,v,it,k,h,c,b,o,w,d;if(!(0>=t.dataSeriesIndexes.length)){for(a=this._eventManager.ghostCtx,i.save(),y=this.plotArea,i.beginPath(),i.rect(y.x1,y.y1,y.width,y.height),i.clip(),g=[],nt=0;nt<t.dataSeriesIndexes.length;nt++){if(tt=t.dataSeriesIndexes[nt],r=this.data[tt],i.lineWidth=r.lineThickness,s=r.dataPoints,p="solid",i.setLineDash){var et=u(r.nullDataLineDashType,r.lineThickness),p=r.lineDashType,ft=u(p,r.lineThickness);i.setLineDash(ft)}if(v=r.id,this._eventManager.objectMap[v]={objectType:"dataSeries",dataSeriesIndex:tt},v=e(v),a.strokeStyle=v,a.lineWidth=0<r.lineThickness?Math.max(r.lineThickness,4):0,v=r._colorSet,it=v=r.lineColor=r.options.lineColor?r.options.lineColor:v[0],i.strokeStyle=v,k=!0,o=0,i.beginPath(),0<s.length){for(b=!1,o=0;o<s.length;o++)(h=s[o].x.getTime?s[o].x.getTime():s[o].x,h<t.axisX.dataInfo.viewPortMin||h>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!b))||("number"!=typeof s[o].y?(0<o&&!(r.connectNullData||b||k)&&(i.stroke(),n&&a.stroke()),b=!0):(h=t.axisX.convertValueToPixel(h),c=t.axisY.convertValueToPixel(s[o].y),w=r.dataPointIds[o],this._eventManager.objectMap[w]={id:w,objectType:"dataPoint",dataSeriesIndex:tt,dataPointIndex:o,x1:h,y1:c},k||b?(!k&&r.connectNullData?(i.setLineDash&&(r.options.nullDataLineDashType||p===r.lineDashType&&r.lineDashType!==r.nullDataLineDashType)&&(i.stroke(),i.beginPath(),i.moveTo(ut.x,ut.y),p=r.nullDataLineDashType,i.setLineDash(et)),i.lineTo(h,c),n&&a.lineTo(h,c)):(i.beginPath(),i.moveTo(h,c),n&&(a.beginPath(),a.moveTo(h,c))),b=k=!1):(i.lineTo(h,c),n&&a.lineTo(h,c),0==o%500&&(i.stroke(),i.beginPath(),i.moveTo(h,c),n&&(a.stroke(),a.beginPath(),a.moveTo(h,c)))),ut={x:h,y:c},o<s.length-1&&(it!==(s[o].lineColor||v)||p!==(s[o].lineDashType||r.lineDashType))&&(i.stroke(),i.beginPath(),i.moveTo(h,c),it=s[o].lineColor||v,i.strokeStyle=it,i.setLineDash&&(s[o].lineDashType?(p=s[o].lineDashType,i.setLineDash(u(p,r.lineThickness))):(p=r.lineDashType,i.setLineDash(ft)))),(0<s[o].markerSize||0<r.markerSize)&&(d=r.getMarkerProperties(o,h,c,i),g.push(d),w=e(w),n&&g.push({x:h,y:c,ctx:a,type:d.type,size:d.size,color:w,borderColor:w,borderThickness:d.borderThickness})),(s[o].indexLabel||r.indexLabel||s[o].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:s[o],dataSeries:r,point:{x:h,y:c},direction:0>s[o].y===t.axisY.reversed?1:-1,color:v})));i.stroke();n&&a.stroke()}}return l.drawMarkers(g),n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(y.x1,y.y1,y.width,y.height),a.beginPath()),i.restore(),i.beginPath(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderStepLine=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:rt,c,p,g,ut,nt,tt,r,h,w,v,it,d,s,a,k,o,y,b;if(!(0>=t.dataSeriesIndexes.length)){for(c=this._eventManager.ghostCtx,i.save(),p=this.plotArea,i.beginPath(),i.rect(p.x1,p.y1,p.width,p.height),i.clip(),g=[],nt=0;nt<t.dataSeriesIndexes.length;nt++){if(tt=t.dataSeriesIndexes[nt],r=this.data[tt],i.lineWidth=r.lineThickness,h=r.dataPoints,w="solid",i.setLineDash){var et=u(r.nullDataLineDashType,r.lineThickness),w=r.lineDashType,ft=u(w,r.lineThickness);i.setLineDash(ft)}if(v=r.id,this._eventManager.objectMap[v]={objectType:"dataSeries",dataSeriesIndex:tt},v=e(v),c.strokeStyle=v,c.lineWidth=0<r.lineThickness?Math.max(r.lineThickness,4):0,v=r._colorSet,it=v=r.lineColor=r.options.lineColor?r.options.lineColor:v[0],i.strokeStyle=v,d=!0,o=0,i.beginPath(),0<h.length){for(k=!1,o=0;o<h.length;o++)(s=h[o].getTime?h[o].x.getTime():h[o].x,s<t.axisX.dataInfo.viewPortMin||s>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!k))||("number"!=typeof h[o].y?(0<o&&!(r.connectNullData||k||d)&&(i.stroke(),n&&c.stroke()),k=!0):(y=a,s=t.axisX.convertValueToPixel(s),a=t.axisY.convertValueToPixel(h[o].y),b=r.dataPointIds[o],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:tt,dataPointIndex:o,x1:s,y1:a},d||k?(!d&&r.connectNullData?(i.setLineDash&&(r.options.nullDataLineDashType||w===r.lineDashType&&r.lineDashType!==r.nullDataLineDashType)&&(i.stroke(),i.beginPath(),i.moveTo(ut.x,ut.y),w=r.nullDataLineDashType,i.setLineDash(et)),i.lineTo(s,y),i.lineTo(s,a),n&&(c.lineTo(s,y),c.lineTo(s,a))):(i.beginPath(),i.moveTo(s,a),n&&(c.beginPath(),c.moveTo(s,a))),k=d=!1):(i.lineTo(s,y),n&&c.lineTo(s,y),i.lineTo(s,a),n&&c.lineTo(s,a),0==o%500&&(i.stroke(),i.beginPath(),i.moveTo(s,a),n&&(c.stroke(),c.beginPath(),c.moveTo(s,a)))),ut={x:s,y:a},o<h.length-1&&(it!==(h[o].lineColor||v)||w!==(h[o].lineDashType||r.lineDashType))&&(i.stroke(),i.beginPath(),i.moveTo(s,a),it=h[o].lineColor||v,i.strokeStyle=it,i.setLineDash&&(h[o].lineDashType?(w=h[o].lineDashType,i.setLineDash(u(w,r.lineThickness))):(w=r.lineDashType,i.setLineDash(ft)))),(0<h[o].markerSize||0<r.markerSize)&&(y=r.getMarkerProperties(o,s,a,i),g.push(y),b=e(b),n&&g.push({x:s,y:a,ctx:c,type:y.type,size:y.size,color:b,borderColor:b,borderThickness:y.borderThickness})),(h[o].indexLabel||r.indexLabel||h[o].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:h[o],dataSeries:r,point:{x:s,y:a},direction:0>h[o].y===t.axisY.reversed?1:-1,color:v})));i.stroke();n&&c.stroke()}}return l.drawMarkers(g),n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(p.x1,p.y1,p.width,p.height),c.beginPath()),i.restore(),i.beginPath(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderSpline=function(t){function rt(t){if(t=ot(t,2),0<t.length){i.beginPath();n&&c.beginPath();i.moveTo(t[0].x,t[0].y);t[0].newStrokeStyle&&(i.strokeStyle=t[0].newStrokeStyle);t[0].newLineDashArray&&i.setLineDash(t[0].newLineDashArray);n&&c.moveTo(t[0].x,t[0].y);for(var r=0;r<t.length-3;r+=3)(i.bezierCurveTo(t[r+1].x,t[r+1].y,t[r+2].x,t[r+2].y,t[r+3].x,t[r+3].y),n&&c.bezierCurveTo(t[r+1].x,t[r+1].y,t[r+2].x,t[r+2].y,t[r+3].x,t[r+3].y),0<r&&0==r%3e3||t[r+3].newStrokeStyle||t[r+3].newLineDashArray)&&(i.stroke(),i.beginPath(),i.moveTo(t[r+3].x,t[r+3].y),t[r+3].newStrokeStyle&&(i.strokeStyle=t[r+3].newStrokeStyle),t[r+3].newLineDashArray&&i.setLineDash(t[r+3].newLineDashArray),n&&(c.stroke(),c.beginPath(),c.moveTo(t[r+3].x,t[r+3].y)));i.stroke();n&&c.stroke()}}var it=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:it,c,p,d,g,nt,r,s,w,a,tt,o,y,v,h,b,k;if(!(0>=t.dataSeriesIndexes.length)){for(c=this._eventManager.ghostCtx,i.save(),p=this.plotArea,i.beginPath(),i.rect(p.x1,p.y1,p.width,p.height),i.clip(),d=[],g=0;g<t.dataSeriesIndexes.length;g++){if(nt=t.dataSeriesIndexes[g],r=this.data[nt],i.lineWidth=r.lineThickness,s=r.dataPoints,w="solid",i.setLineDash){var ft=u(r.nullDataLineDashType,r.lineThickness),w=r.lineDashType,ut=u(w,r.lineThickness);i.setLineDash(ut)}if(a=r.id,this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:nt},a=e(a),c.strokeStyle=a,c.lineWidth=0<r.lineThickness?Math.max(r.lineThickness,4):0,a=r._colorSet,tt=a=r.lineColor=r.options.lineColor?r.options.lineColor:a[0],i.strokeStyle=a,o=0,h=[],i.beginPath(),0<s.length)for(v=!1,o=0;o<s.length;o++)(y=s[o].getTime?s[o].x.getTime():s[o].x,y<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!v))||("number"!=typeof s[o].y?(0<o&&!v&&(r.connectNullData?i.setLineDash&&0<h.length&&(r.options.nullDataLineDashType||!s[o-1].lineDashType)&&(h[h.length-1].newLineDashArray=ft,w=r.nullDataLineDashType):(rt(h),h=[])),v=!0):(y=t.axisX.convertValueToPixel(y),v=t.axisY.convertValueToPixel(s[o].y),b=r.dataPointIds[o],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:nt,dataPointIndex:o,x1:y,y1:v},h[h.length]={x:y,y:v},o<s.length-1&&(tt!==(s[o].lineColor||a)||w!==(s[o].lineDashType||r.lineDashType))&&(tt=s[o].lineColor||a,h[h.length-1].newStrokeStyle=tt,i.setLineDash&&(s[o].lineDashType?(w=s[o].lineDashType,h[h.length-1].newLineDashArray=u(w,r.lineThickness)):(w=r.lineDashType,h[h.length-1].newLineDashArray=ut))),(0<s[o].markerSize||0<r.markerSize)&&(k=r.getMarkerProperties(o,y,v,i),d.push(k),b=e(b),n&&d.push({x:y,y:v,ctx:c,type:k.type,size:k.size,color:b,borderColor:b,borderThickness:k.borderThickness})),(s[o].indexLabel||r.indexLabel||s[o].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:s[o],dataSeries:r,point:{x:y,y:v},direction:0>s[o].y===t.axisY.reversed?1:-1,color:a}),v=!1));rt(h)}return l.drawMarkers(d),n&&(it.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(p.x1,p.y1,p.width,p.height),c.beginPath()),i.restore(),i.beginPath(),{source:it,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderColumn=function(t){var d=t.targetCanvasCtx||this.plotArea.ctx,y=n?this._preRenderCtx:d,g,i,w,v;if(!(0>=t.dataSeriesIndexes.length)){var l=null,o=this.plotArea,i=0,s,h,k,b=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),i=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/t.plotType.totalDataSeries))<<0,u=t.axisX.dataInfo.minDiff;for(isFinite(u)||(u=.3*Math.abs(t.axisX.range)),u=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:.9*(o.width*(t.axisX.logarithmic?Math.log(u)/Math.log(t.axisX.range):Math.abs(u)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&i>c&&(i=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<i&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,i)),u<i&&(u=i),u>c&&(u=c),y.save(),n&&this._eventManager.ghostCtx.save(),y.beginPath(),y.rect(o.x1,o.y1,o.width,o.height),y.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var nt=t.dataSeriesIndexes[c],p=this.data[nt],r=p.dataPoints;if(0<r.length)for(g=5<u&&p.bevelEnabled?!0:!1,i=0;i<r.length;i++)(k=r[i].getTime?r[i].x.getTime():r[i].x,k<t.axisX.dataInfo.viewPortMin||k>t.axisX.dataInfo.viewPortMax||"number"!=typeof r[i].y)||(s=t.axisX.convertValueToPixel(k),h=t.axisY.convertValueToPixel(r[i].y),s=t.axisX.reversed?s+t.plotType.totalDataSeries*u/2-(t.previousDataSeriesCount+c)*u<<0:s-t.plotType.totalDataSeries*u/2+(t.previousDataSeriesCount+c)*u<<0,w=t.axisX.reversed?s-u<<0:s+u<<0,0<=r[i].y?v=b:(v=h,h=b),h>v&&(l=h,h=v,v=l),l=r[i].color?r[i].color:p._colorSet[i%p._colorSet.length],a(y,s,h,w,v,l,0,null,g&&0<=r[i].y,0>r[i].y&&g,!1,!1,p.fillOpacity),l=p.dataPointIds[i],this._eventManager.objectMap[l]={id:l,objectType:"dataPoint",dataSeriesIndex:nt,dataPointIndex:i,x1:s,y1:h,x2:w,y2:v},l=e(l),n&&a(this._eventManager.ghostCtx,s,h,w,v,l,0,null,!1,!1,!1,!1),(r[i].indexLabel||p.indexLabel||r[i].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:r[i],dataSeries:p,point:{x:s+(w-s)/2,y:0>r[i].y===t.axisY.reversed?h:v},direction:0>r[i].y===t.axisY.reversed?1:-1,bounds:{x1:s,y1:Math.min(h,v),x2:w,y2:Math.max(h,v)},color:l}))}return n&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),y.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&y.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&y.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),y.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),y.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:f.yScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:b<t.axisY.bounds.y1?t.axisY.bounds.y1:b>t.axisY.bounds.y2?t.axisY.bounds.y2:b}}},i.prototype.renderStackedColumn=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,l=n?this._preRenderCtx:rt,s,it,ut,d,nt,c,p;if(!(0>=t.dataSeriesIndexes.length)){var i=null,h=this.plotArea,b=[],k=[],g=[],tt=[],r=0,v,o,w=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,s=t.axisX.dataInfo.minDiff,isFinite(s)||(s=.3*Math.abs(t.axisX.range)),s=this.options.dataPointWidth?this.dataPointWidth:.9*(h.width*(t.axisX.logarithmic?Math.log(s)/Math.log(t.axisX.range):Math.abs(s)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&r>v&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<r&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),s<r&&(s=r),s>v&&(s=v),l.save(),n&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(h.x1,h.y1,h.width,h.height),l.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.clip()),it=0;it<t.dataSeriesIndexes.length;it++){var ft=t.dataSeriesIndexes[it],y=this.data[ft],u=y.dataPoints;if(0<u.length)for(ut=5<s&&y.bevelEnabled?!0:!1,l.strokeStyle="#4572A7 ",r=0;r<u.length;r++)(i=u[r].x.getTime?u[r].x.getTime():u[r].x,i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax||"number"!=typeof u[r].y)||(v=t.axisX.convertValueToPixel(i),d=v-t.plotType.plotUnits.length*s/2+t.index*s<<0,nt=d+s<<0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<u[r].y?(g[i]=u[r].y+(g[i]?g[i]:0),0<g[i]&&(o=t.axisY.convertValueToPixel(g[i]),c="undefined"!=typeof b[i]?b[i]:w,b[i]=o)):t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=u[r].y?(tt[i]=u[r].y+(tt[i]?tt[i]:0),c=t.axisY.convertValueToPixel(tt[i]),o="undefined"!=typeof k[i]?k[i]:w,k[i]=c):(o=t.axisY.convertValueToPixel(u[r].y),0<=u[r].y)?(p="undefined"!=typeof b[i]?b[i]:0,o-=p,c=w-p,b[i]=p+(c-o)):(p=k[i]?k[i]:0,c=o+p,o=w+p,k[i]=p+(c-o)),i=u[r].color?u[r].color:y._colorSet[r%y._colorSet.length],a(l,d,o,nt,c,i,0,null,ut&&0<=u[r].y,0>u[r].y&&ut,!1,!1,y.fillOpacity),i=y.dataPointIds[r],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:ft,dataPointIndex:r,x1:d,y1:o,x2:nt,y2:c},i=e(i),n&&a(this._eventManager.ghostCtx,d,o,nt,c,i,0,null,!1,!1,!1,!1),(u[r].indexLabel||y.indexLabel||u[r].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:u[r],dataSeries:y,point:{x:v,y:0<=u[r].y?o:c},direction:0>u[r].y===t.axisY.reversed?1:-1,bounds:{x1:d,y1:Math.min(o,c),x2:nt,y2:Math.max(o,c)},color:i}))}return n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&l.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&l.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.yScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:w<t.axisY.bounds.y1?t.axisY.bounds.y1:w>t.axisY.bounds.y2?t.axisY.bounds.y2:w}}},i.prototype.renderStackedColumn100=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,l=n?this._preRenderCtx:rt,c,d,ut,r,g,tt,h,p;if(!(0>=t.dataSeriesIndexes.length)){var i=null,s=this.plotArea,b=[],k=[],nt=[],it=[],r=0,v,u,w=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,c=t.axisX.dataInfo.minDiff,isFinite(c)||(c=.3*Math.abs(t.axisX.range)),c=this.options.dataPointWidth?this.dataPointWidth:.9*(s.width*(t.axisX.logarithmic?Math.log(c)/Math.log(t.axisX.range):Math.abs(c)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&r>v&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<r&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),c<r&&(c=r),c>v&&(c=v),l.save(),n&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(s.x1,s.y1,s.width,s.height),l.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip()),d=0;d<t.dataSeriesIndexes.length;d++){var ft=t.dataSeriesIndexes[d],y=this.data[ft],o=y.dataPoints;if(0<o.length)for(ut=5<c&&y.bevelEnabled?!0:!1,r=0;r<o.length;r++)if(i=o[r].x.getTime?o[r].x.getTime():o[r].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof o[r].y){if(v=t.axisX.convertValueToPixel(i),u=0!==t.dataPointYSums[i]?100*(o[r].y/t.dataPointYSums[i]):0,g=v-t.plotType.plotUnits.length*c/2+t.index*c<<0,tt=g+c<<0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<o[r].y){if(nt[i]=u+("undefined"!=typeof nt[i]?nt[i]:0),0>=nt[i])continue;u=t.axisY.convertValueToPixel(nt[i]);h=b[i]?b[i]:w;b[i]=u}else t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=o[r].y?(it[i]=u+("undefined"!=typeof it[i]?it[i]:0),h=t.axisY.convertValueToPixel(it[i]),u=k[i]?k[i]:w,k[i]=h):(u=t.axisY.convertValueToPixel(u),0<=o[r].y)?(p="undefined"!=typeof b[i]?b[i]:0,u-=p,h=w-p,t.dataSeriesIndexes.length-1===d&&1>=Math.abs(s.y1-u)&&(u=s.y1),b[i]=p+(h-u)):(p="undefined"!=typeof k[i]?k[i]:0,h=u+p,u=w+p,t.dataSeriesIndexes.length-1===d&&1>=Math.abs(s.y2-h)&&(h=s.y2),k[i]=p+(h-u));i=o[r].color?o[r].color:y._colorSet[r%y._colorSet.length];a(l,g,u,tt,h,i,0,null,ut&&0<=o[r].y,0>o[r].y&&ut,!1,!1,y.fillOpacity);i=y.dataPointIds[r];this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:ft,dataPointIndex:r,x1:g,y1:u,x2:tt,y2:h};i=e(i);n&&a(this._eventManager.ghostCtx,g,u,tt,h,i,0,null,!1,!1,!1,!1);(o[r].indexLabel||y.indexLabel||o[r].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:o[r],dataSeries:y,point:{x:v,y:0<=o[r].y?u:h},direction:0>o[r].y===t.axisY.reversed?1:-1,bounds:{x1:g,y1:Math.min(u,h),x2:tt,y2:Math.max(u,h)},color:i})}}return n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&l.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&l.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.yScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:w<t.axisY.bounds.y1?t.axisY.bounds.y1:w>t.axisY.bounds.y2?t.axisY.bounds.y2:w}}},i.prototype.renderBar=function(t){var d=t.targetCanvasCtx||this.plotArea.ctx,c=n?this._preRenderCtx:d,nt,w,p;if(!(0>=t.dataSeriesIndexes.length)){var l=null,o=this.plotArea,i=0,v,s,k,b=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),i=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,h=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/t.plotType.totalDataSeries))<<0,r=t.axisX.dataInfo.minDiff;for(isFinite(r)||(r=.3*Math.abs(t.axisX.range)),r=this.options.dataPointWidth?this.dataPointWidth:.9*(o.height*(t.axisX.logarithmic?Math.log(r)/Math.log(t.axisX.range):Math.abs(r)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&i>h&&(i=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&h<i&&(h=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,i)),r<i&&(r=i),r>h&&(r=h),c.save(),n&&this._eventManager.ghostCtx.save(),c.beginPath(),c.rect(o.x1,o.y1,o.width,o.height),c.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),h=0;h<t.dataSeriesIndexes.length;h++){var g=t.dataSeriesIndexes[h],y=this.data[g],u=y.dataPoints;if(0<u.length)for(nt=5<r&&y.bevelEnabled?!0:!1,c.strokeStyle="#4572A7 ",i=0;i<u.length;i++)(k=u[i].getTime?u[i].x.getTime():u[i].x,k<t.axisX.dataInfo.viewPortMin||k>t.axisX.dataInfo.viewPortMax||"number"!=typeof u[i].y)||(s=t.axisX.convertValueToPixel(k),v=t.axisY.convertValueToPixel(u[i].y),s=t.axisX.reversed?s+t.plotType.totalDataSeries*r/2-(t.previousDataSeriesCount+h)*r<<0:s-t.plotType.totalDataSeries*r/2+(t.previousDataSeriesCount+h)*r<<0,w=t.axisX.reversed?s-r<<0:s+r<<0,0<=u[i].y?p=b:(p=v,v=b),l=u[i].color?u[i].color:y._colorSet[i%y._colorSet.length],a(c,p,s,v,w,l,0,null,nt,!1,!1,!1,y.fillOpacity),l=y.dataPointIds[i],this._eventManager.objectMap[l]={id:l,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:i,x1:p,y1:s,x2:v,y2:w},l=e(l),n&&a(this._eventManager.ghostCtx,p,s,v,w,l,0,null,!1,!1,!1,!1),(u[i].indexLabel||y.indexLabel||u[i].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:u[i],dataSeries:y,point:{x:0<=u[i].y?v:p,y:s+(w-s)/2},direction:0>u[i].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(p,v),y1:s,x2:Math.max(p,v),y2:w},color:l}))}return n&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),c.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&c.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&c.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),c.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),c.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:f.xScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:b<t.axisY.bounds.x1?t.axisY.bounds.x1:b>t.axisY.bounds.x2?t.axisY.bounds.x2:b}}},i.prototype.renderStackedBar=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,l=n?this._preRenderCtx:rt,s,it,ft,d,nt,c,p;if(!(0>=t.dataSeriesIndexes.length)){var i=null,h=this.plotArea,b=[],k=[],g=[],tt=[],r=0,o,v,w=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,s=t.axisX.dataInfo.minDiff,isFinite(s)||(s=.3*Math.abs(t.axisX.range)),s=this.options.dataPointWidth?this.dataPointWidth:.9*(h.height*(t.axisX.logarithmic?Math.log(s)/Math.log(t.axisX.range):Math.abs(s)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&r>v&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<r&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),s<r&&(s=r),s>v&&(s=v),l.save(),n&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(h.x1,h.y1,h.width,h.height),l.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.clip()),it=0;it<t.dataSeriesIndexes.length;it++){var ut=t.dataSeriesIndexes[it],y=this.data[ut],u=y.dataPoints;if(0<u.length)for(ft=5<s&&y.bevelEnabled?!0:!1,l.strokeStyle="#4572A7 ",r=0;r<u.length;r++)(i=u[r].x.getTime?u[r].x.getTime():u[r].x,i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax||"number"!=typeof u[r].y)||(v=t.axisX.convertValueToPixel(i),d=v-t.plotType.plotUnits.length*s/2+t.index*s<<0,nt=d+s<<0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<u[r].y?(g[i]=u[r].y+(g[i]?g[i]:0),0<g[i]&&(c=b[i]?b[i]:w,b[i]=o=t.axisY.convertValueToPixel(g[i]))):t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=u[r].y?(tt[i]=u[r].y+(tt[i]?tt[i]:0),o=k[i]?k[i]:w,k[i]=c=t.axisY.convertValueToPixel(tt[i])):(o=t.axisY.convertValueToPixel(u[r].y),0<=u[r].y)?(p=b[i]?b[i]:0,c=w+p,o+=p,b[i]=p+(o-c)):(p=k[i]?k[i]:0,c=o-p,o=w-p,k[i]=p+(o-c)),i=u[r].color?u[r].color:y._colorSet[r%y._colorSet.length],a(l,c,d,o,nt,i,0,null,ft,!1,!1,!1,y.fillOpacity),i=y.dataPointIds[r],this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:ut,dataPointIndex:r,x1:c,y1:d,x2:o,y2:nt},i=e(i),n&&a(this._eventManager.ghostCtx,c,d,o,nt,i,0,null,!1,!1,!1,!1),(u[r].indexLabel||y.indexLabel||u[r].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:u[r],dataSeries:y,point:{x:0<=u[r].y?o:c,y:v},direction:0>u[r].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(c,o),y1:d,x2:Math.max(c,o),y2:nt},color:i}))}return n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&l.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&l.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.xScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:w<t.axisY.bounds.x1?t.axisY.bounds.x1:w>t.axisY.bounds.x2?t.axisY.bounds.x2:w}}},i.prototype.renderStackedBar100=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,l=n?this._preRenderCtx:rt,c,d,ft,u,g,tt,p;if(!(0>=t.dataSeriesIndexes.length)){var i=null,o=this.plotArea,b=[],k=[],nt=[],it=[],r=0,h,v,w=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(v=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,c=t.axisX.dataInfo.minDiff,isFinite(c)||(c=.3*Math.abs(t.axisX.range)),c=this.options.dataPointWidth?this.dataPointWidth:.9*(o.height*(t.axisX.logarithmic?Math.log(c)/Math.log(t.axisX.range):Math.abs(c)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&r>v&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,v)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&v<r&&(v=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),c<r&&(c=r),c>v&&(c=v),l.save(),n&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(o.x1,o.y1,o.width,o.height),l.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),d=0;d<t.dataSeriesIndexes.length;d++){var ut=t.dataSeriesIndexes[d],y=this.data[ut],s=y.dataPoints;if(0<s.length)for(ft=5<c&&y.bevelEnabled?!0:!1,l.strokeStyle="#4572A7 ",r=0;r<s.length;r++)if(i=s[r].x.getTime?s[r].x.getTime():s[r].x,!(i<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof s[r].y){if(v=t.axisX.convertValueToPixel(i),u=0!==t.dataPointYSums[i]?100*(s[r].y/t.dataPointYSums[i]):0,g=v-t.plotType.plotUnits.length*c/2+t.index*c<<0,tt=g+c<<0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<s[r].y){if(nt[i]=u+(nt[i]?nt[i]:0),0>=nt[i])continue;u=b[i]?b[i]:w;b[i]=h=t.axisY.convertValueToPixel(nt[i])}else t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=s[r].y?(it[i]=u+(it[i]?it[i]:0),h=k[i]?k[i]:w,k[i]=u=t.axisY.convertValueToPixel(it[i])):(h=t.axisY.convertValueToPixel(u),0<=s[r].y)?(p=b[i]?b[i]:0,u=w+p,h+=p,t.dataSeriesIndexes.length-1===d&&1>=Math.abs(o.x2-h)&&(h=o.x2),b[i]=p+(h-u)):(p=k[i]?k[i]:0,u=h-p,h=w-p,t.dataSeriesIndexes.length-1===d&&1>=Math.abs(o.x1-u)&&(u=o.x1),k[i]=p+(h-u));i=s[r].color?s[r].color:y._colorSet[r%y._colorSet.length];a(l,u,g,h,tt,i,0,null,ft,!1,!1,!1,y.fillOpacity);i=y.dataPointIds[r];this._eventManager.objectMap[i]={id:i,objectType:"dataPoint",dataSeriesIndex:ut,dataPointIndex:r,x1:u,y1:g,x2:h,y2:tt};i=e(i);n&&a(this._eventManager.ghostCtx,u,g,h,tt,i,0,null,!1,!1,!1,!1);(s[r].indexLabel||y.indexLabel||s[r].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:s[r],dataSeries:y,point:{x:0<=s[r].y?h:u,y:v},direction:0>s[r].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(u,h),y1:g,x2:Math.max(u,h),y2:tt},color:i})}}return n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&l.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&l.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.xScaleAnimation,easingFunction:f.easing.easeOutQuart,animationBase:w<t.axisY.bounds.x1?t.axisY.bounds.x1:w>t.axisY.bounds.x2?t.axisY.bounds.x2:w}}},i.prototype.renderArea=function(t){function it(){nt&&(0<r.lineThickness&&i.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?k=vt:0>t.axisY.viewportMaximum?k=at.y1:0<t.axisY.viewportMinimum&&(k=lt.y2),i.lineTo(s,k),i.lineTo(nt.x,k),i.closePath(),i.globalAlpha=r.fillOpacity,i.fill(),i.globalAlpha=1,n&&(a.lineTo(s,k),a.lineTo(nt.x,k),a.closePath(),a.fill()),i.beginPath(),i.moveTo(s,c),a.beginPath(),a.moveTo(s,c),nt={x:s,y:c})}var b,y,ft=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:ft,rt,ct,ht,tt,d;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx,lt=t.axisX.lineCoordinates,at=t.axisY.lineCoordinates,w=[],v=this.plotArea,g;for(i.save(),n&&a.save(),i.beginPath(),i.rect(v.x1,v.y1,v.width,v.height),i.clip(),n&&(a.beginPath(),a.rect(v.x1,v.y1,v.width,v.height),a.clip()),rt=0;rt<t.dataSeriesIndexes.length;rt++){var et=t.dataSeriesIndexes[rt],r=this.data[et],h=r.dataPoints,w=r.id;this._eventManager.objectMap[w]={objectType:"dataSeries",dataSeriesIndex:et};w=e(w);a.fillStyle=w;w=[];b=!0;var o=0,s,c,p,vt=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),k,nt=null;if(0<h.length){var ot=r._colorSet[o%r._colorSet.length],ut=r.lineColor=r.options.lineColor||ot,st=ut;for(i.fillStyle=ot,i.strokeStyle=ut,i.lineWidth=r.lineThickness,y="solid",i.setLineDash&&(ct=u(r.nullDataLineDashType,r.lineThickness),y=r.lineDashType,ht=u(y,r.lineThickness),i.setLineDash(ht)),tt=!0;o<h.length;o++)(p=h[o].x.getTime?h[o].x.getTime():h[o].x,p<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!tt))||("number"!=typeof h[o].y?(r.connectNullData||tt||b||it(),tt=!0):(s=t.axisX.convertValueToPixel(p),c=t.axisY.convertValueToPixel(h[o].y),b||tt?(!b&&r.connectNullData?(i.setLineDash&&(r.options.nullDataLineDashType||y===r.lineDashType&&r.lineDashType!==r.nullDataLineDashType)&&(b=s,y=c,s=g.x,c=g.y,it(),i.moveTo(g.x,g.y),s=b,c=y,nt=g,y=r.nullDataLineDashType,i.setLineDash(ct)),i.lineTo(s,c),n&&a.lineTo(s,c)):(i.beginPath(),i.moveTo(s,c),n&&(a.beginPath(),a.moveTo(s,c)),nt={x:s,y:c}),tt=b=!1):(i.lineTo(s,c),n&&a.lineTo(s,c),0==o%250&&it()),g={x:s,y:c},o<h.length-1&&(st!==(h[o].lineColor||ut)||y!==(h[o].lineDashType||r.lineDashType))&&(it(),st=h[o].lineColor||ut,i.strokeStyle=st,i.setLineDash&&(h[o].lineDashType?(y=h[o].lineDashType,i.setLineDash(u(y,r.lineThickness))):(y=r.lineDashType,i.setLineDash(ht)))),d=r.dataPointIds[o],this._eventManager.objectMap[d]={id:d,objectType:"dataPoint",dataSeriesIndex:et,dataPointIndex:o,x1:s,y1:c},0!==h[o].markerSize&&(0<h[o].markerSize||0<r.markerSize)&&(p=r.getMarkerProperties(o,s,c,i),w.push(p),d=e(d),n&&w.push({x:s,y:c,ctx:a,type:p.type,size:p.size,color:d,borderColor:d,borderThickness:p.borderThickness})),(h[o].indexLabel||r.indexLabel||h[o].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:h[o],dataSeries:r,point:{x:s,y:c},direction:0>h[o].y===t.axisY.reversed?1:-1,color:ot})));it();l.drawMarkers(w)}}return n&&(ft.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:ft,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderSplineArea=function(t){function et(){var u=ot(c,2),f;if(0<u.length){if(0<r.lineThickness){for(i.beginPath(),i.moveTo(u[0].x,u[0].y),u[0].newStrokeStyle&&(i.strokeStyle=u[0].newStrokeStyle),u[0].newLineDashArray&&i.setLineDash(u[0].newLineDashArray),f=0;f<u.length-3;f+=3)(i.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y),n&&h.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y),u[f+3].newStrokeStyle||u[f+3].newLineDashArray)&&(i.stroke(),i.beginPath(),i.moveTo(u[f+3].x,u[f+3].y),u[f+3].newStrokeStyle&&(i.strokeStyle=u[f+3].newStrokeStyle),u[f+3].newLineDashArray&&i.setLineDash(u[f+3].newLineDashArray));i.stroke()}for(i.beginPath(),i.moveTo(u[0].x,u[0].y),n&&(h.beginPath(),h.moveTo(u[0].x,u[0].y)),f=0;f<u.length-3;f+=3)i.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y),n&&h.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y);t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?w=lt:0>t.axisY.viewportMaximum?w=ct.y1:0<t.axisY.viewportMinimum&&(w=ht.y2);rt={x:u[0].x,y:u[0].y};i.lineTo(u[u.length-1].x,w);i.lineTo(rt.x,w);i.closePath();i.globalAlpha=r.fillOpacity;i.fill();i.globalAlpha=1;n&&(h.lineTo(u[u.length-1].x,w),h.lineTo(rt.x,w),h.closePath(),h.fill())}}var tt=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:tt,g,b,k,d;if(!(0>=t.dataSeriesIndexes.length)){var h=this._eventManager.ghostCtx,ht=t.axisX.lineCoordinates,ct=t.axisY.lineCoordinates,p=[],a=this.plotArea;for(i.save(),n&&h.save(),i.beginPath(),i.rect(a.x1,a.y1,a.width,a.height),i.clip(),n&&(h.beginPath(),h.rect(a.x1,a.y1,a.width,a.height),h.clip()),g=0;g<t.dataSeriesIndexes.length;g++){var it=t.dataSeriesIndexes[g],r=this.data[it],s=r.dataPoints,p=r.id;this._eventManager.objectMap[p]={objectType:"dataSeries",dataSeriesIndex:it};p=e(p);h.fillStyle=p;var p=[],o=0,y,v,lt=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),w,rt=null,c=[];if(0<s.length){var ut=r._colorSet[o%r._colorSet.length],nt=r.lineColor=r.options.lineColor||ut,ft=nt;if(i.fillStyle=ut,i.strokeStyle=nt,i.lineWidth=r.lineThickness,b="solid",i.setLineDash){var at=u(r.nullDataLineDashType,r.lineThickness),b=r.lineDashType,st=u(b,r.lineThickness);i.setLineDash(st)}for(v=!1;o<s.length;o++)(y=s[o].x.getTime?s[o].x.getTime():s[o].x,y<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!v))||("number"!=typeof s[o].y?(0<o&&!v&&(r.connectNullData?i.setLineDash&&0<c.length&&(r.options.nullDataLineDashType||!s[o-1].lineDashType)&&(c[c.length-1].newLineDashArray=at,b=r.nullDataLineDashType):(et(),c=[])),v=!0):(y=t.axisX.convertValueToPixel(y),v=t.axisY.convertValueToPixel(s[o].y),k=r.dataPointIds[o],this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:it,dataPointIndex:o,x1:y,y1:v},c[c.length]={x:y,y:v},o<s.length-1&&(ft!==(s[o].lineColor||nt)||b!==(s[o].lineDashType||r.lineDashType))&&(ft=s[o].lineColor||nt,c[c.length-1].newStrokeStyle=ft,i.setLineDash&&(s[o].lineDashType?(b=s[o].lineDashType,c[c.length-1].newLineDashArray=u(b,r.lineThickness)):(b=r.lineDashType,c[c.length-1].newLineDashArray=st))),0!==s[o].markerSize&&(0<s[o].markerSize||0<r.markerSize)&&(d=r.getMarkerProperties(o,y,v,i),p.push(d),k=e(k),n&&p.push({x:y,y:v,ctx:h,type:d.type,size:d.size,color:k,borderColor:k,borderThickness:d.borderThickness})),(s[o].indexLabel||r.indexLabel||s[o].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:s[o],dataSeries:r,point:{x:y,y:v},direction:0>s[o].y===t.axisY.reversed?1:-1,color:ut}),v=!1));et();l.drawMarkers(p)}}return n&&(tt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:tt,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderStepArea=function(t){function it(){tt&&(0<r.lineThickness&&i.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?g=at:0>t.axisY.viewportMaximum?g=lt.y1:0<t.axisY.viewportMinimum&&(g=ct.y2),i.lineTo(o,g),i.lineTo(tt.x,g),i.closePath(),i.globalAlpha=r.fillOpacity,i.fill(),i.globalAlpha=1,n&&(a.lineTo(o,g),a.lineTo(tt.x,g),a.closePath(),a.fill()),i.beginPath(),i.moveTo(o,h),a.beginPath(),a.moveTo(o,h),tt={x:o,y:h})}var d,w,ft=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:ft,rt,k,p;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx,ct=t.axisX.lineCoordinates,lt=t.axisY.lineCoordinates,b=[],v=this.plotArea,nt;for(i.save(),n&&a.save(),i.beginPath(),i.rect(v.x1,v.y1,v.width,v.height),i.clip(),n&&(a.beginPath(),a.rect(v.x1,v.y1,v.width,v.height),a.clip()),rt=0;rt<t.dataSeriesIndexes.length;rt++){var et=t.dataSeriesIndexes[rt],r=this.data[et],c=r.dataPoints,b=r.id;this._eventManager.objectMap[b]={objectType:"dataSeries",dataSeriesIndex:et};b=e(b);a.fillStyle=b;b=[];d=!0;var s=0,o,h,y,at=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),g,tt=null;if(w=!1,0<c.length){var ot=r._colorSet[s%r._colorSet.length],ut=r.lineColor=r.options.lineColor||ot,st=ut;if(i.fillStyle=ot,i.strokeStyle=ut,i.lineWidth=r.lineThickness,k="solid",i.setLineDash){var vt=u(r.nullDataLineDashType,r.lineThickness),k=r.lineDashType,ht=u(k,r.lineThickness);i.setLineDash(ht)}for(;s<c.length;s++)(y=c[s].x.getTime?c[s].x.getTime():c[s].x,y<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!r.connectNullData||!w))||(p=h,"number"!=typeof c[s].y?(r.connectNullData||w||d||it(),w=!0):(o=t.axisX.convertValueToPixel(y),h=t.axisY.convertValueToPixel(c[s].y),d||w?(!d&&r.connectNullData?(i.setLineDash&&(r.options.nullDataLineDashType||k===r.lineDashType&&r.lineDashType!==r.nullDataLineDashType)&&(d=o,w=h,o=nt.x,h=nt.y,it(),i.moveTo(nt.x,nt.y),o=d,h=w,tt=nt,k=r.nullDataLineDashType,i.setLineDash(vt)),i.lineTo(o,p),i.lineTo(o,h),n&&(a.lineTo(o,p),a.lineTo(o,h))):(i.beginPath(),i.moveTo(o,h),n&&(a.beginPath(),a.moveTo(o,h)),tt={x:o,y:h}),w=d=!1):(i.lineTo(o,p),n&&a.lineTo(o,p),i.lineTo(o,h),n&&a.lineTo(o,h),0==s%250&&it()),nt={x:o,y:h},s<c.length-1&&(st!==(c[s].lineColor||ut)||k!==(c[s].lineDashType||r.lineDashType))&&(it(),st=c[s].lineColor||ut,i.strokeStyle=st,i.setLineDash&&(c[s].lineDashType?(k=c[s].lineDashType,i.setLineDash(u(k,r.lineThickness))):(k=r.lineDashType,i.setLineDash(ht)))),y=r.dataPointIds[s],this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:et,dataPointIndex:s,x1:o,y1:h},0!==c[s].markerSize&&(0<c[s].markerSize||0<r.markerSize)&&(p=r.getMarkerProperties(s,o,h,i),b.push(p),y=e(y),n&&b.push({x:o,y:h,ctx:a,type:p.type,size:p.size,color:y,borderColor:y,borderThickness:p.borderThickness})),(c[s].indexLabel||r.indexLabel||c[s].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:c[s],dataSeries:r,point:{x:o,y:h},direction:0>c[s].y===t.axisY.reversed?1:-1,color:ot})));it();l.drawMarkers(b)}}return n&&(ft.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:ft,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderStackedArea=function(t){function rt(){if(!(1>v.length)){for(0<i.lineThickness&&r.stroke();0<v.length;){var t=v.pop();r.lineTo(t.x,t.y);n&&a.lineTo(t.x,t.y)}r.closePath();r.globalAlpha=i.fillOpacity;r.fill();r.globalAlpha=1;r.beginPath();n&&(a.closePath(),a.fill(),a.beginPath());v=[]}}var ht=t.targetCanvasCtx||this.plotArea.ctx,r=n?this._preRenderCtx:ht,tt,d,pt,yt,it,o,k,st;if(!(0>=t.dataSeriesIndexes.length)){var tt=null,s=null,ct=[],p=this.plotArea,lt=[],v=[],ut=[],ft=[],o=0,h,c,et=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),a=this._eventManager.ghostCtx,at,nt,w;for(n&&a.beginPath(),r.save(),n&&a.save(),r.beginPath(),r.rect(p.x1,p.y1,p.width,p.height),r.clip(),n&&(a.beginPath(),a.rect(p.x1,p.y1,p.width,p.height),a.clip()),tt=[],d=0;d<t.dataSeriesIndexes.length;d++){var b=t.dataSeriesIndexes[d],i=this.data[b],y=i.dataPoints;for(i.dataPointIndexes=[],o=0;o<y.length;o++)b=y[o].x.getTime?y[o].x.getTime():y[o].x,i.dataPointIndexes[b]=o,tt[b]||(ut.push(b),tt[b]=!0);ut.sort(ei)}for(d=0;d<t.dataSeriesIndexes.length;d++){if(b=t.dataSeriesIndexes[d],i=this.data[b],y=i.dataPoints,nt=!0,v=[],o=i.id,this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:b},o=e(o),a.fillStyle=o,0<ut.length){var tt=i._colorSet[0],ot=i.lineColor=i.options.lineColor||tt,vt=ot;for(r.fillStyle=tt,r.strokeStyle=ot,r.lineWidth=i.lineThickness,w="solid",r.setLineDash&&(pt=u(i.nullDataLineDashType,i.lineThickness),w=i.lineDashType,yt=u(w,i.lineThickness),r.setLineDash(yt)),it=!0,o=0;o<ut.length;o++){var s=ut[o],g=null,g=0<=i.dataPointIndexes[s]?y[i.dataPointIndexes[s]]:{x:s,y:null};if(!(s<t.axisX.dataInfo.viewPortMin||s>t.axisX.dataInfo.viewPortMax&&(!i.connectNullData||!it)))if("number"!=typeof g.y)i.connectNullData||it||nt||rt(),it=!0;else{if(h=t.axisX.convertValueToPixel(s),k=lt[s]?lt[s]:0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(ft[s]=g.y+(ft[s]?ft[s]:0),0>=ft[s]&&t.axisY.logarithmic)continue;c=t.axisY.convertValueToPixel(ft[s])}else c=t.axisY.convertValueToPixel(g.y),c-=k;v.push({x:h,y:et-k});lt[s]=et-c;nt||it?(!nt&&i.connectNullData?(r.setLineDash&&(i.options.nullDataLineDashType||w===i.lineDashType&&i.lineDashType!==i.nullDataLineDashType)&&(nt=v.pop(),w=v[v.length-1],rt(),r.moveTo(at.x,at.y),v.push(w),v.push(nt),w=i.nullDataLineDashType,r.setLineDash(pt)),r.lineTo(h,c),n&&a.lineTo(h,c)):(r.beginPath(),r.moveTo(h,c),n&&(a.beginPath(),a.moveTo(h,c))),it=nt=!1):(r.lineTo(h,c),n&&a.lineTo(h,c),0==o%250&&(rt(),r.moveTo(h,c),n&&a.moveTo(h,c),v.push({x:h,y:et-k})));at={x:h,y:c};o<y.length-1&&(vt!==(y[o].lineColor||ot)||w!==(y[o].lineDashType||i.lineDashType))&&(rt(),r.beginPath(),r.moveTo(h,c),v.push({x:h,y:et-k}),vt=y[o].lineColor||ot,r.strokeStyle=vt,r.setLineDash&&(y[o].lineDashType?(w=y[o].lineDashType,r.setLineDash(u(w,i.lineThickness))):(w=i.lineDashType,r.setLineDash(yt))));0<=i.dataPointIndexes[s]&&(st=i.dataPointIds[i.dataPointIndexes[s]],this._eventManager.objectMap[st]={id:st,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:i.dataPointIndexes[s],x1:h,y1:c});0<=i.dataPointIndexes[s]&&0!==g.markerSize&&(0<g.markerSize||0<i.markerSize)&&(k=i.getMarkerProperties(i.dataPointIndexes[s],h,c,r),ct.push(k),s=e(st),n&&ct.push({x:h,y:c,ctx:a,type:k.type,size:k.size,color:s,borderColor:s,borderThickness:k.borderThickness}));(g.indexLabel||i.indexLabel||g.indexLabelFormatter||i.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:g,dataSeries:i,point:{x:h,y:c},direction:0>y[o].y===t.axisY.reversed?1:-1,color:tt})}}rt();r.moveTo(h,c);n&&a.moveTo(h,c)}delete i.dataPointIndexes}return l.drawMarkers(ct),n&&(ht.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&r.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&r.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(p.x1,p.y1,p.width,p.height),a.restore()),r.restore(),{source:ht,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderStackedArea100=function(t){function rt(){for(0<i.lineThickness&&r.stroke();0<p.length;){var t=p.pop();r.lineTo(t.x,t.y);n&&a.lineTo(t.x,t.y)}r.closePath();r.globalAlpha=i.fillOpacity;r.fill();r.globalAlpha=1;r.beginPath();n&&(a.closePath(),a.fill(),a.beginPath());p=[]}var ht=t.targetCanvasCtx||this.plotArea.ctx,r=n?this._preRenderCtx:ht,w,g,wt,yt,it,s,pt,d,st;if(!(0>=t.dataSeriesIndexes.length)){var w=null,o=null,y=this.plotArea,ct=[],lt=[],p=[],ut=[],ft=[],s=0,h,c,at,nt,b,et=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),a=this._eventManager.ghostCtx;for(r.save(),n&&a.save(),r.beginPath(),r.rect(y.x1,y.y1,y.width,y.height),r.clip(),n&&(a.beginPath(),a.rect(y.x1,y.y1,y.width,y.height),a.clip()),w=[],g=0;g<t.dataSeriesIndexes.length;g++){var k=t.dataSeriesIndexes[g],i=this.data[k],v=i.dataPoints;for(i.dataPointIndexes=[],s=0;s<v.length;s++)k=v[s].x.getTime?v[s].x.getTime():v[s].x,i.dataPointIndexes[k]=s,w[k]||(ut.push(k),w[k]=!0);ut.sort(ei)}for(g=0;g<t.dataSeriesIndexes.length;g++){if(k=t.dataSeriesIndexes[g],i=this.data[k],v=i.dataPoints,nt=!0,w=i.id,this._eventManager.objectMap[w]={objectType:"dataSeries",dataSeriesIndex:k},w=e(w),a.fillStyle=w,p=[],0<ut.length){var w=i._colorSet[s%i._colorSet.length],ot=i.lineColor=i.options.lineColor||w,vt=ot;for(r.fillStyle=w,r.strokeStyle=ot,r.lineWidth=i.lineThickness,b="solid",r.setLineDash&&(wt=u(i.nullDataLineDashType,i.lineThickness),b=i.lineDashType,yt=u(b,i.lineThickness),r.setLineDash(yt)),it=!0,s=0;s<ut.length;s++){var o=ut[s],tt=null,tt=0<=i.dataPointIndexes[o]?v[i.dataPointIndexes[o]]:{x:o,y:null};if(!(o<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax&&(!i.connectNullData||!it)))if("number"!=typeof tt.y)i.connectNullData||it||nt||rt(),it=!0;else{if(pt=0!==t.dataPointYSums[o]?100*(tt.y/t.dataPointYSums[o]):0,h=t.axisX.convertValueToPixel(o),d=lt[o]?lt[o]:0,t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(ft[o]=pt+(ft[o]?ft[o]:0),0>=ft[o]&&t.axisY.logarithmic)continue;c=t.axisY.convertValueToPixel(ft[o])}else c=t.axisY.convertValueToPixel(pt),c-=d;p.push({x:h,y:et-d});lt[o]=et-c;nt||it?(!nt&&i.connectNullData?(r.setLineDash&&(i.options.nullDataLineDashType||b===i.lineDashType&&i.lineDashType!==i.nullDataLineDashType)&&(nt=p.pop(),b=p[p.length-1],rt(),r.moveTo(at.x,at.y),p.push(b),p.push(nt),b=i.nullDataLineDashType,r.setLineDash(wt)),r.lineTo(h,c),n&&a.lineTo(h,c)):(r.beginPath(),r.moveTo(h,c),n&&(a.beginPath(),a.moveTo(h,c))),it=nt=!1):(r.lineTo(h,c),n&&a.lineTo(h,c),0==s%250&&(rt(),r.moveTo(h,c),n&&a.moveTo(h,c),p.push({x:h,y:et-d})));at={x:h,y:c};s<v.length-1&&(vt!==(v[s].lineColor||ot)||b!==(v[s].lineDashType||i.lineDashType))&&(rt(),r.beginPath(),r.moveTo(h,c),p.push({x:h,y:et-d}),vt=v[s].lineColor||ot,r.strokeStyle=vt,r.setLineDash&&(v[s].lineDashType?(b=v[s].lineDashType,r.setLineDash(u(b,i.lineThickness))):(b=i.lineDashType,r.setLineDash(yt))));0<=i.dataPointIndexes[o]&&(st=i.dataPointIds[i.dataPointIndexes[o]],this._eventManager.objectMap[st]={id:st,objectType:"dataPoint",dataSeriesIndex:k,dataPointIndex:i.dataPointIndexes[o],x1:h,y1:c});0<=i.dataPointIndexes[o]&&0!==tt.markerSize&&(0<tt.markerSize||0<i.markerSize)&&(d=i.getMarkerProperties(s,h,c,r),ct.push(d),o=e(st),n&&ct.push({x:h,y:c,ctx:a,type:d.type,size:d.size,color:o,borderColor:o,borderThickness:d.borderThickness}));(tt.indexLabel||i.indexLabel||tt.indexLabelFormatter||i.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:tt,dataSeries:i,point:{x:h,y:c},direction:0>v[s].y===t.axisY.reversed?1:-1,color:w})}}rt();r.moveTo(h,c);n&&a.moveTo(h,c)}delete i.dataPointIndexes}return l.drawMarkers(ct),n&&(ht.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&r.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&r.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(y.x1,y.y1,y.width,y.height),a.restore()),r.restore(),{source:ht,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderBubble=function(t){var d=t.targetCanvasCtx||this.plotArea.ctx,h=n?this._preRenderCtx:d,s,i,o,a,k;if(!(0>=t.dataSeriesIndexes.length)){s=this.plotArea;i=0;h.save();n&&this._eventManager.ghostCtx.save();h.beginPath();h.rect(s.x1,s.y1,s.width,s.height);h.clip();n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var w=-Infinity,y=Infinity,v=0;v<t.dataSeriesIndexes.length;v++)for(var b=t.dataSeriesIndexes[v],c=this.data[b],u=c.dataPoints,r=0,i=0;i<u.length;i++)o=o=u[i].getTime?u[i].x.getTime():u[i].x,o<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax||"undefined"==typeof u[i].z||(r=u[i].z,r>w&&(w=r),r<y&&(y=r));for(var g=25*Math.PI,nt=Math.max(Math.pow(.25*Math.min(s.height,s.width)/2,2)*Math.PI,g),v=0;v<t.dataSeriesIndexes.length;v++)if(b=t.dataSeriesIndexes[v],c=this.data[b],u=c.dataPoints,0<u.length)for(h.strokeStyle="#4572A7 ",i=0;i<u.length;i++)if(o=o=u[i].getTime?u[i].x.getTime():u[i].x,!(o<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof u[i].y){o=t.axisX.convertValueToPixel(o);a=t.axisY.convertValueToPixel(u[i].y);var r=u[i].z,p=2*Math.max(Math.sqrt((w===y?nt/2:g+(nt-g)/(w-y)*(r-y))/Math.PI)<<0,1),r=c.getMarkerProperties(i,h);r.size=p;h.globalAlpha=c.fillOpacity;l.drawMarker(o,a,h,r.type,r.size,r.color,r.borderColor,r.borderThickness);h.globalAlpha=1;k=c.dataPointIds[i];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:i,x1:o,y1:a,size:p};p=e(k);n&&l.drawMarker(o,a,this._eventManager.ghostCtx,r.type,r.size,p,p,r.borderThickness);(u[i].indexLabel||c.indexLabel||u[i].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:u[i],dataSeries:c,point:{x:o,y:a},direction:1,bounds:{x1:o-r.size/2,y1:a-r.size/2,x2:o+r.size/2,y2:a+r.size/2},color:null})}return n&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&h.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&h.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderScatter=function(t){var p=t.targetCanvasCtx||this.plotArea.ctx,s=n?this._preRenderCtx:p,r,u,o,a,y,i;if(!(0>=t.dataSeriesIndexes.length)){for(r=this.plotArea,u=0,s.save(),n&&this._eventManager.ghostCtx.save(),s.beginPath(),s.rect(r.x1,r.y1,r.width,r.height),s.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),y=0;y<t.dataSeriesIndexes.length;y++){var b=t.dataSeriesIndexes[y],v=this.data[b],h=v.dataPoints;if(0<h.length){s.strokeStyle="#4572A7 ";Math.pow(.3*Math.min(r.height,r.width)/2,2);for(var c=0,w=0,u=0;u<h.length;u++)(o=o=h[u].getTime?h[u].x.getTime():h[u].x,o<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax||"number"!=typeof h[u].y)||(o=t.axisX.convertValueToPixel(o),a=t.axisY.convertValueToPixel(h[u].y),i=v.getMarkerProperties(u,o,a,s),s.globalAlpha=v.fillOpacity,l.drawMarker(i.x,i.y,i.ctx,i.type,i.size,i.color,i.borderColor,i.borderThickness),s.globalAlpha=1,Math.sqrt((c-o)*(c-o)+(w-a)*(w-a))<Math.min(i.size,5)&&h.length>Math.min(this.plotArea.width,this.plotArea.height)||(c=v.dataPointIds[u],this._eventManager.objectMap[c]={id:c,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:u,x1:o,y1:a},c=e(c),n&&l.drawMarker(i.x,i.y,this._eventManager.ghostCtx,i.type,i.size,c,c,i.borderThickness),(h[u].indexLabel||v.indexLabel||h[u].indexLabelFormatter||v.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:h[u],dataSeries:v,point:{x:o,y:a},direction:1,bounds:{x1:o-i.size/2,y1:a-i.size/2,x2:o+i.size/2,y2:a+i.size/2},color:null}),c=o,w=a))}}return n&&(p.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&s.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&s.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.clearRect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.restore()),s.restore(),{source:p,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderCandlestick=function(i){var et=i.targetCanvasCtx||this.plotArea.ctx,r=n?this._preRenderCtx:et,u=this._eventManager.ghostCtx,ut,ot,o;if(!(0>=i.dataSeriesIndexes.length)){var c=null,nt=null,p=this.plotArea,o=0,h,v,k,d,y,rt,c=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,nt=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,w=i.axisX.dataInfo.minDiff;for(isFinite(w)||(w=.3*Math.abs(i.axisX.range)),w=this.options.dataPointWidth?this.dataPointWidth:.7*p.width*(i.axisX.logarithmic?Math.log(w)/Math.log(i.axisX.range):Math.abs(w)/Math.abs(i.axisX.range))<<0,this.dataPointMaxWidth&&c>nt&&(c=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,nt)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&nt<c&&(nt=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,c)),w<c&&(w=c),w>nt&&(w=nt),r.save(),n&&u.save(),r.beginPath(),r.rect(p.x1,p.y1,p.width,p.height),r.clip(),n&&(u.beginPath(),u.rect(p.x1,p.y1,p.width,p.height),u.clip()),ut=0;ut<i.dataSeriesIndexes.length;ut++){var st=i.dataSeriesIndexes[ut],l=this.data[st],s=l.dataPoints;if(0<s.length)for(ot=5<w&&l.bevelEnabled?!0:!1,o=0;o<s.length;o++)if(rt=s[o].getTime?s[o].x.getTime():s[o].x,!(rt<i.axisX.dataInfo.viewPortMin||rt>i.axisX.dataInfo.viewPortMax)&&!t(s[o].y)&&s[o].y.length&&"number"==typeof s[o].y[0]&&"number"==typeof s[o].y[1]&&"number"==typeof s[o].y[2]&&"number"==typeof s[o].y[3]){h=i.axisX.convertValueToPixel(rt);v=i.axisY.convertValueToPixel(s[o].y[0]);k=i.axisY.convertValueToPixel(s[o].y[1]);d=i.axisY.convertValueToPixel(s[o].y[2]);y=i.axisY.convertValueToPixel(s[o].y[3]);var g=h-w/2<<0,tt=g+w<<0,nt=l.options.fallingColor?l.fallingColor:l._colorSet[0],c=s[o].color?s[o].color:l._colorSet[0],it=Math.round(Math.max(1,.15*w)),b=0==it%2?0:.5,ft=l.dataPointIds[o];this._eventManager.objectMap[ft]={id:ft,objectType:"dataPoint",dataSeriesIndex:st,dataPointIndex:o,x1:g,y1:v,x2:tt,y2:k,x3:h,y3:d,x4:h,y4:y,borderThickness:it,color:c};r.strokeStyle=c;r.beginPath();r.lineWidth=it;u.lineWidth=Math.max(it,4);"candlestick"===l.type?(r.moveTo(h-b,k),r.lineTo(h-b,Math.min(v,y)),r.stroke(),r.moveTo(h-b,Math.max(v,y)),r.lineTo(h-b,d),r.stroke(),a(r,g,Math.min(v,y),tt,Math.max(v,y),s[o].y[0]<=s[o].y[3]?l.risingColor:nt,it,c,ot,ot,!1,!1,l.fillOpacity),n&&(c=e(ft),u.strokeStyle=c,u.moveTo(h-b,k),u.lineTo(h-b,Math.min(v,y)),u.stroke(),u.moveTo(h-b,Math.max(v,y)),u.lineTo(h-b,d),u.stroke(),a(u,g,Math.min(v,y),tt,Math.max(v,y),c,0,null,!1,!1,!1,!1))):"ohlc"===l.type&&(r.moveTo(h-b,k),r.lineTo(h-b,d),r.stroke(),r.beginPath(),r.moveTo(h,v),r.lineTo(g,v),r.stroke(),r.beginPath(),r.moveTo(h,y),r.lineTo(tt,y),r.stroke(),n&&(c=e(ft),u.strokeStyle=c,u.moveTo(h-b,k),u.lineTo(h-b,d),u.stroke(),u.beginPath(),u.moveTo(h,v),u.lineTo(g,v),u.stroke(),u.beginPath(),u.moveTo(h,y),u.lineTo(tt,y),u.stroke()));(s[o].indexLabel||l.indexLabel||s[o].indexLabelFormatter||l.indexLabelFormatter)&&this._indexLabels.push({chartType:l.type,dataPoint:s[o],dataSeries:l,point:{x:g+(tt-g)/2,y:i.axisY.reversed?d:k},direction:1,bounds:{x1:g,y1:Math.min(k,d),x2:tt,y2:Math.max(k,d)},color:c})}}return n&&(et.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",i.axisX.maskCanvas&&r.drawImage(i.axisX.maskCanvas,0,0,this.width,this.height),i.axisY.maskCanvas&&r.drawImage(i.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(p.x1,p.y1,p.width,p.height),u.restore()),r.restore(),{source:et,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderBoxAndWhisker=function(i){var vt=i.targetCanvasCtx||this.plotArea.ctx,o=n?this._preRenderCtx:vt,c=this._eventManager.ghostCtx,ht,r;if(!(0>=i.dataSeriesIndexes.length)){var y=null,w=this.plotArea,r=0,l,b,d,g,k,tt,lt,y=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,v=i.axisX.dataInfo.minDiff;isFinite(v)||(v=.3*Math.abs(i.axisX.range));v=this.options.dataPointWidth?this.dataPointWidth:.7*w.width*(i.axisX.logarithmic?Math.log(v)/Math.log(i.axisX.range):Math.abs(v)/Math.abs(i.axisX.range))<<0;this.dataPointMaxWidth&&y>r&&(y=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,r));!this.dataPointMaxWidth&&this.dataPointMinWidth&&r<y&&(r=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,y));v<y&&(v=y);v>r&&(v=r);o.save();n&&c.save();o.beginPath();o.rect(w.x1,w.y1,w.width,w.height);o.clip();n&&(c.beginPath(),c.rect(w.x1,w.y1,w.width,w.height),c.clip());for(var at=!1,at=!!i.axisY.reversed,yt=0;yt<i.dataSeriesIndexes.length;yt++){var wt=i.dataSeriesIndexes[yt],h=this.data[wt],s=h.dataPoints;if(0<s.length)for(ht=5<v&&h.bevelEnabled?!0:!1,r=0;r<s.length;r++)if(lt=s[r].getTime?s[r].x.getTime():s[r].x,!(lt<i.axisX.dataInfo.viewPortMin||lt>i.axisX.dataInfo.viewPortMax)&&!t(s[r].y)&&s[r].y.length&&"number"==typeof s[r].y[0]&&"number"==typeof s[r].y[1]&&"number"==typeof s[r].y[2]&&"number"==typeof s[r].y[3]&&"number"==typeof s[r].y[4]&&5===s[r].y.length){l=i.axisX.convertValueToPixel(lt);b=i.axisY.convertValueToPixel(s[r].y[0]);d=i.axisY.convertValueToPixel(s[r].y[1]);g=i.axisY.convertValueToPixel(s[r].y[2]);k=i.axisY.convertValueToPixel(s[r].y[3]);tt=i.axisY.convertValueToPixel(s[r].y[4]);var nt=l-v/2<<0,it=l+v/2<<0,y=s[r].color?s[r].color:h._colorSet[0],et=Math.round(Math.max(1,.15*v)),rt=0==et%2?0:.5,bt=s[r].whiskerColor?s[r].whiskerColor:s[r].color?h.whiskerColor?h.whiskerColor:s[r].color:h.whiskerColor?h.whiskerColor:y,ot="number"==typeof s[r].whiskerThickness?s[r].whiskerThickness:"number"==typeof h.options.whiskerThickness?h.whiskerThickness:et,ti=s[r].whiskerDashType?s[r].whiskerDashType:h.whiskerDashType,p=t(s[r].whiskerLength)?t(h.options.whiskerLength)?v:h.whiskerLength:s[r].whiskerLength,p="number"==typeof p?0>=p?0:p>=v?v:p:"string"==typeof p?parseInt(p)*v/100>v?v:parseInt(p)*v/100:v,ut=1==Math.round(ot)%2?.5:0,kt=s[r].stemColor?s[r].stemColor:s[r].color?h.stemColor?h.stemColor:s[r].color:h.stemColor?h.stemColor:y,st="number"==typeof s[r].stemThickness?s[r].stemThickness:"number"==typeof h.options.stemThickness?h.stemThickness:et,ft=1==Math.round(st)%2?.5:0,ii=s[r].stemDashType?s[r].stemDashType:h.stemDashType,dt=s[r].lineColor?s[r].lineColor:s[r].color?h.lineColor?h.lineColor:s[r].color:h.lineColor?h.lineColor:y,ct="number"==typeof s[r].lineThickness?s[r].lineThickness:"number"==typeof h.options.lineThickness?h.lineThickness:et,ri=s[r].lineDashType?s[r].lineDashType:h.lineDashType,gt=1==Math.round(ct)%2?.5:0,ui=h.upperBoxColor,fi=h.lowerBoxColor,ni=t(h.options.fillOpacity)?1:h.fillOpacity,pt=h.dataPointIds[r];this._eventManager.objectMap[pt]={id:pt,objectType:"dataPoint",dataSeriesIndex:wt,dataPointIndex:r,x1:nt,y1:b,x2:it,y2:d,x3:l,y3:g,x4:l,y4:k,y5:tt,borderThickness:et,color:y,stemThickness:st,stemColor:kt,whiskerThickness:ot,whiskerLength:p,whiskerColor:bt,lineThickness:ct,lineColor:dt};o.save();0<st&&(o.beginPath(),o.strokeStyle=kt,o.lineWidth=st,o.setLineDash&&o.setLineDash(u(ii,st)),o.moveTo(l-ft,d),o.lineTo(l-ft,b),o.stroke(),o.moveTo(l-ft,k),o.lineTo(l-ft,g),o.stroke());o.restore();c.lineWidth=Math.max(et,4);o.beginPath();a(o,nt,Math.min(tt,d),it,Math.max(d,tt),fi,0,y,at?ht:!1,at?!1:ht,!1,!1,ni);o.beginPath();a(o,nt,Math.min(g,tt),it,Math.max(tt,g),ui,0,y,at?!1:ht,at?ht:!1,!1,!1,ni);o.beginPath();o.lineWidth=et;o.strokeStyle=y;o.rect(nt-rt,Math.min(d,g)-rt,it-nt+2*rt,Math.max(d,g)-Math.min(d,g)+2*rt);o.stroke();o.save();0<ct&&(o.beginPath(),o.globalAlpha=1,o.setLineDash&&o.setLineDash(u(ri,ct)),o.strokeStyle=dt,o.lineWidth=ct,o.moveTo(nt,tt-gt),o.lineTo(it,tt-gt),o.stroke());o.restore();o.save();0<ot&&(o.beginPath(),o.setLineDash&&o.setLineDash(u(ti,ot)),o.strokeStyle=bt,o.lineWidth=ot,o.moveTo(l-p/2<<0,k-ut),o.lineTo(l+p/2<<0,k-ut),o.stroke(),o.moveTo(l-p/2<<0,b+ut),o.lineTo(l+p/2<<0,b+ut),o.stroke());o.restore();n&&(y=e(pt),c.strokeStyle=y,c.lineWidth=st,0<st&&(c.moveTo(l-rt-ft,d),c.lineTo(l-rt-ft,Math.max(b,k)),c.stroke(),c.moveTo(l-rt-ft,Math.min(b,k)),c.lineTo(l-rt-ft,g),c.stroke()),a(c,nt,Math.max(d,g),it,Math.min(d,g),y,0,null,!1,!1,!1,!1),0<ot&&(c.beginPath(),c.lineWidth=ot,c.moveTo(l+p/2,k-ut),c.lineTo(l-p/2,k-ut),c.stroke(),c.moveTo(l+p/2,b+ut),c.lineTo(l-p/2,b+ut),c.stroke()));(s[r].indexLabel||h.indexLabel||s[r].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:h.type,dataPoint:s[r],dataSeries:h,point:{x:nt+(it-nt)/2,y:i.axisY.reversed?b:k},direction:1,bounds:{x1:nt,y1:Math.min(b,k),x2:it,y2:Math.max(b,k)},color:y})}}return n&&(vt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",i.axisX.maskCanvas&&o.drawImage(i.axisX.maskCanvas,0,0,this.width,this.height),i.axisY.maskCanvas&&o.drawImage(i.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(w.x1,w.y1,w.width,w.height),c.restore()),o.restore(),{source:vt,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderRangeColumn=function(i){var g=i.targetCanvasCtx||this.plotArea.ctx,v=n?this._preRenderCtx:g,s,b,nt,r,k;if(!(0>=i.dataSeriesIndexes.length)){var p=null,h=this.plotArea,r=0,o,c,d,r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(o=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width,s=i.axisX.dataInfo.minDiff,isFinite(s)||(s=.3*Math.abs(i.axisX.range)),s=this.options.dataPointWidth?this.dataPointWidth:.9*(h.width*(i.axisX.logarithmic?Math.log(s)/Math.log(i.axisX.range):Math.abs(s)/Math.abs(i.axisX.range))/i.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&r>o&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,o)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o<r&&(o=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),s<r&&(s=r),s>o&&(s=o),v.save(),n&&this._eventManager.ghostCtx.save(),v.beginPath(),v.rect(h.x1,h.y1,h.width,h.height),v.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.clip()),b=0;b<i.dataSeriesIndexes.length;b++){var tt=i.dataSeriesIndexes[b],y=this.data[tt],u=y.dataPoints;if(0<u.length)for(nt=5<s&&y.bevelEnabled?!0:!1,r=0;r<u.length;r++)if(d=u[r].getTime?u[r].x.getTime():u[r].x,!(d<i.axisX.dataInfo.viewPortMin||d>i.axisX.dataInfo.viewPortMax)&&!t(u[r].y)&&u[r].y.length&&"number"==typeof u[r].y[0]&&"number"==typeof u[r].y[1]){p=i.axisX.convertValueToPixel(d);o=i.axisY.convertValueToPixel(u[r].y[0]);c=i.axisY.convertValueToPixel(u[r].y[1]);var l=i.axisX.reversed?p+i.plotType.totalDataSeries*s/2-(i.previousDataSeriesCount+b)*s<<0:p-i.plotType.totalDataSeries*s/2+(i.previousDataSeriesCount+b)*s<<0,w=i.axisX.reversed?l-s<<0:l+s<<0,p=u[r].color?u[r].color:y._colorSet[r%y._colorSet.length];o>c&&(k=o,o=c,c=k);k=y.dataPointIds[r];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:tt,dataPointIndex:r,x1:l,y1:o,x2:w,y2:c};a(v,l,o,w,c,p,0,p,nt,nt,!1,!1,y.fillOpacity);p=e(k);n&&a(this._eventManager.ghostCtx,l,o,w,c,p,0,null,!1,!1,!1,!1);(u[r].indexLabel||y.indexLabel||u[r].indexLabelFormatter||y.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[r],dataSeries:y,indexKeyword:0,point:{x:l+(w-l)/2,y:u[r].y[1]>=u[r].y[0]?c:o},direction:u[r].y[1]>=u[r].y[0]?-1:1,bounds:{x1:l,y1:Math.min(o,c),x2:w,y2:Math.max(o,c)},color:p}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[r],dataSeries:y,indexKeyword:1,point:{x:l+(w-l)/2,y:u[r].y[1]>=u[r].y[0]?o:c},direction:u[r].y[1]>=u[r].y[0]?1:-1,bounds:{x1:l,y1:Math.min(o,c),x2:w,y2:Math.max(o,c)},color:p}))}}return n&&(g.drawImage(this._preRenderCanvas,0,0,this.width,this.height),v.globalCompositeOperation="source-atop",i.axisX.maskCanvas&&v.drawImage(i.axisX.maskCanvas,0,0,this.width,this.height),i.axisY.maskCanvas&&v.drawImage(i.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),v.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),v.restore(),{source:g,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderError=function(i){var ut=i.targetCanvasCtx||this.plotArea.ctx,k=n?this._preRenderCtx:ut,s=i.axisY._position?"left"===i.axisY._position||"right"===i.axisY._position?!1:!0:!1,d,e,rt,ht,r,v,y,g,p;if(!(0>=i.dataSeriesIndexes.length)){var v=null,ot=!1,w=this.plotArea,r=0,ft,et,h,l,c,a,tt,it=i.axisX.dataInfo.minDiff;for(isFinite(it)||(it=.3*Math.abs(i.axisX.range)),k.save(),n&&this._eventManager.ghostCtx.save(),k.beginPath(),k.rect(w.x1,w.y1,w.width,w.height),k.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(w.x1,w.y1,w.width,w.height),this._eventManager.ghostCtx.clip()),d=0,e=0;e<this.data.length;e++)!this.data[e].type.match(/(bar|column)/ig)||!this.data[e].visible||this.data[e].type.match(/(stacked)/ig)&&d||d++;for(rt=0;rt<i.dataSeriesIndexes.length;rt++){var st=i.dataSeriesIndexes[rt],o=this.data[st],u=o.dataPoints,b=t(o._linkedSeries)?!1:o._linkedSeries.type.match(/(bar|column)/ig)&&o._linkedSeries.visible?!0:!1,nt=0;if(b)for(v=o._linkedSeries.id,e=0;e<v;e++)!this.data[e].type.match(/(bar|column)/ig)||!this.data[e].visible||this.data[e].type.match(/(stacked)/ig)&&nt||(this.data[e].type.match(/(range)/ig)&&(ot=!0),nt++);if(v=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:s?Math.min(.15*this.height,.9*(this.plotArea.height/(b?d:1)))<<0:.3*this.width,ot&&(r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:s?Math.min(.15*this.height,.9*(this.plotArea.height/(b?d:1)))<<0:.03*this.width),e=this.options.dataPointWidth?this.dataPointWidth:.9*((s?w.height:w.width)*(i.axisX.logarithmic?Math.log(it)/Math.log(i.axisX.range):Math.abs(it)/Math.abs(i.axisX.range))/(b?d:1))<<0,this.dataPointMaxWidth&&v>r&&(v=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,r)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&r<v&&(r=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,v)),e<v&&(e=v),e>r&&(e=r),0<u.length)for(ht=o._colorSet,r=0;r<u.length;r++)v=o.lineColor=o.options.color?o.options.color:ht[0],y={color:u[r].whiskerColor?u[r].whiskerColor:u[r].color?o.whiskerColor?o.whiskerColor:u[r].color:o.whiskerColor?o.whiskerColor:v,thickness:t(u[r].whiskerThickness)?o.whiskerThickness:u[r].whiskerThickness,dashType:u[r].whiskerDashType?u[r].whiskerDashType:o.whiskerDashType,length:t(u[r].whiskerLength)?t(o.options.whiskerLength)?e:o.options.whiskerLength:u[r].whiskerLength,trimLength:t(u[r].whiskerLength)?t(o.options.whiskerLength)?50:0:0},y.length="number"==typeof y.length?0>=y.length?0:y.length>=e?e:y.length:"string"==typeof y.length?parseInt(y.length)*e/100>e?e:parseInt(y.length)*e/100>e:e,y.thickness="number"==typeof y.thickness?0>y.thickness?0:Math.round(y.thickness):2,g={color:u[r].stemColor?u[r].stemColor:u[r].color?o.stemColor?o.stemColor:u[r].color:o.stemColor?o.stemColor:v,thickness:u[r].stemThickness?u[r].stemThickness:o.stemThickness,dashType:u[r].stemDashType?u[r].stemDashType:o.stemDashType},g.thickness="number"==typeof g.thickness?0>g.thickness?0:Math.round(g.thickness):2,tt=u[r].getTime?u[r].x.getTime():u[r].x,tt<i.axisX.dataInfo.viewPortMin||tt>i.axisX.dataInfo.viewPortMax||t(u[r].y)||!u[r].y.length||"number"!=typeof u[r].y[0]||"number"!=typeof u[r].y[1]||(p=i.axisX.convertValueToPixel(tt),s?et=p:ft=p,p=i.axisY.convertValueToPixel(u[r].y[0]),s?h=p:c=p,p=i.axisY.convertValueToPixel(u[r].y[1]),s?l=p:a=p,s?(c=i.axisX.reversed?et+(b?d:1)*e/2-(b?nt-1:0)*e<<0:et-(b?d:1)*e/2+(b?nt-1:0)*e<<0,a=i.axisX.reversed?c-e<<0:c+e<<0):(h=i.axisX.reversed?ft+(b?d:1)*e/2-(b?nt-1:0)*e<<0:ft-(b?d:1)*e/2+(b?nt-1:0)*e<<0,l=i.axisX.reversed?h-e<<0:h+e<<0),!s&&c>a&&(p=c,c=a,a=p),s&&h>l&&(p=h,h=l,l=p),p=o.dataPointIds[r],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:st,dataPointIndex:r,x1:Math.min(h,l),y1:Math.min(c,a),x2:Math.max(l,h),y2:Math.max(a,c),isXYSwapped:s,stemProperties:g,whiskerProperties:y},ti(k,Math.min(h,l),Math.min(c,a),Math.max(l,h),Math.max(a,c),v,y,g,s),n&&ti(this._eventManager.ghostCtx,h,c,l,a,v,y,g,s),(u[r].indexLabel||o.indexLabel||u[r].indexLabelFormatter||o.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:u[r],dataSeries:o,indexKeyword:0,point:{x:s?u[r].y[1]>=u[r].y[0]?h:l:h+(l-h)/2,y:s?c+(a-c)/2:u[r].y[1]>=u[r].y[0]?a:c},direction:u[r].y[1]>=u[r].y[0]?-1:1,bounds:{x1:s?Math.min(h,l):h,y1:s?c:Math.min(c,a),x2:s?Math.max(h,l):l,y2:s?a:Math.max(c,a)},color:v,axisSwapped:s}),this._indexLabels.push({chartType:"error",dataPoint:u[r],dataSeries:o,indexKeyword:1,point:{x:s?u[r].y[1]>=u[r].y[0]?l:h:h+(l-h)/2,y:s?c+(a-c)/2:u[r].y[1]>=u[r].y[0]?c:a},direction:u[r].y[1]>=u[r].y[0]?1:-1,bounds:{x1:s?Math.min(h,l):h,y1:s?c:Math.min(c,a),x2:s?Math.max(h,l):l,y2:s?a:Math.max(c,a)},color:v,axisSwapped:s})))}return n&&(ut.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.globalCompositeOperation="source-atop",i.axisX.maskCanvas&&k.drawImage(i.axisX.maskCanvas,0,0,this.width,this.height),i.axisY.maskCanvas&&k.drawImage(i.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),k.clearRect(w.x1,w.y1,w.width,w.height),this._eventManager.ghostCtx.restore()),k.restore(),{source:ut,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderRangeBar=function(i){var d=i.targetCanvasCtx||this.plotArea.ctx,y=n?this._preRenderCtx:d,s,b,nt,w;if(!(0>=i.dataSeriesIndexes.length)){var v=null,c=this.plotArea,r=0,o,l,h,k,r=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(o=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/i.plotType.totalDataSeries))<<0,s=i.axisX.dataInfo.minDiff,isFinite(s)||(s=.3*Math.abs(i.axisX.range)),s=this.options.dataPointWidth?this.dataPointWidth:.9*(c.height*(i.axisX.logarithmic?Math.log(s)/Math.log(i.axisX.range):Math.abs(s)/Math.abs(i.axisX.range))/i.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&r>o&&(r=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,o)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o<r&&(o=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,r)),s<r&&(s=r),s>o&&(s=o),y.save(),n&&this._eventManager.ghostCtx.save(),y.beginPath(),y.rect(c.x1,c.y1,c.width,c.height),y.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.clip()),b=0;b<i.dataSeriesIndexes.length;b++){var g=i.dataSeriesIndexes[b],p=this.data[g],u=p.dataPoints;if(0<u.length)for(nt=5<s&&p.bevelEnabled?!0:!1,y.strokeStyle="#4572A7 ",r=0;r<u.length;r++)(k=u[r].getTime?u[r].x.getTime():u[r].x,k<i.axisX.dataInfo.viewPortMin||k>i.axisX.dataInfo.viewPortMax||t(u[r].y)||!u[r].y.length||"number"!=typeof u[r].y[0]||"number"!=typeof u[r].y[1])||(o=i.axisY.convertValueToPixel(u[r].y[0]),l=i.axisY.convertValueToPixel(u[r].y[1]),h=i.axisX.convertValueToPixel(k),h=i.axisX.reversed?h+i.plotType.totalDataSeries*s/2-(i.previousDataSeriesCount+b)*s<<0:h-i.plotType.totalDataSeries*s/2+(i.previousDataSeriesCount+b)*s<<0,w=i.axisX.reversed?h-s<<0:h+s<<0,o>l&&(v=o,o=l,l=v),v=u[r].color?u[r].color:p._colorSet[r%p._colorSet.length],a(y,o,h,l,w,v,0,null,nt,!1,!1,!1,p.fillOpacity),v=p.dataPointIds[r],this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:r,x1:o,y1:h,x2:l,y2:w},v=e(v),n&&a(this._eventManager.ghostCtx,o,h,l,w,v,0,null,!1,!1,!1,!1),(u[r].indexLabel||p.indexLabel||u[r].indexLabelFormatter||p.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:u[r],dataSeries:p,indexKeyword:0,point:{x:u[r].y[1]>=u[r].y[0]?o:l,y:h+(w-h)/2},direction:u[r].y[1]>=u[r].y[0]?-1:1,bounds:{x1:Math.min(o,l),y1:h,x2:Math.max(o,l),y2:w},color:v}),this._indexLabels.push({chartType:"rangeBar",dataPoint:u[r],dataSeries:p,indexKeyword:1,point:{x:u[r].y[1]>=u[r].y[0]?l:o,y:h+(w-h)/2},direction:u[r].y[1]>=u[r].y[0]?1:-1,bounds:{x1:Math.min(o,l),y1:h,x2:Math.max(o,l),y2:w},color:v})))}return n&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),y.globalCompositeOperation="source-atop",i.axisX.maskCanvas&&y.drawImage(i.axisX.maskCanvas,0,0,this.width,this.height),i.axisY.maskCanvas&&y.drawImage(i.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),y.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),y.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},i.prototype.renderRangeArea=function(t){function tt(){var n,t;if(ct){for(n=null,0<o.lineThickness&&i.stroke(),t=c.length-1;0<=t;t--)n=c[t],i.lineTo(n.x,n.y),a.lineTo(n.x,n.y);if(i.closePath(),i.globalAlpha=o.fillOpacity,i.fill(),i.globalAlpha=1,a.fill(),0<o.lineThickness){for(i.beginPath(),i.moveTo(n.x,n.y),t=0;t<c.length;t++)n=c[t],i.lineTo(n.x,n.y);i.stroke()}i.beginPath();i.moveTo(h,v);a.beginPath();a.moveTo(h,v);ct={x:h,y:v};c=[];c.push({x:h,y:b})}}var st=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:st,it,d,g,p,nt;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx,w=[],y=this.plotArea;for(i.save(),n&&a.save(),i.beginPath(),i.rect(y.x1,y.y1,y.width,y.height),i.clip(),n&&(a.beginPath(),a.rect(y.x1,y.y1,y.width,y.height),a.clip()),it=0;it<t.dataSeriesIndexes.length;it++){var c=[],ht=t.dataSeriesIndexes[it],o=this.data[ht],s=o.dataPoints,w=o.id;this._eventManager.objectMap[w]={objectType:"dataSeries",dataSeriesIndex:ht};w=e(w);a.fillStyle=w;var w=[],rt=!0,r=0,h,v,b,k,ct=null;if(0<s.length){var ut=o._colorSet[r%o._colorSet.length],ft=o.lineColor=o.options.lineColor||ut,et=ft;if(i.fillStyle=ut,i.strokeStyle=ft,i.lineWidth=o.lineThickness,d="solid",i.setLineDash){var lt=u(o.nullDataLineDashType,o.lineThickness),d=o.lineDashType,ot=u(d,o.lineThickness);i.setLineDash(ot)}for(g=!0;r<s.length;r++)(k=s[r].x.getTime?s[r].x.getTime():s[r].x,k<t.axisX.dataInfo.viewPortMin||k>t.axisX.dataInfo.viewPortMax&&(!o.connectNullData||!g))||(null!==s[r].y&&s[r].y.length&&"number"==typeof s[r].y[0]&&"number"==typeof s[r].y[1]?(h=t.axisX.convertValueToPixel(k),v=t.axisY.convertValueToPixel(s[r].y[0]),b=t.axisY.convertValueToPixel(s[r].y[1]),rt||g?(o.connectNullData&&!rt?(i.setLineDash&&(o.options.nullDataLineDashType||d===o.lineDashType&&o.lineDashType!==o.nullDataLineDashType)&&(c[c.length-1].newLineDashArray=ot,d=o.nullDataLineDashType,i.setLineDash(lt)),i.lineTo(h,v),n&&a.lineTo(h,v),c.push({x:h,y:b})):(i.beginPath(),i.moveTo(h,v),ct={x:h,y:v},c=[],c.push({x:h,y:b}),n&&(a.beginPath(),a.moveTo(h,v))),g=rt=!1):(i.lineTo(h,v),c.push({x:h,y:b}),n&&a.lineTo(h,v),0==r%250&&tt()),k=o.dataPointIds[r],this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:ht,dataPointIndex:r,x1:h,y1:v,y2:b},r<s.length-1&&(et!==(s[r].lineColor||ft)||d!==(s[r].lineDashType||o.lineDashType))&&(tt(),et=s[r].lineColor||ft,c[c.length-1].newStrokeStyle=et,i.strokeStyle=et,i.setLineDash&&(s[r].lineDashType?(d=s[r].lineDashType,c[c.length-1].newLineDashArray=u(d,o.lineThickness),i.setLineDash(c[c.length-1].newLineDashArray)):(d=o.lineDashType,c[c.length-1].newLineDashArray=ot,i.setLineDash(ot)))),0!==s[r].markerSize&&(0<s[r].markerSize||0<o.markerSize)&&(p=o.getMarkerProperties(r,h,b,i),w.push(p),nt=e(k),n&&w.push({x:h,y:b,ctx:a,type:p.type,size:p.size,color:nt,borderColor:nt,borderThickness:p.borderThickness}),p=o.getMarkerProperties(r,h,v,i),w.push(p),nt=e(k),n&&w.push({x:h,y:v,ctx:a,type:p.type,size:p.size,color:nt,borderColor:nt,borderThickness:p.borderThickness})),(s[r].indexLabel||o.indexLabel||s[r].indexLabelFormatter||o.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:s[r],dataSeries:o,indexKeyword:0,point:{x:h,y:v},direction:s[r].y[0]>s[r].y[1]===t.axisY.reversed?-1:1,color:ut}),this._indexLabels.push({chartType:"rangeArea",dataPoint:s[r],dataSeries:o,indexKeyword:1,point:{x:h,y:b},direction:s[r].y[0]>s[r].y[1]===t.axisY.reversed?1:-1,color:ut}))):(g||rt||tt(),g=!0));tt();l.drawMarkers(w)}}return n&&(st.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(y.x1,y.y1,y.width,y.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:st,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderRangeSplineArea=function(t){function ht(t,r){var u=ot(h,2),f,e;if(0<u.length){if(0<o.lineThickness){for(i.strokeStyle=r,i.setLineDash&&i.setLineDash(t),i.beginPath(),i.moveTo(u[0].x,u[0].y),f=0;f<u.length-3;f+=3)(u[f].newStrokeStyle||u[f].newLineDashArray)&&(i.stroke(),i.beginPath(),i.moveTo(u[f].x,u[f].y),u[f].newStrokeStyle&&(i.strokeStyle=u[f].newStrokeStyle),u[f].newLineDashArray&&i.setLineDash(u[f].newLineDashArray)),i.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y);i.stroke()}for(i.beginPath(),i.moveTo(u[0].x,u[0].y),n&&(a.beginPath(),a.moveTo(u[0].x,u[0].y)),f=0;f<u.length-3;f+=3)i.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y),n&&a.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y);for(u=ot(b,2),i.lineTo(b[b.length-1].x,b[b.length-1].y),f=u.length-1;2<f;f-=3)i.bezierCurveTo(u[f-1].x,u[f-1].y,u[f-2].x,u[f-2].y,u[f-3].x,u[f-3].y),n&&a.bezierCurveTo(u[f-1].x,u[f-1].y,u[f-2].x,u[f-2].y,u[f-3].x,u[f-3].y);if(i.closePath(),i.globalAlpha=o.fillOpacity,i.fill(),n&&(a.closePath(),a.fill()),i.globalAlpha=1,0<o.lineThickness){for(i.strokeStyle=r,i.setLineDash&&i.setLineDash(t),i.beginPath(),i.moveTo(u[0].x,u[0].y),e=f=0;f<u.length-3;f+=3,e++)(h[e].newStrokeStyle||h[e].newLineDashArray)&&(i.stroke(),i.beginPath(),i.moveTo(u[f].x,u[f].y),h[e].newStrokeStyle&&(i.strokeStyle=h[e].newStrokeStyle),h[e].newLineDashArray&&i.setLineDash(h[e].newLineDashArray)),i.bezierCurveTo(u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y,u[f+3].x,u[f+3].y);i.stroke()}i.beginPath()}}var ft=t.targetCanvasCtx||this.plotArea.ctx,i=n?this._preRenderCtx:ft,it,ut,ct,k,tt,p,g;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx,w=[],v=this.plotArea;for(i.save(),n&&a.save(),i.beginPath(),i.rect(v.x1,v.y1,v.width,v.height),i.clip(),n&&(a.beginPath(),a.rect(v.x1,v.y1,v.width,v.height),a.clip()),it=0;it<t.dataSeriesIndexes.length;it++){var et=t.dataSeriesIndexes[it],o=this.data[et],s=o.dataPoints,w=o.id;this._eventManager.objectMap[w]={objectType:"dataSeries",dataSeriesIndex:et};w=e(w);a.fillStyle=w;var w=[],r=0,c,y,d,h=[],b=[];if(0<s.length){var rt=o._colorSet[r%o._colorSet.length],nt=o.lineColor=o.options.lineColor||rt,st=nt;for(i.fillStyle=rt,i.lineWidth=o.lineThickness,k="solid",i.setLineDash&&(ct=u(o.nullDataLineDashType,o.lineThickness),k=o.lineDashType,ut=u(k,o.lineThickness)),y=!1;r<s.length;r++)(c=s[r].x.getTime?s[r].x.getTime():s[r].x,c<t.axisX.dataInfo.viewPortMin||c>t.axisX.dataInfo.viewPortMax&&(!o.connectNullData||!y))||(null!==s[r].y&&s[r].y.length&&"number"==typeof s[r].y[0]&&"number"==typeof s[r].y[1]?(c=t.axisX.convertValueToPixel(c),y=t.axisY.convertValueToPixel(s[r].y[0]),d=t.axisY.convertValueToPixel(s[r].y[1]),tt=o.dataPointIds[r],this._eventManager.objectMap[tt]={id:tt,objectType:"dataPoint",dataSeriesIndex:et,dataPointIndex:r,x1:c,y1:y,y2:d},h[h.length]={x:c,y:y},b[b.length]={x:c,y:d},r<s.length-1&&(st!==(s[r].lineColor||nt)||k!==(s[r].lineDashType||o.lineDashType))&&(st=s[r].lineColor||nt,h[h.length-1].newStrokeStyle=st,i.setLineDash&&(s[r].lineDashType?(k=s[r].lineDashType,h[h.length-1].newLineDashArray=u(k,o.lineThickness)):(k=o.lineDashType,h[h.length-1].newLineDashArray=ut))),0!==s[r].markerSize&&(0<s[r].markerSize||0<o.markerSize)&&(p=o.getMarkerProperties(r,c,y,i),w.push(p),g=e(tt),n&&w.push({x:c,y:y,ctx:a,type:p.type,size:p.size,color:g,borderColor:g,borderThickness:p.borderThickness}),p=o.getMarkerProperties(r,c,d,i),w.push(p),g=e(tt),n&&w.push({x:c,y:d,ctx:a,type:p.type,size:p.size,color:g,borderColor:g,borderThickness:p.borderThickness})),(s[r].indexLabel||o.indexLabel||s[r].indexLabelFormatter||o.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:s[r],dataSeries:o,indexKeyword:0,point:{x:c,y:y},direction:s[r].y[0]<=s[r].y[1]?-1:1,color:rt}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:s[r],dataSeries:o,indexKeyword:1,point:{x:c,y:d},direction:s[r].y[0]<=s[r].y[1]?1:-1,color:rt})),y=!1):(0<r&&!y&&(o.connectNullData?i.setLineDash&&0<h.length&&(o.options.nullDataLineDashType||!s[r-1].lineDashType)&&(h[h.length-1].newLineDashArray=ct,k=o.nullDataLineDashType):(ht(ut,nt),h=[],b=[])),y=!0));ht(ut,nt);l.drawMarkers(w)}}return n&&(ft.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:ft,dest:this.plotArea.ctx,animationCallback:f.xClipAnimation,easingFunction:f.easing.linear,animationBase:0}}},i.prototype.renderWaterfall=function(t){var rt=t.targetCanvasCtx||this.plotArea.ctx,h=n?this._preRenderCtx:rt,c,d,b,g,ct,k,ft,w;if(!(0>=t.dataSeriesIndexes.length)){var tt=this._eventManager.ghostCtx,p=null,v=this.plotArea,i=0,y,s,l,et,ot=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),i=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;for(s=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/t.plotType.totalDataSeries))<<0,c=t.axisX.dataInfo.minDiff,isFinite(c)||(c=.3*Math.abs(t.axisX.range)),c=this.options.dataPointWidth?this.dataPointWidth:.6*(v.width*(t.axisX.logarithmic?Math.log(c)/Math.log(t.axisX.range):Math.abs(c)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&i>s&&(i=Math.min(this.options.dataPointWidth?this.dataPointWidth:Infinity,s)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&s<i&&(s=Math.max(this.options.dataPointWidth?this.dataPointWidth:-Infinity,i)),c<i&&(c=i),c>s&&(c=s),h.save(),n&&this._eventManager.ghostCtx.save(),h.beginPath(),h.rect(v.x1,v.y1,v.width,v.height),h.clip(),n&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.clip()),d=0;d<t.dataSeriesIndexes.length;d++){var st=t.dataSeriesIndexes[d],r=this.data[st],o=r.dataPoints,p=r._colorSet[0];if(r.risingColor=r.options.risingColor?r.options.risingColor:p,r.fallingColor=r.options.fallingColor?r.options.fallingColor:"#e40a0a",b="number"==typeof r.options.lineThickness?Math.round(r.lineThickness):1,g=1==Math.round(b)%2?-.5:0,0<o.length)for(var ht=5<c&&r.bevelEnabled?!0:!1,nt=!1,it=null,ut=null,i=0;i<o.length;i++)(et=o[i].getTime?o[i].x.getTime():o[i].x,"number"!=typeof o[i].y)?(0<i&&!nt&&r.connectNullData&&(ct=r.options.nullDataLineDashType||!o[i-1].lineDashType?r.nullDataLineDashType:o[i-1].lineDashType),nt=!0):(y=t.axisX.convertValueToPixel(et),s=0===r.dataPointEOs[i].cumulativeSum?ot:t.axisY.convertValueToPixel(r.dataPointEOs[i].cumulativeSum),l=0===r.dataPointEOs[i].cumulativeSumYStartValue?ot:t.axisY.convertValueToPixel(r.dataPointEOs[i].cumulativeSumYStartValue),y=t.axisX.reversed?y+t.plotType.totalDataSeries*c/2-(t.previousDataSeriesCount+d)*c<<0:y-t.plotType.totalDataSeries*c/2+(t.previousDataSeriesCount+d)*c<<0,k=t.axisX.reversed?y-c<<0:y+c<<0,s>l&&(p=s,s=l,l=p),t.axisY.reversed&&(p=s,s=l,l=p),p=r.dataPointIds[i],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:st,dataPointIndex:i,x1:y,y1:s,x2:k,y2:l},w=o[i].color?o[i].color:0<o[i].y?r.risingColor:r.fallingColor,a(h,y,s,k,l,w,0,w,ht,ht,!1,!1,r.fillOpacity),p=e(p),n&&a(this._eventManager.ghostCtx,y,s,k,l,p,0,null,!1,!1,!1,!1),w=y,ft="undefined"!=typeof o[i].isIntermediateSum&&!0===o[i].isIntermediateSum||"undefined"!=typeof o[i].isCumulativeSum&&!0===o[i].isCumulativeSum?0<o[i].y?s:l:0<o[i].y?l:s,0<i&&it&&(!nt||r.connectNullData)&&(nt&&h.setLineDash&&h.setLineDash(u(ct,b)),h.beginPath(),h.moveTo(it,ut-g),h.lineTo(w,ft-g),0<b&&h.stroke(),n&&(tt.beginPath(),tt.moveTo(it,ut-g),tt.lineTo(w,ft-g),0<b&&tt.stroke())),nt=!1,it=k,ut=0<o[i].y?s:l,w=o[i].lineDashType?o[i].lineDashType:r.options.lineDashType?r.options.lineDashType:"shortDash",h.strokeStyle=o[i].lineColor?o[i].lineColor:r.options.lineColor?r.options.lineColor:"#9e9e9e",h.lineWidth=b,h.setLineDash&&(w=u(w,b),h.setLineDash(w)),(o[i].indexLabel||r.indexLabel||o[i].indexLabelFormatter||r.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:o[i],dataSeries:r,point:{x:y+(k-y)/2,y:0<=o[i].y?s:l},direction:0>o[i].y===t.axisY.reversed?1:-1,bounds:{x1:y,y1:Math.min(s,l),x2:k,y2:Math.max(s,l)},color:p}))}return n&&(rt.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&h.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&h.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),h.clearRect(v.x1,v.y1,v.width,v.height),this._eventManager.ghostCtx.restore()),h.restore(),{source:rt,dest:this.plotArea.ctx,animationCallback:f.fadeInAnimation,easingFunction:f.easing.easeInQuad,animationBase:0}}},wt=function(t,i,r,u,f,e,o,s,h){if(!(0>r)){if("undefined"==typeof s&&(s=1),!n){var c=Number((o%(2*Math.PI)).toFixed(8));Number((e%(2*Math.PI)).toFixed(8))===c&&(o-=.0001)}t.save();t.globalAlpha=s;"pie"===f?(t.beginPath(),t.moveTo(i.x,i.y),t.arc(i.x,i.y,r,e,o,!1),t.fillStyle=u,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.fill()):"doughnut"===f&&(t.beginPath(),t.arc(i.x,i.y,r,e,o,!1),0<=h&&t.arc(i.x,i.y,h*r,o,e,!0),t.closePath(),t.fillStyle=u,t.strokeStyle="white",t.lineWidth=2,t.fill());t.globalAlpha=1;t.restore()}},i.prototype.renderPie=function(n){function ft(){var u,v;if(r&&e){for(var p=0,w=0,b=0,k=0,c=0;c<e.length;c++){u=e[c];v=r.dataPointIds[c];i[c].id=v;i[c].objectType="dataPoint";i[c].dataPointIndex=c;i[c].dataSeriesIndex=0;var n=i[c],a={percent:null,total:null},d=null,a=f.getPercentAndTotal(r,u);(r.indexLabelFormatter||u.indexLabelFormatter)&&(d={chart:f.options,dataSeries:r,dataPoint:u,total:a.total,percent:a.percent});a=u.indexLabelFormatter?u.indexLabelFormatter(d):u.indexLabel?f.replaceKeywordsWithValue(u.indexLabel,u,r,c):r.indexLabelFormatter?r.indexLabelFormatter(d):r.indexLabel?f.replaceKeywordsWithValue(r.indexLabel,u,r,c):u.label?u.label:"";f._eventManager.objectMap[v]=n;n.center={x:s.x,y:s.y};n.y=u.y;n.radius=h;n.percentInnerRadius=rt;n.indexLabelText=a;n.indexLabelPlacement=r.indexLabelPlacement;n.indexLabelLineColor=u.indexLabelLineColor?u.indexLabelLineColor:r.options.indexLabelLineColor?r.options.indexLabelLineColor:u.color?u.color:r._colorSet[c%r._colorSet.length];n.indexLabelLineThickness=t(u.indexLabelLineThickness)?r.indexLabelLineThickness:u.indexLabelLineThickness;n.indexLabelLineDashType=u.indexLabelLineDashType?u.indexLabelLineDashType:r.indexLabelLineDashType;n.indexLabelFontColor=u.indexLabelFontColor?u.indexLabelFontColor:r.indexLabelFontColor;n.indexLabelFontStyle=u.indexLabelFontStyle?u.indexLabelFontStyle:r.indexLabelFontStyle;n.indexLabelFontWeight=u.indexLabelFontWeight?u.indexLabelFontWeight:r.indexLabelFontWeight;n.indexLabelFontSize=t(u.indexLabelFontSize)?r.indexLabelFontSize:u.indexLabelFontSize;n.indexLabelFontFamily=u.indexLabelFontFamily?u.indexLabelFontFamily:r.indexLabelFontFamily;n.indexLabelBackgroundColor=u.indexLabelBackgroundColor?u.indexLabelBackgroundColor:r.options.indexLabelBackgroundColor?r.options.indexLabelBackgroundColor:r.indexLabelBackgroundColor;n.indexLabelMaxWidth=u.indexLabelMaxWidth?u.indexLabelMaxWidth:r.indexLabelMaxWidth?r.indexLabelMaxWidth:.33*o.width;n.indexLabelWrap="undefined"!=typeof u.indexLabelWrap?u.indexLabelWrap:r.indexLabelWrap;n.startAngle=0===c?r.startAngle?r.startAngle/180*Math.PI:0:i[c-1].endAngle;n.startAngle=(n.startAngle+2*Math.PI)%(2*Math.PI);n.endAngle=n.startAngle+2*Math.PI/it*Math.abs(u.y);u=(n.endAngle+n.startAngle)/2;u=(u+2*Math.PI)%(2*Math.PI);n.midAngle=u;n.midAngle>Math.PI/2-l&&n.midAngle<Math.PI/2+l?((0===p||i[b].midAngle>n.midAngle)&&(b=c),p++):n.midAngle>3*Math.PI/2-l&&n.midAngle<3*Math.PI/2+l&&((0===w||i[k].midAngle>n.midAngle)&&(k=c),w++);n.hemisphere=u>Math.PI/2&&u<=3*Math.PI/2?"left":"right";n.indexLabelTextBlock=new y(f.plotArea.ctx,{fontSize:n.indexLabelFontSize,fontFamily:n.indexLabelFontFamily,fontColor:n.indexLabelFontColor,fontStyle:n.indexLabelFontStyle,fontWeight:n.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:n.indexLabelBackgroundColor,maxWidth:n.indexLabelMaxWidth,maxHeight:n.indexLabelWrap?5*n.indexLabelFontSize:1.5*n.indexLabelFontSize,text:n.indexLabelText,padding:0,textBaseline:"top"});n.indexLabelTextBlock.measureText()}for(v=u=0,a=!1,c=0;c<e.length;c++)n=i[(b+c)%e.length],1<p&&n.midAngle>Math.PI/2-l&&n.midAngle<Math.PI/2+l&&(u<=p/2&&!a?(n.hemisphere="right",u++):(n.hemisphere="left",a=!0));for(a=!1,c=0;c<e.length;c++)n=i[(k+c)%e.length],1<w&&n.midAngle>3*Math.PI/2-l&&n.midAngle<3*Math.PI/2+l&&(v<=w/2&&!a?(n.hemisphere="left",v++):(n.hemisphere="right",a=!0))}}function ut(n){var t=f.plotArea.ctx,c,a;for(t.clearRect(o.x1,o.y1,o.width,o.height),t.fillStyle=f.backgroundColor,t.fillRect(o.x1,o.y1,o.width,o.height),t=0;t<e.length;t++)if(c=i[t].startAngle,a=i[t].endAngle,a>c){var l=.07*h*Math.cos(i[t].midAngle),v=.07*h*Math.sin(i[t].midAngle),y=!1;e[t].exploded?(1e-9<Math.abs(i[t].center.x-(s.x+l))||1e-9<Math.abs(i[t].center.y-(s.y+v)))&&(i[t].center.x=s.x+l*n,i[t].center.y=s.y+v*n,y=!0):(0<Math.abs(i[t].center.x-s.x)||0<Math.abs(i[t].center.y-s.y))&&(i[t].center.x=s.x+l*(1-n),i[t].center.y=s.y+v*(1-n),y=!0);y&&(l={},l.dataSeries=r,l.dataPoint=r.dataPoints[t],l.index=t,f.toolTip.highlightObjects([l]));wt(f.plotArea.ctx,i[t].center,i[t].radius,e[t].color?e[t].color:r._colorSet[t%r._colorSet.length],r.type,c,a,r.fillOpacity,i[t].percentInnerRadius)}for(n=f.plotArea.ctx,n.save(),n.fillStyle="black",n.strokeStyle="grey",n.textBaseline="middle",n.lineJoin="round",t=t=0;t<e.length;t++)c=i[t],c.indexLabelText&&(c.indexLabelTextBlock.y-=c.indexLabelTextBlock.height/2,a=0,a="left"===c.hemisphere?"inside"!==r.indexLabelPlacement?-(c.indexLabelTextBlock.width+p):-c.indexLabelTextBlock.width/2:"inside"!==r.indexLabelPlacement?p:-c.indexLabelTextBlock.width/2,c.indexLabelTextBlock.x+=a,c.indexLabelTextBlock.render(!0),c.indexLabelTextBlock.x-=a,c.indexLabelTextBlock.y+=c.indexLabelTextBlock.height/2,"inside"!==c.indexLabelPlacement&&0<c.indexLabelLineThickness&&(a=c.center.x+h*Math.cos(c.midAngle),l=c.center.y+h*Math.sin(c.midAngle),n.strokeStyle=c.indexLabelLineColor,n.lineWidth=c.indexLabelLineThickness,n.setLineDash&&n.setLineDash(u(c.indexLabelLineDashType,c.indexLabelLineThickness)),n.beginPath(),n.moveTo(a,l),n.lineTo(c.indexLabelTextBlock.x,c.indexLabelTextBlock.y),n.lineTo(c.indexLabelTextBlock.x+("left"===c.hemisphere?-p:p),c.indexLabelTextBlock.y),n.stroke()),n.lineJoin="miter");n.save()}function k(n,t){var i=0,i=n.indexLabelTextBlock.y-n.indexLabelTextBlock.height/2,r=n.indexLabelTextBlock.y+n.indexLabelTextBlock.height/2,u=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,f=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2;return t.indexLabelTextBlock.y>n.indexLabelTextBlock.y?u-r:i-f}function nt(n){for(var t=null,r=1;r<e.length;r++)if(t=(n+r+i.length)%i.length,i[t].hemisphere!==i[n].hemisphere){t=null;break}else if(i[t].indexLabelText&&t!==n&&(0>k(i[t],i[n])||("right"===i[n].hemisphere?i[t].indexLabelTextBlock.y>=i[n].indexLabelTextBlock.y:i[t].indexLabelTextBlock.y<=i[n].indexLabelTextBlock.y)))break;else t=null;return t}function v(n,t,r){var f;if(r=(r||0)+1,1e3<r)return 0;t=t||0;var w=0,u=s.y-1*c,o=s.y+1*c;if(0<=n&&n<e.length){if(f=i[n],0>t&&f.indexLabelTextBlock.y<u||0<t&&f.indexLabelTextBlock.y>o)return 0;var p=0,y=0,y=p=p=0;for(0>t?f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2>u&&f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2+t<u&&(t=-(u-(f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2+t))):f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2<u&&f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2+t>o&&(t=f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2+t-o),t=f.indexLabelTextBlock.y+t,u=0,u="right"===f.hemisphere?s.x+Math.sqrt(Math.pow(c,2)-Math.pow(t-s.y,2)):s.x-Math.sqrt(Math.pow(c,2)-Math.pow(t-s.y,2)),y=s.x+h*Math.cos(f.midAngle),p=s.y+h*Math.sin(f.midAngle),p=Math.sqrt(Math.pow(u-y,2)+Math.pow(t-p,2)),y=Math.acos(h/c),p=Math.acos((c*c+h*h-p*p)/(2*h*c)),t=p<y?t-f.indexLabelTextBlock.y:0,u=null,o=1;o<e.length;o++)if(u=(n-o+i.length)%i.length,i[u].hemisphere!==i[n].hemisphere){u=null;break}else if(i[u].indexLabelText&&i[u].hemisphere===i[n].hemisphere&&u!==n&&(0>k(i[u],i[n])||("right"===i[n].hemisphere?i[u].indexLabelTextBlock.y<=i[n].indexLabelTextBlock.y:i[u].indexLabelTextBlock.y>=i[n].indexLabelTextBlock.y)))break;else u=null;y=u;p=nt(n);o=u=0;0>t?(o="right"===f.hemisphere?y:p,w=t,null!==o&&(y=-t,t=f.indexLabelTextBlock.y-f.indexLabelTextBlock.height/2-(i[o].indexLabelTextBlock.y+i[o].indexLabelTextBlock.height/2),t-y<b&&(u=-y,o=v(o,u,r+1),+o.toFixed(a)>+u.toFixed(a)&&(w=t>b?-(t-b):-(y-(o-u)))))):0<t&&(o="right"===f.hemisphere?p:y,w=t,null!==o&&(y=t,t=i[o].indexLabelTextBlock.y-i[o].indexLabelTextBlock.height/2-(f.indexLabelTextBlock.y+f.indexLabelTextBlock.height/2),t-y<b&&(u=y,o=v(o,u,r+1),+o.toFixed(a)<+u.toFixed(a)&&(w=t>b?t-b:y-(u-o)))));w&&(r=f.indexLabelTextBlock.y+w,t=0,t="right"===f.hemisphere?s.x+Math.sqrt(Math.pow(c,2)-Math.pow(r-s.y,2)):s.x-Math.sqrt(Math.pow(c,2)-Math.pow(r-s.y,2)),f.midAngle>Math.PI/2-l&&f.midAngle<Math.PI/2+l?(u=(n-1+i.length)%i.length,u=i[u],n=i[(n+1+i.length)%i.length],"left"===f.hemisphere&&"right"===u.hemisphere&&t>u.indexLabelTextBlock.x?t=u.indexLabelTextBlock.x-15:"right"===f.hemisphere&&"left"===n.hemisphere&&t<n.indexLabelTextBlock.x&&(t=n.indexLabelTextBlock.x+15)):f.midAngle>3*Math.PI/2-l&&f.midAngle<3*Math.PI/2+l&&(u=(n-1+i.length)%i.length,u=i[u],n=i[(n+1+i.length)%i.length],"right"===f.hemisphere&&"left"===u.hemisphere&&t<u.indexLabelTextBlock.x?t=u.indexLabelTextBlock.x+15:"left"===f.hemisphere&&"right"===n.hemisphere&&t>n.indexLabelTextBlock.x&&(t=n.indexLabelTextBlock.x-15)),f.indexLabelTextBlock.y=r,f.indexLabelTextBlock.x=t,f.indexLabelAngle=Math.atan2(f.indexLabelTextBlock.y-s.y,f.indexLabelTextBlock.x-s.x))}return w}function d(){var u=f.plotArea.ctx,d,l,n,t,tt,w,y,ut,st;u.fillStyle="grey";u.strokeStyle="grey";u.font="16px Arial";u.textBaseline="middle";for(var ot=u=0,it=0,ft=!0,ot=0;10>ot&&(1>ot||0<it);ot++){if((r.radius||!r.radius&&"undefined"!=typeof r.innerRadius&&null!==r.innerRadius&&h-it<=g)&&(ft=!1),ft&&(h-=it),it=0,"inside"!==r.indexLabelPlacement){for(c=h*et,u=0;u<e.length;u++)n=i[u],n.indexLabelTextBlock.x=s.x+c*Math.cos(n.midAngle),n.indexLabelTextBlock.y=s.y+c*Math.sin(n.midAngle),n.indexLabelAngle=n.midAngle,n.radius=h,n.percentInnerRadius=rt;for(u=0;u<e.length;u++)if(n=i[u],t=nt(u),null!==t&&(d=i[u],l=i[t],tt=0,tt=k(d,l)-b,0>tt)){for(y=l=0,w=0;w<e.length;w++)w!==u&&i[w].hemisphere===n.hemisphere&&(i[w].indexLabelTextBlock.y<n.indexLabelTextBlock.y?l++:y++);l=tt/(l+y||1)*y;y=-1*(tt-l);ut=w=0;"right"===n.hemisphere?(w=v(u,l),y=-1*(tt-w),ut=v(t,y),+ut.toFixed(a)<+y.toFixed(a)&&+w.toFixed(a)<=+l.toFixed(a)&&v(u,-(y-ut))):(w=v(t,l),y=-1*(tt-w),ut=v(u,y),+ut.toFixed(a)<+y.toFixed(a)&&+w.toFixed(a)<=+l.toFixed(a)&&v(t,-(y-ut)))}}else for(u=0;u<e.length;u++)n=i[u],c="pie"===r.type?.7*h:.8*h,t=s.x+c*Math.cos(n.midAngle),l=s.y+c*Math.sin(n.midAngle),n.indexLabelTextBlock.x=t,n.indexLabelTextBlock.y=l;for(u=0;u<e.length;u++)(n=i[u],t=n.indexLabelTextBlock.measureText(),0!==t.height&&0!==t.width)&&(t=t=0,"right"===n.hemisphere?(t=o.x2-(n.indexLabelTextBlock.x+n.indexLabelTextBlock.width+p),t*=-1):t=o.x1-(n.indexLabelTextBlock.x-n.indexLabelTextBlock.width-p),0<t&&(!ft&&n.indexLabelText&&(l="right"===n.hemisphere?o.x2-n.indexLabelTextBlock.x:n.indexLabelTextBlock.x-o.x1,.3*n.indexLabelTextBlock.maxWidth>l?n.indexLabelText="":n.indexLabelTextBlock.maxWidth=.85*l,.3*n.indexLabelTextBlock.maxWidth<l&&(n.indexLabelTextBlock.x-="right"===n.hemisphere?2:-2)),Math.abs(n.indexLabelTextBlock.y-n.indexLabelTextBlock.height/2-s.y)<h||Math.abs(n.indexLabelTextBlock.y+n.indexLabelTextBlock.height/2-s.y)<h)&&(t/=Math.abs(Math.cos(n.indexLabelAngle)),9<t&&(t*=.3),t>it&&(it=t)),t=t=0,0<n.indexLabelAngle&&n.indexLabelAngle<Math.PI?(t=o.y2-(n.indexLabelTextBlock.y+n.indexLabelTextBlock.height/2+5),t*=-1):t=o.y1-(n.indexLabelTextBlock.y-n.indexLabelTextBlock.height/2-5),0<t&&(!ft&&n.indexLabelText&&(l=0<n.indexLabelAngle&&n.indexLabelAngle<Math.PI?-1:1,0===v(u,t*l)&&v(u,2*l)),Math.abs(n.indexLabelTextBlock.x-s.x)<h&&(t/=Math.abs(Math.sin(n.indexLabelAngle)),9<t&&(t*=.3),t>it&&(it=t))));st=function(n,t,r){for(var u=[],f=0;u.push(i[t]),t!==r;t=(t+1+e.length)%e.length);for(u.sort(function(n,t){return n.y-t.y}),t=0;t<u.length;t++)if(r=u[t],f<.7*n)f+=r.indexLabelTextBlock.height,r.indexLabelTextBlock.text="",r.indexLabelText="",r.indexLabelTextBlock.measureText();else break},function(){for(var o,n,s,t=-1,f=-1,r=0,h=!1,u=0;u<e.length;u++)if((h=!1,d=i[u],d.indexLabelText)&&(o=nt(u),null!==o)){if(n=i[o],tt=0,tt=k(d,n),s=0>tt){s=d.indexLabelTextBlock.x;var c=d.indexLabelTextBlock.y-d.indexLabelTextBlock.height/2,l=d.indexLabelTextBlock.y+d.indexLabelTextBlock.height/2,a=n.indexLabelTextBlock.y-n.indexLabelTextBlock.height/2,v=n.indexLabelTextBlock.x+n.indexLabelTextBlock.width,y=n.indexLabelTextBlock.y+n.indexLabelTextBlock.height/2;s=d.indexLabelTextBlock.x+d.indexLabelTextBlock.width<n.indexLabelTextBlock.x-p||s>v+p||c>y+p||l<a-p?!1:!0}s?(0>t&&(t=u),o!==t&&(f=o,r+=-tt),0==u%Math.max(e.length/10,3)&&(h=!0)):h=!0;h&&0<r&&0<=t&&0<=f&&(st(r,t,f),f=t=-1,r=0)}0<r&&st(r,t,f)}()}}function tt(){var t,n;if(f.plotArea.layoutManager.reset(),f.title&&(f.title.dockInsidePlotArea||"center"===f.title.horizontalAlign&&"center"===f.title.verticalAlign)&&f.title.render(),f.subtitles)for(t=0;t<f.subtitles.length;t++)n=f.subtitles[t],(n.dockInsidePlotArea||"center"===n.horizontalAlign&&"center"===n.verticalAlign)&&n.render();f.legend&&(f.legend.dockInsidePlotArea||"center"===f.legend.horizontalAlign&&"center"===f.legend.verticalAlign)&&(f.legend.setLayout(),f.legend.render())}var f=this,w,h,g,rt;if(!(0>=n.dataSeriesIndexes.length)){var r=this.data[n.dataSeriesIndexes[0]],e=r.dataPoints,p=10,o=this.plotArea,i=r.dataPointEOs,b=2,c,et=1.3,l=20/180*Math.PI,a=6,s={x:(o.x2+o.x1)/2,y:(o.y2+o.y1)/2},it=0;for(n=!1,w=0;w<e.length;w++)it+=Math.abs(e[w].y),!n&&"undefined"!=typeof e[w].indexLabel&&null!==e[w].indexLabel&&0<e[w].indexLabel.toString().length&&(n=!0),!n&&"undefined"!=typeof e[w].label&&null!==e[w].label&&0<e[w].label.toString().length&&(n=!0);0!==it&&(n=n||"undefined"!=typeof r.indexLabel&&null!==r.indexLabel&&0<r.indexLabel.toString().length,h="inside"!==r.indexLabelPlacement&&n?.75*Math.min(o.width,o.height)/2:.92*Math.min(o.width,o.height)/2,r.radius&&(h=fi(r.radius,h)),g="undefined"!=typeof r.innerRadius&&null!==r.innerRadius?fi(r.innerRadius,h):.7*h,r.radius=h,"doughnut"===r.type&&(r.innerRadius=g),rt=Math.min(g/h,(h-1)/h),this.pieDoughnutClickHandler=function(n){!f.isAnimating&&(t(n.dataSeries.explodeOnClick)||n.dataSeries.explodeOnClick)&&(n=n.dataPoint,n.exploded=n.exploded?!1:!0,1<this.dataPoints.length&&f._animator.animate(0,500,function(n){ut(n);tt()}))},ft(),d(),d(),d(),d(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(n){var t=f.plotArea.ctx,c;for(t.clearRect(o.x1,o.y1,o.width,o.height),t.fillStyle=f.backgroundColor,t.fillRect(o.x1,o.y1,o.width,o.height),n=i[0].startAngle+2*Math.PI*n,t=0;t<e.length;t++){var s=0===t?i[t].startAngle:u,u=s+(i[t].endAngle-i[t].startAngle),h=!1;if(u>n&&(u=n,h=!0),c=e[t].color?e[t].color:r._colorSet[t%r._colorSet.length],u>s&&wt(f.plotArea.ctx,i[t].center,i[t].radius,c,r.type,s,u,r.fillOpacity,i[t].percentInnerRadius),h)break}tt()},function(){f.disableToolTip=!1;f._animator.animate(0,f.animatedRender?500:0,function(n){ut(n);tt()})}))}},bt=function(n,t,i,r){"undefined"==typeof i&&(i=1);0>=Math.round(t.y4-t.y1)||(n.save(),n.globalAlpha=i,n.beginPath(),n.moveTo(Math.round(t.x1),Math.round(t.y1)),n.lineTo(Math.round(t.x2),Math.round(t.y2)),n.lineTo(Math.round(t.x3),Math.round(t.y3)),n.lineTo(Math.round(t.x4),Math.round(t.y4)),"undefined"!==t.x5&&(n.lineTo(Math.round(t.x5),Math.round(t.y5)),n.lineTo(Math.round(t.x6),Math.round(t.y6))),n.closePath(),n.fillStyle=r?r:t.color,n.fill(),n.globalAplha=1,n.restore())},i.prototype.renderFunnel=function(i){function ai(){for(var t=0,i=[],n=0;n<c.length;n++){if("undefined"==typeof c[n].y)return-1;c[n].y="number"==typeof c[n].y?c[n].y:0;t+=Math.abs(c[n].y)}if(0===t)return-1;for(n=i[0]=0;n<c.length;n++)i.push(Math.abs(c[n].y)*wt/t);return i}function vi(){var i=ii,o=ri,s=at,l=gt,r,u;r=ct;u=lt-k;l=Math.abs((u-r)*(o-i+(l-s))/2);s=gt-at;r=u-r;u=s*(u-lt);u=Math.abs(u);u=l+u;for(var l=[],a=0,f=0;f<c.length;f++){if("undefined"==typeof c[f].y)return-1;c[f].y="number"==typeof c[f].y?c[f].y:0;a+=Math.abs(c[f].y)}if(0===a)return-1;for(var h=l[0]=0,t=0,e,n,o=o-i,h=!1,f=0;f<c.length;f++)i=Math.abs(c[f].y)*u/a,h?e=0==Number(s.toFixed(3))?0:i/s:(n=ut*ut*o*o-4*Math.abs(ut)*i,0>n?(n=s,h=(o+n)*(r-t)/2,i-=h,e=r-t,t+=r-t,e+=0==n?0:i/n,t+=i/n,h=!0):(e=(Math.abs(ut)*o-Math.sqrt(n))/2,n=o-2*e/Math.abs(ut),t+=e,t>r&&(t-=e,n=s,h=(o+n)*(r-t)/2,i-=h,e=r-t,t+=r-t,e+=i/n,t+=i/n,h=!0),o=n)),l.push(e);return l}function yi(){var i,v;if(o&&c){for(var p,u,f,nt,tt,w,rt,ut,et,b,ot,st,e,h,a=[],k=[],d={percent:null,total:null},g=null,i=0;i<c.length;i++)h=s[i],h="undefined"!=typeof h.x5?(h.y2+h.y4)/2:(h.y2+h.y3)/2,h=ti(h).x2+1,a[i]=kt-h-dt;for(h=.5*dt,i=0,v=c.length-1;i<c.length||0<=v;i++,v--)u=o.reversed?c[v]:c[i],p=u.color?u.color:o.reversed?o._colorSet[(c.length-1-i)%o._colorSet.length]:o._colorSet[i%o._colorSet.length],f=u.indexLabelPlacement||o.indexLabelPlacement||"outside",nt=u.indexLabelBackgroundColor||o.indexLabelBackgroundColor||(n?"transparent":null),tt=u.indexLabelFontColor||o.indexLabelFontColor||"#979797",w=t(u.indexLabelFontSize)?o.indexLabelFontSize:u.indexLabelFontSize,rt=u.indexLabelFontStyle||o.indexLabelFontStyle||"normal",ut=u.indexLabelFontFamily||o.indexLabelFontFamily||"arial",et=u.indexLabelFontWeight||o.indexLabelFontWeight||"normal",p=u.indexLabelLineColor||o.options.indexLabelLineColor||p,b="number"==typeof u.indexLabelLineThickness?u.indexLabelLineThickness:"number"==typeof o.indexLabelLineThickness?o.indexLabelLineThickness:2,ot=u.indexLabelLineDashType||o.indexLabelLineDashType||"solid",st="undefined"!=typeof u.indexLabelWrap?u.indexLabelWrap:"undefined"!=typeof o.indexLabelWrap?o.indexLabelWrap:!0,e=o.dataPointIds[i],l._eventManager.objectMap[e]={id:e,objectType:"dataPoint",dataPointIndex:i,dataSeriesIndex:0,funnelSection:s[o.reversed?c.length-1-i:i]},"inside"===o.indexLabelPlacement&&(a[i]=i!==ht?o.reversed?s[i].x2-s[i].x1:s[i].x3-s[i].x4:s[i].x3-s[i].x6,20>a[i]&&(a[i]=i!==ht?o.reversed?s[i].x3-s[i].x4:s[i].x2-s[i].x1:s[i].x2-s[i].x1,a[i]/=2)),e=u.indexLabelMaxWidth?u.indexLabelMaxWidth:o.options.indexLabelMaxWidth?o.indexLabelMaxWidth:a[i],(e>a[i]||0>e)&&(e=a[i]),k[i]="inside"===o.indexLabelPlacement?s[i].height:!1,d=l.getPercentAndTotal(o,u),(o.indexLabelFormatter||u.indexLabelFormatter)&&(g={chart:l.options,dataSeries:o,dataPoint:u,total:d.total,percent:d.percent}),u=u.indexLabelFormatter?u.indexLabelFormatter(g):u.indexLabel?l.replaceKeywordsWithValue(u.indexLabel,u,o,i):o.indexLabelFormatter?o.indexLabelFormatter(g):o.indexLabel?l.replaceKeywordsWithValue(o.indexLabel,u,o,i):u.label?u.label:"",0>=b&&(b=0),1e3>e&&1e3-e<h&&(e+=1e3-e),it.roundRect||vt(it),f=new y(it,{fontSize:w,fontFamily:ut,fontColor:tt,fontStyle:rt,fontWeight:et,horizontalAlign:f,backgroundColor:nt,maxWidth:e,maxHeight:!1===k[i]?st?4.28571429*w:1.5*w:k[i],text:u,padding:ft}),f.measureText(),r.push({textBlock:f,id:o.reversed?v:i,isDirty:!1,lineColor:p,lineThickness:b,lineDashType:ot,height:f.height<f.maxHeight?f.height:f.maxHeight,width:f.width<f.maxWidth?f.width:f.maxWidth})}}function pi(){var i,h,t,l,f,e=[];f=!1;t=0;for(var a,u=kt-ri-dt/2,u=o.options.indexLabelMaxWidth?o.indexLabelMaxWidth>u?u:o.indexLabelMaxWidth:u,n=r.length-1;0<=n;n--)a=c[r[n].id],t=r[n],l=t.textBlock,h=(i=ot(n)<s.length?r[ot(n)]:null)?i.textBlock:null,t=t.height,i&&l.y+t+ft>h.y&&(f=!0),t=a.indexLabelMaxWidth||u,(t>u||0>t)&&(t=u),e.push(t);if(f)for(n=r.length-1;0<=n;n--)i=s[n],r[n].textBlock.maxWidth=e[e.length-(n+1)],r[n].textBlock.measureText(),r[n].textBlock.x=kt-u,t=r[n].textBlock.height<r[n].textBlock.maxHeight?r[n].textBlock.height:r[n].textBlock.maxHeight,f=r[n].textBlock.width<r[n].textBlock.maxWidth?r[n].textBlock.width:r[n].textBlock.maxWidth,r[n].height=t,r[n].width=f,t="undefined"!=typeof i.x5?(i.y2+i.y4)/2:(i.y2+i.y3)/2,r[n].textBlock.y=t-r[n].height/2,o.reversed?(r[n].textBlock.y+r[n].height>g+v&&(r[n].textBlock.y=g+v-r[n].height),r[n].textBlock.y<rt-v&&(r[n].textBlock.y=rt-v)):(r[n].textBlock.y<g-v&&(r[n].textBlock.y=g-v),r[n].textBlock.y+r[n].height>rt+v&&(r[n].textBlock.y=rt+v-r[n].height))}function si(){var t,u,i,f,n;if("inside"!==o.indexLabelPlacement)for(n=0;n<s.length;n++)0==r[n].textBlock.text.length?r[n].isDirty=!0:(t=s[n],i="undefined"!=typeof t.x5?(t.y2+t.y4)/2:(t.y2+t.y3)/2,u=o.reversed?"undefined"!=typeof t.x5?i>st?ti(i).x2+1:(t.x2+t.x3)/2+1:(t.x2+t.x3)/2+1:"undefined"!=typeof t.x5?i<st?ti(i).x2+1:(t.x4+t.x3)/2+1:(t.x2+t.x3)/2+1,r[n].textBlock.x=u+dt,r[n].textBlock.y=i-r[n].height/2,o.reversed?(r[n].textBlock.y+r[n].height>g+v&&(r[n].textBlock.y=g+v-r[n].height),r[n].textBlock.y<rt-v&&(r[n].textBlock.y=rt-v)):(r[n].textBlock.y<g-v&&(r[n].textBlock.y=g-v),r[n].textBlock.y+r[n].height>rt+v&&(r[n].textBlock.y=rt+v-r[n].height)));else for(n=0;n<s.length;n++)0==r[n].textBlock.text.length?r[n].isDirty=!0:(t=s[n],u=t.height,i=r[n].height,f=r[n].width,u>=i?(u=n!=ht?(t.x4+t.x3)/2-f/2:(t.x5+t.x4)/2-f/2,i=n!=ht?(t.y1+t.y3)/2-i/2:(t.y1+t.y4)/2-i/2,r[n].textBlock.x=u,r[n].textBlock.y=i):r[n].isDirty=!0)}function wi(){function u(n,t){var i,e,f;return 0>n||n>=r.length?0:(f=r[n].textBlock,0>t)?(t*=-1,e=pt(n),i=hi(e,n),i>=t)?(f.y-=t,t):0==n?(0<i&&(f.y-=i),i):(i+=u(e,-(t-i)),0<i&&(f.y-=i),i):(e=ot(n),i=hi(n,e),i>=t)?(f.y+=t,t):n==s.length-1?(0<i&&(f.y+=i),i):(i+=u(e,t-i),0<i&&(f.y+=i),i)}function a(){var o,l,n,t,h=0,f,u,c,i;for(t=(lt-ct+2*v)/e,f=e,c=1;c<f;c++)for(n=c*t,i=r.length-1;0<=i;i--)!r[i].isDirty&&r[i].textBlock.y<n&&r[i].textBlock.y+r[i].height>n&&(u=ot(i),!(u>=r.length-1)&&r[i].textBlock.y+r[i].height+ft>r[u].textBlock.y&&(r[i].textBlock.y=r[i].textBlock.y+r[i].height-n>n-r[i].textBlock.y?n+1:n-r[i].height-1));for(u=s.length-1;0<u;u--)if(!r[u].isDirty){if(n=pt(u),0>n&&(n=0,r[n].isDirty))break;if(r[u].textBlock.y<r[n].textBlock.y+r[n].height){for(l=l||u,t=u,f=0;r[t].textBlock.y<r[n].textBlock.y+r[n].height+ft;){if(o=o||r[t].textBlock.y+r[t].height,f+=r[t].height,f+=ft,t=n,0>=t){t=0;f+=r[t].height;break}if(n=pt(t),0>n){t=0;f+=r[t].height;break}}if(t!=u){h=r[t].textBlock.y;o-=h;o=f-o;h=y(o,l,t);break}}}return h}function y(n,t,i){var u=[],f=0,e=0;for(n=Math.abs(n);i<=t;i++)u.push(s[i]);for(u.sort(function(n,t){return n.height-t.height}),i=0;i<u.length;i++)if(t=u[i],f<n)e++,f+=r[t.id].height+ft,r[t.id].textBlock.text="",r[t.id].indexLabelText="",r[t.id].isDirty=!0,r[t.id].textBlock.measureText();else break;return e}for(var t,i,f,o,h,c,n,e=1,l=0;l<2*e;l++){for(n=r.length-1;0<=n&&!(0<=pt(n)&&pt(n),f=r[n],o=f.textBlock,c=(h=ot(n)<s.length?r[ot(n)]:null)?h.textBlock:null,t=+f.height.toFixed(6),i=+o.y.toFixed(6),!f.isDirty&&h&&i+t+ft>+c.y.toFixed(6)&&(t=o.y+t+ft-c.y,i=u(n,-t),i<t&&(0<i&&(t-=i),i=u(ot(n),t),i!=t)));n--);a()}}function hi(n,t){return(t<s.length?r[t].textBlock.y:o.reversed?g+v:rt+v)-(0>n?o.reversed?rt-v:g-v:r[n].textBlock.y+r[n].height+ft)}function ni(n,t,i){var e,h,y,l=[],p=v,r=[],u,w;if(-1!==t&&(0<=b.indexOf(t)?(h=b.indexOf(t),b.splice(h,1)):(b.push(t),b=b.sort(function(n,t){return n-t}))),0===b.length)l=fi;else for(h=v*(1!=b.length||0!=b[0]&&b[0]!=s.length-1?2:1)/bi(),u=0;u<s.length;u++){if(1==b.length&&0==b[0]){if(0===u){l.push(fi[u]);e=p;continue}}else 0===u&&(e=-1*p);l.push(fi[u]+e);(0<=b.indexOf(u)||u<s.length&&0<=b.indexOf(u+1))&&(e+=h)}y=function(){for(var t=[],n=0;n<s.length;n++)t.push(l[n]-s[n].y1);return t}();w={startTime:(new Date).getTime(),duration:i||500,easingFunction:function(n,t,i,r){return f.easing.easeOutQuart(n,t,i,r)},changeSection:function(n){for(var i,u,t=0;t<s.length;t++)i=y[t],u=s[t],i*=n,"undefined"==typeof r[t]&&(r[t]=0),0>r&&(r*=-1),u.y1+=i-r[t],u.y2+=i-r[t],u.y3+=i-r[t],u.y4+=i-r[t],u.y5&&(u.y5+=i-r[t],u.y6+=i-r[t]),r[t]=i}};n._animator.animate(0,i,function(i){var u=n.plotArea.ctx||n.ctx,r;for(oi=!0,u.clearRect(a.x1,a.y1,a.x2-a.x1,a.y2-a.y1),u.fillStyle=n.backgroundColor,u.fillRect(a.x1,a.y1,a.width,a.height),w.changeSection(i,t),r={},r.dataSeries=o,r.dataPoint=o.reversed?o.dataPoints[c.length-1-t]:o.dataPoints[t],r.index=o.reversed?c.length-1-t:t,n.toolTip.highlightObjects([r]),r=0;r<s.length;r++)bt(u,s[r],o.fillOpacity);ei(u);tt&&("inside"!==o.indexLabelPlacement?ci(u):si(),li(u));1<=i&&(oi=!1)},null,f.easing.easeOutQuart)}function bi(){for(var t=0,n=0;n<s.length-1;n++)(0<=b.indexOf(n)||0<=b.indexOf(n+1))&&t++;return t}function ci(n){for(var e,f,o,i,t=0;t<s.length;t++)i=1==r[t].lineThickness%2?.5:0,f=((s[t].y2+s[t].y4)/2<<0)+i,e=ti(f).x2-1,o=r[t].textBlock.x,i=(r[t].textBlock.y+r[t].height/2<<0)+i,r[t].isDirty||0==r[t].lineThickness||(n.strokeStyle=r[t].lineColor,n.lineWidth=r[t].lineThickness,n.setLineDash&&n.setLineDash(u(r[t].lineDashType,r[t].lineThickness)),n.beginPath(),n.moveTo(e,f),n.lineTo(o,i),n.stroke())}function pt(n){for(n-=1;-1<=n&&-1!=n&&r[n].isDirty;n--);return n}function ot(n){for(n+=1;n<=s.length&&n!=s.length&&r[n].isDirty;n++);return n}function ti(n){for(var t,i=0;i<c.length;i++)if(s[i].y1<n&&s[i].y4>n){t=s[i];break}return t?(n=t.y6?n>t.y6?t.x3+(t.x4-t.x3)/(t.y4-t.y3)*(n-t.y3):t.x2+(t.x3-t.x2)/(t.y3-t.y2)*(n-t.y2):t.x2+(t.x3-t.x2)/(t.y3-t.y2)*(n-t.y2),{x1:n,x2:n}):-1}function li(n){for(var t=0;t<s.length;t++)r[t].isDirty||(n&&(r[t].textBlock.ctx=n),r[t].textBlock.render(!0))}function ei(n){var i,t;if(l.plotArea.layoutManager.reset(),n.roundRect||vt(n),l.title&&(l.title.dockInsidePlotArea||"center"===l.title.horizontalAlign&&"center"===l.title.verticalAlign)&&(l.title.ctx=n,l.title.render()),l.subtitles)for(i=0;i<l.subtitles.length;i++)t=l.subtitles[i],(t.dockInsidePlotArea||"center"===t.horizontalAlign&&"center"===t.verticalAlign)&&(l.subtitles.ctx=n,t.render());l.legend&&(l.legend.dockInsidePlotArea||"center"===l.legend.horizontalAlign&&"center"===l.legend.verticalAlign)&&(l.legend.ctx=n,l.legend.setLayout(),l.legend.render());h.fNg&&h.fNg(l)}var l=this,k,e,dt;if(!(0>=i.dataSeriesIndexes.length)){for(var o=this.data[i.dataSeriesIndexes[0]],c=o.dataPoints,a=this.plotArea,v=.025*a.width,nt=.01*a.width,d=0,wt=a.height-2*v,p=Math.min(a.width-2*nt,2.8*a.height),tt=!1,w=0;w<c.length;w++)(!tt&&"undefined"!=typeof c[w].indexLabel&&null!==c[w].indexLabel&&0<c[w].indexLabel.toString().length&&(tt=!0),!tt&&"undefined"!=typeof c[w].label&&null!==c[w].label&&0<c[w].label.toString().length&&(tt=!0),(tt||"function"!=typeof o.indexLabelFormatter)&&"function"!=typeof c[w].indexLabelFormatter)||(tt=!0);tt=tt||"undefined"!=typeof o.indexLabel&&null!==o.indexLabel&&0<o.indexLabel.toString().length;"inside"!==o.indexLabelPlacement&&tt||(nt=(a.width-.75*p)/2);var w=a.x1+nt,kt=a.x2-nt,ct=a.y1+v,lt=a.y2-v,it=i.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(0!=o.length&&o.dataPoints&&o.visible&&0!==c.length){i=75*p/100;dt=30*(kt-i)/100;"funnel"===o.type?(k=t(o.options.neckHeight)?.35*wt:o.neckHeight,e=t(o.options.neckWidth)?.25*i:o.neckWidth,"string"==typeof k&&k.match(/%$/)?(k=parseInt(k),k=k*wt/100):k=parseInt(k),"string"==typeof e&&e.match(/%$/)?(e=parseInt(e),e=e*i/100):e=parseInt(e),k>wt?k=wt:0>=k&&(k=0),e>i?e=i-.5:0>=e&&(e=0)):"pyramid"===o.type&&(e=k=0,o.reversed=o.reversed?!1:!0);var nt=w+i/2,ii=w,ri=w+i,g=o.reversed?lt:ct,at=nt-e/2,gt=nt+e/2,st=o.reversed?ct+k:lt-k,rt=o.reversed?ct:lt;i=[];var nt=[],s=[],p=[],et=ct,ht,ut=(st-g)/(at-ii),ui=-ut,w="area"===(o.valueRepresents?o.valueRepresents:"height")?vi():ai();if(-1!==w){if(o.reversed)for(p.push(et),e=w.length-1;0<e;e--)et+=w[e],p.push(et);else for(e=0;e<w.length;e++)et+=w[e],p.push(et);if(o.reversed)for(e=0;e<w.length;e++)p[e]<st?(i.push(at),nt.push(gt),ht=e):(i.push((p[e]-g+ut*ii)/ut),nt.push((p[e]-g+ui*ri)/ui));else for(e=0;e<w.length;e++)p[e]<st?(i.push((p[e]-g+ut*ii)/ut),nt.push((p[e]-g+ui*ri)/ui),ht=e):(i.push(at),nt.push(gt));for(e=0;e<w.length-1;e++)et=o.reversed?c[c.length-1-e].color?c[c.length-1-e].color:o._colorSet[(c.length-1-e)%o._colorSet.length]:c[e].color?c[e].color:o._colorSet[e%o._colorSet.length],e===ht?s.push({x1:i[e],y1:p[e],x2:nt[e],y2:p[e],x3:gt,y3:st,x4:nt[e+1],y4:p[e+1],x5:i[e+1],y5:p[e+1],x6:at,y6:st,id:e,height:p[e+1]-p[e],color:et}):s.push({x1:i[e],y1:p[e],x2:nt[e],y2:p[e],x3:nt[e+1],y3:p[e+1],x4:i[e+1],y4:p[e+1],id:e,height:p[e+1]-p[e],color:et});var ft=2,r=[],oi=!1,b=[],fi=[],w=!1;for(i=i=0,yt(b),e=0;e<c.length;e++)c[e].exploded&&(w=!0,o.reversed?b.push(c.length-1-e):b.push(e));if(it.clearRect(a.x1,a.y1,a.width,a.height),it.fillStyle=l.backgroundColor,it.fillRect(a.x1,a.y1,a.width,a.height),tt&&o.visible&&(yi(),si(),pi(),"inside"!==o.indexLabelPlacement)){for(wi(),e=0;e<c.length;e++)r[e].isDirty||(i=r[e].textBlock.x+r[e].width,i=(kt-i)/2,0==e&&(d=i),d>i&&(d=i));for(e=0;e<s.length;e++)s[e].x1+=d,s[e].x2+=d,s[e].x3+=d,s[e].x4+=d,s[e].x5&&(s[e].x5+=d,s[e].x6+=d),r[e].textBlock.x+=d}for(e=0;e<s.length;e++)d=s[e],bt(it,d,o.fillOpacity),fi.push(d.y1);if(ei(it),tt&&o.visible&&("inside"===o.indexLabelPlacement||l.animationEnabled||ci(it),l.animationEnabled||li()),!tt)for(e=0;e<c.length;e++)d=o.dataPointIds[e],i={id:d,objectType:"dataPoint",dataPointIndex:e,dataSeriesIndex:0,funnelSection:s[o.reversed?c.length-1-e:e]},l._eventManager.objectMap[d]=i;return!l.animationEnabled&&w?ni(l,-1,0):l.animationEnabled&&!l.animatedRender&&ni(l,-1,0),this.funnelPyramidClickHandler=function(n){var i=-1;!oi&&!l.isAnimating&&(t(n.dataSeries.explodeOnClick)||n.dataSeries.explodeOnClick)&&(i=o.reversed?c.length-1-n.dataPointIndex:n.dataPointIndex,0<=i)&&(n=i,("funnel"===o.type||"pyramid"===o.type)&&(o.reversed?c[c.length-1-n].exploded=c[c.length-1-n].exploded?!1:!0:c[n].exploded=c[n].exploded?!1:!0),ni(l,i,500))},{source:it,dest:this.plotArea.ctx,animationCallback:function(n,t){f.fadeInAnimation(n,t);1<=n&&(ni(l,-1,500),ei(l.plotArea.ctx||l.ctx))},easingFunction:f.easing.easeInQuad,animationBase:0}}}}},i.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),i.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,i.prototype.set=function(n,t,r){r="undefined"==typeof r?!0:r;"options"===n?(this.options=t,r&&this.render()):i.base.set.call(this,n,t,r)},i.prototype.exportChart=function(n){n="undefined"==typeof n?{}:n;var t=n.format?n.format:"png",i=n.fileName?n.fileName:this.exportFileName;if(n.toDataURL)return this.canvas.toDataURL("image/"+t);oi(this.canvas,t,i)},i.prototype.print=function(){var r=this.exportChart({toDataURL:!0}),n=document.createElement("iframe"),i,t;n.setAttribute("class","canvasjs-chart-print-frame");n.setAttribute("style","position:absolute; width:100%; border: 0px; margin: 0px 0px 0px 0px; padding 0px 0px 0px 0px;");n.style.height=this.height+"px";this._canvasJSContainer.appendChild(n);i=this;t=n.contentWindow||n.contentDocument.document||n.contentDocument;t.document.open();t.document.write('<!DOCTYPE HTML>\n<html><body style="margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"><img src="'+r+'"/><body/><\/html>');t.document.close();setTimeout(function(){t.focus();t.print();setTimeout(function(){i._canvasJSContainer.removeChild(n)},1e3)},500)},i.prototype.getPercentAndTotal=function(n,t){var i=null,r=null,u=null;if(0<=n.type.indexOf("stacked"))r=0,i=t.x.getTime?t.x.getTime():t.x,i in n.plotUnit.yTotals&&(r=n.plotUnit.yTotals[i],u=isNaN(t.y)?0:100*(t.y/r));else if("pie"===n.type||"doughnut"===n.type||"funnel"===n.type||"pyramid"===n.type){for(i=r=0;i<n.dataPoints.length;i++)isNaN(n.dataPoints[i].y)||(r+=n.dataPoints[i].y);u=isNaN(t.y)?0:100*(t.y/r)}return{percent:u,total:r}},i.prototype.replaceKeywordsWithValue=function(n,t,i,r,u){var f=this,e,o,h;if(u="undefined"==typeof u?0:u,(0<=i.type.indexOf("stacked")||"pie"===i.type||"doughnut"===i.type||"funnel"===i.type||"pyramid"===i.type)&&(0<=n.indexOf("#percent")||0<=n.indexOf("#total"))){var s="#percent",c="#total",e=this.getPercentAndTotal(i,t),c=isNaN(e.total)?c:e.total,s=isNaN(e.percent)?s:e.percent;do{if(e="",i.percentFormatString)e=i.percentFormatString;else{for(e="#,##0.",o=Math.max(Math.ceil(Math.log(1/Math.abs(s))/Math.LN10),2),(isNaN(o)||!isFinite(o))&&(o=2),h=0;h<o;h++)e+="#";i.percentFormatString=e}n=n.replace("#percent",v(s,e,f._cultureInfo));n=n.replace("#total",v(c,i.yValueFormatString?i.yValueFormatString:"#,##0.########",f._cultureInfo))}while(0<=n.indexOf("#percent")||0<=n.indexOf("#total"))}return n.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(n){var o,e;if('"'===n[0]&&'"'===n[n.length-1]||"'"===n[0]&&"'"===n[n.length-1])return n.slice(1,n.length-1);n=kt(n.slice(1,n.length-1));n=n.replace("#index",u);o=null;try{e=n.match(/(.*?)\s*\[\s*(.*?)\s*\]/);e&&0<e.length&&(o=kt(e[2]),n=kt(e[1]))}catch(s){}if(e=null,"color"===n)return"waterfall"===i.type?t.color?t.color:0<t.y?i.risingColor:i.fallingColor:"error"===i.type?i.color?i.color:i._colorSet[o%i._colorSet.length]:t.color?t.color:i.color?i.color:i._colorSet[r%i._colorSet.length];if(t.hasOwnProperty(n))e=t;else if(i.hasOwnProperty(n))e=i;else return"";if(e=e[n],null!==o&&(e=e[o]),"x"===n)if("dateTime"===i.axisX.valueType||"dateTime"===i.xValueType||t.x&&t.x.getTime){if(f.plotInfo.plotTypes[0].plotUnits[0].axisX&&!f.plotInfo.plotTypes[0].plotUnits[0].axisX.logarithmic)return at(e,t.xValueFormatString?t.xValueFormatString:i.xValueFormatString?i.xValueFormatString:i.xValueFormatString=f.axisX&&f.axisX.autoValueFormatString?f.axisX.autoValueFormatString:"DD MMM YY",f._cultureInfo)}else return v(e,t.xValueFormatString?t.xValueFormatString:i.xValueFormatString?i.xValueFormatString:i.xValueFormatString="#,##0.########",f._cultureInfo);else return"y"===n?v(e,t.yValueFormatString?t.yValueFormatString:i.yValueFormatString?i.yValueFormatString:i.yValueFormatString="#,##0.########",f._cultureInfo):"z"===n?v(e,t.zValueFormatString?t.zValueFormatString:i.zValueFormatString?i.zValueFormatString:i.zValueFormatString="#,##0.########",f._cultureInfo):e})},it(g,c),g.prototype.setLayout=function(){var nt=this.dockInsidePlotArea?this.chart.plotArea:this.chart,u=nt.layoutManager.getFreeSpace(),g=null,k=0,d=0,c=0,l=0,p=this.markerMargin=this.chart.options.legend&&!t(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize,h,a,f,n,o;for(this.height=0,h=[],a=[],"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",g=this.verticalAlign,c=this.maxWidth=null!==this.maxWidth?this.maxWidth:u.width,l=this.maxHeight=null!==this.maxHeight?this.maxHeight:.5*u.height):"center"===this.verticalAlign&&(this.orientation="vertical",g=this.horizontalAlign,c=this.maxWidth=null!==this.maxWidth?this.maxWidth:.5*u.width,l=this.maxHeight=null!==this.maxHeight?this.maxHeight:u.height),this.errorMarkerColor=[],f=0;f<this.dataSeries.length;f++)if(n=this.dataSeries[f],n.dataPoints&&n.dataPoints.length)if("pie"!==n.type&&"doughnut"!==n.type&&"funnel"!==n.type&&"pyramid"!==n.type){var i=n.legendMarkerType=n.legendMarkerType?n.legendMarkerType:"line"!==n.type&&"stepLine"!==n.type&&"spline"!==n.type&&"scatter"!==n.type&&"bubble"!==n.type||!n.markerType?"error"===n.type&&n._linkedSeries?n._linkedSeries.legendMarkerType?n._linkedSeries.legendMarkerType:b.getDefaultLegendMarker(n._linkedSeries.type):b.getDefaultLegendMarker(n.type):n.markerType,s=n.legendText?n.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:n,dataPoint:null}):n.name,w=n.legendMarkerColor=n.legendMarkerColor?n.legendMarkerColor:n.markerColor?n.markerColor:"error"===n.type?t(n.whiskerColor)?n._colorSet[0]:n.whiskerColor:n._colorSet[0],e=n.markerSize||"line"!==n.type&&"stepLine"!==n.type&&"spline"!==n.type?.75*this.lineHeight:0,v=n.legendMarkerBorderColor?n.legendMarkerBorderColor:n.markerBorderColor,tt=n.legendMarkerBorderThickness?n.legendMarkerBorderThickness:n.markerBorderThickness?Math.max(1,Math.round(.2*e)):0;"error"===n.type&&this.errorMarkerColor.push(w);s=this.chart.replaceKeywordsWithValue(s,n.dataPoints[0],n,f);i={markerType:i,markerColor:w,text:s,textBlock:null,chartType:n.type,markerSize:e,lineColor:n._colorSet[0],dataSeriesIndex:n.index,dataPointIndex:null,markerBorderColor:v,markerBorderThickness:tt};h.push(i)}else for(o=0;o<n.dataPoints.length;o++){var r=n.dataPoints[o],i=r.legendMarkerType?r.legendMarkerType:n.legendMarkerType?n.legendMarkerType:b.getDefaultLegendMarker(n.type),s=r.legendText?r.legendText:n.legendText?n.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:n,dataPoint:r}):r.name?r.name:"DataPoint: "+(o+1),w=r.legendMarkerColor?r.legendMarkerColor:n.legendMarkerColor?n.legendMarkerColor:r.color?r.color:n.color?n.color:n._colorSet[o%n._colorSet.length],e=.75*this.lineHeight,v=r.legendMarkerBorderColor?r.legendMarkerBorderColor:n.legendMarkerBorderColor?n.legendMarkerBorderColor:r.markerBorderColor?r.markerBorderColor:n.markerBorderColor,tt=r.legendMarkerBorderThickness?r.legendMarkerBorderThickness:n.legendMarkerBorderThickness?n.legendMarkerBorderThickness:r.markerBorderThickness||n.markerBorderThickness?Math.max(1,Math.round(.2*e)):0,s=this.chart.replaceKeywordsWithValue(s,r,n,o),i={markerType:i,markerColor:w,text:s,textBlock:null,chartType:n.type,markerSize:e,dataSeriesIndex:f,dataPointIndex:o,markerBorderColor:v,markerBorderThickness:tt};(r.showInLegend||n.showInLegend&&!1!==r.showInLegend)&&h.push(i)}if(!0===this.reversed&&h.reverse(),0<h.length){for(n=null,w=s=r=o=0,r=null!==this.itemWidth?null!==this.itemMaxWidth?Math.min(this.itemWidth,this.itemMaxWidth,c):this.itemMaxWidth=Math.min(this.itemWidth,c):null!==this.itemMaxWidth?Math.min(this.itemMaxWidth,c):this.itemMaxWidth=c,e=0===e?.75*this.lineHeight:e,r-=e+p,f=0;f<h.length;f++)i=h[f],v=r,("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType)&&(v-=2*.1*this.lineHeight),0>=l||"undefined"==typeof l||0>=v||"undefined"==typeof v||("horizontal"===this.orientation?(i.textBlock=new y(this.ctx,{x:0,y:0,maxWidth:v,maxHeight:this.itemWrap?l:this.lineHeight,angle:0,text:i.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),i.textBlock.measureText(),null!==this.itemWidth&&(i.textBlock.width=this.itemWidth-(e+p+("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType?2*.1*this.lineHeight:0))),(!n||n.width+Math.round(i.textBlock.width+e+p+(0===n.width?0:this.horizontalSpacing)+("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType?2*.1*this.lineHeight:0))>c)&&(n={items:[],width:0},a.push(n),this.height+=s,s=0),s=Math.max(s,i.textBlock.height)):(i.textBlock=new y(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:!0===this.itemWrap?l:1.5*this.fontSize,angle:0,text:i.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),i.textBlock.measureText(),null!==this.itemWidth&&(i.textBlock.width=this.itemWidth-(e+p+("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType?2*.1*this.lineHeight:0))),this.height<l-this.lineHeight?(n={items:[],width:0},a.push(n)):(n=a[o],o=(o+1)%a.length),this.height+=i.textBlock.height),i.textBlock.x=n.width,i.textBlock.y=0,n.width+=Math.round(i.textBlock.width+e+p+(0===n.width?0:this.horizontalSpacing)+("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType?2*.1*this.lineHeight:0)),n.items.push(i),this.width=Math.max(n.width,this.width),w=i.textBlock.width+(e+p+("line"===i.chartType||"spline"===i.chartType||"stepLine"===i.chartType?2*.1*this.lineHeight:0)));this.itemWidth=w;this.height=!1===this.itemWrap?a.length*this.lineHeight:this.height+s;this.height=Math.min(l,this.height);this.width=Math.min(c,this.width)}for("top"===this.verticalAlign?(d="left"===this.horizontalAlign?u.x1:"right"===this.horizontalAlign?u.x2-this.width:u.x1+u.width/2-this.width/2,k=u.y1):"center"===this.verticalAlign?(d="left"===this.horizontalAlign?u.x1:"right"===this.horizontalAlign?u.x2-this.width:u.x1+u.width/2-this.width/2,k=u.y1+u.height/2-this.height/2):"bottom"===this.verticalAlign&&(d="left"===this.horizontalAlign?u.x1:"right"===this.horizontalAlign?u.x2-this.width:u.x1+u.width/2-this.width/2,k=u.y2-this.height),this.items=h,f=0;f<this.items.length;f++)i=h[f],i.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[i.id]={id:i.id,objectType:"legendItem",legendItemIndex:f,dataSeriesIndex:i.dataSeriesIndex,dataPointIndex:i.dataPointIndex};this.markerSize=e;this.rows=a;0<h.length&&nt.layoutManager.registerSpace(g,{width:this.width+2+2,height:this.height+5+5});this.bounds={x1:d,y1:k,x2:d+this.width,y2:k+this.height}},g.prototype.render=function(){var a=this.bounds.x1,v=this.bounds.y1,g=this.markerMargin,nt=this.maxWidth,b=this.maxHeight,s=this.markerSize,k=this.rows,y,h;for((0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(a,v,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),y=0,h=0;h<k.length;h++){for(var d=k[h],p=0,u=0;u<d.items.length;u++){var n=d.items[u],t=n.textBlock.x+a+(0===u?.2*s:this.horizontalSpacing),f=v+y,c=t;if(this.chart.data[n.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(a,v,nt,Math.max(b-b%this.lineHeight,0)),this.ctx.clip(),("line"===n.chartType||"stepLine"===n.chartType||"spline"===n.chartType)&&(this.ctx.strokeStyle=n.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(t-.1*this.lineHeight,f+this.lineHeight/2),this.ctx.lineTo(t+.85*this.lineHeight,f+this.lineHeight/2),this.ctx.stroke(),c-=.1*this.lineHeight),"error"===n.chartType){this.ctx.strokeStyle=this.errorMarkerColor[0];this.ctx.lineWidth=s/8;this.ctx.beginPath();var i=t-.08*this.lineHeight+.1*this.lineHeight,r=f+.15*this.lineHeight,o=.7*this.lineHeight,w=o+.02*this.lineHeight;this.ctx.moveTo(i,r);this.ctx.lineTo(i+o,r);this.ctx.stroke();this.ctx.beginPath();this.ctx.moveTo(i+o/2,r);this.ctx.lineTo(i+o/2,r+w);this.ctx.stroke();this.ctx.beginPath();this.ctx.moveTo(i,r+w);this.ctx.lineTo(i+o,r+w);this.ctx.stroke();this.errorMarkerColor.shift()}l.drawMarker(t+s/2,f+this.lineHeight/2,this.ctx,n.markerType,"error"===n.chartType||"line"===n.chartType||"spline"===n.chartType?n.markerSize/2:n.markerSize,n.markerColor,n.markerBorderColor,n.markerBorderThickness);n.textBlock.x=t+g+s;("line"===n.chartType||"stepLine"===n.chartType||"spline"===n.chartType)&&(n.textBlock.x+=.1*this.lineHeight);n.textBlock.y=Math.round(f+this.lineHeight/2);n.textBlock.render(!0);this.ctx.restore();p=0<u?Math.max(p,n.textBlock.height):n.textBlock.height;this.chart.data[n.dataSeriesIndex].visible||(this.ctx.globalAlpha=1);t=e(n.id);this.ghostCtx.fillStyle=t;this.ghostCtx.beginPath();this.ghostCtx.fillRect(c,n.textBlock.y-this.lineHeight/2,n.textBlock.x+n.textBlock.width-c,n.textBlock.height);n.x1=this.chart._eventManager.objectMap[n.id].x1=c;n.y1=this.chart._eventManager.objectMap[n.id].y1=n.textBlock.y-this.lineHeight/2;n.x2=this.chart._eventManager.objectMap[n.id].x2=n.textBlock.x+n.textBlock.width;n.y2=this.chart._eventManager.objectMap[n.id].y2=n.textBlock.y+n.textBlock.height-this.lineHeight/2}y+=p}},it(b,c),b.prototype.getDefaultAxisPlacement=function(){var n=this.type;return"column"===n||"line"===n||"stepLine"===n||"spline"===n||"area"===n||"stepArea"===n||"splineArea"===n||"stackedColumn"===n||"stackedLine"===n||"bubble"===n||"scatter"===n||"stackedArea"===n||"stackedColumn100"===n||"stackedLine100"===n||"stackedArea100"===n||"candlestick"===n||"ohlc"===n||"rangeColumn"===n||"rangeArea"===n||"rangeSplineArea"===n||"boxAndWhisker"===n||"waterfall"===n?"normal":"bar"===n||"stackedBar"===n||"stackedBar100"===n||"rangeBar"===n?"xySwapped":"pie"===n||"doughnut"===n||"funnel"===n||"pyramid"===n?"none":("error"!==n&&window.console.log("Unknown Chart Type: "+n),null)},b.getDefaultLegendMarker=function(n){return"column"===n||"stackedColumn"===n||"stackedLine"===n||"bar"===n||"stackedBar"===n||"stackedBar100"===n||"bubble"===n||"scatter"===n||"stackedColumn100"===n||"stackedLine100"===n||"stepArea"===n||"candlestick"===n||"ohlc"===n||"rangeColumn"===n||"rangeBar"===n||"rangeArea"===n||"rangeSplineArea"===n||"boxAndWhisker"===n||"waterfall"===n?"square":"line"===n||"stepLine"===n||"spline"===n||"pie"===n||"doughnut"===n?"circle":"area"===n||"splineArea"===n||"stackedArea"===n||"stackedArea100"===n||"funnel"===n||"pyramid"===n?"triangle":"error"===n?"none":(window.console.log("Unknown Chart Type: "+n),null)},b.prototype.getDataPointAtX=function(n,t){var r,s;if(!this.dataPoints||0===this.dataPoints.length)return null;var u={dataPoint:null,distance:Infinity,index:NaN},r=null,f=0,e=0,o=1,h=Infinity,c=0,l=0,i=0;for("none"!==this.chart.plotInfo.axisPlacement&&(this.axisX.logarithmic?(i=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),i=1<i?Math.min(Math.max((this.dataPoints.length-1)/i*Math.log(n/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(i=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,i=0<i?Math.min(Math.max((this.dataPoints.length-1)/i*(n-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(e=0<o?i+f:i-f,0<=e&&e<this.dataPoints.length){if(r=this.dataPoints[e],s=this.axisX.logarithmic?r.x>n?r.x/n:n/r.x:Math.abs(r.x-n),s<u.distance&&(u.dataPoint=r,u.distance=s,u.index=e),r=s,r<=h?h=r:0<o?c++:l++,1e3<c&&1e3<l)break}else if(0>i-f&&i+f>=this.dataPoints.length)break;-1===o?(f++,o=1):o=-1}return t||u.dataPoint.x!==n?t&&null!==u.dataPoint?u:null:u},b.prototype.getDataPointAtXY=function(n,t,i){var r,l;if(!this.dataPoints||0===this.dataPoints.length||n<this.chart.plotArea.x1||n>this.chart.plotArea.x2||t<this.chart.plotArea.y1||t>this.chart.plotArea.y2)return null;i=i||!1;var o=[],v=0,f=0,a=1,c=!1,y=Infinity,p=0,w=0,l=0;for("none"!==this.chart.plotInfo.axisPlacement&&((l=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:n,y:t}),this.axisX.logarithmic)?(r=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),l=1<r?Math.min(Math.max((this.dataPoints.length-1)/r*Math.log(l/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(r=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,l=0<r?Math.min(Math.max((this.dataPoints.length-1)/r*(l-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(f=0<a?l+v:l-v,0<=f&&f<this.dataPoints.length){var r=this.chart._eventManager.objectMap[this.dataPointIds[f]],s=this.dataPoints[f],u=null;if(r){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":n>=r.x1&&n<=r.x2&&t>=r.y1&&t<=r.y2&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:Math.min(Math.abs(r.x1-n),Math.abs(r.x2-n),Math.abs(r.y1-t),Math.abs(r.y2-t))}),c=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var e=d("markerSize",s,this)||4,h=i?20:e,u=Math.sqrt(Math.pow(r.x1-n,2)+Math.pow(r.y1-t,2));u<=h&&o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:u});r=Math.abs(r.x1-n);r<=y?y=r:0<a?p++:w++;u<=e/2&&(c=!0);break;case"rangeArea":case"rangeSplineArea":e=d("markerSize",s,this)||4;h=i?20:e;u=Math.min(Math.sqrt(Math.pow(r.x1-n,2)+Math.pow(r.y1-t,2)),Math.sqrt(Math.pow(r.x1-n,2)+Math.pow(r.y2-t,2)));u<=h&&o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:u});r=Math.abs(r.x1-n);r<=y?y=r:0<a?p++:w++;u<=e/2&&(c=!0);break;case"bubble":e=r.size;u=Math.sqrt(Math.pow(r.x1-n,2)+Math.pow(r.y1-t,2));u<=e/2&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:u}),c=!0);break;case"pie":case"doughnut":e=r.center;h="doughnut"===this.type?r.percentInnerRadius*r.radius:0;u=Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-t,2));u<r.radius&&u>h&&(u=Math.atan2(t-e.y,n-e.x),0>u&&(u+=2*Math.PI),u=Number(((180*(u/Math.PI)%360+360)%360).toFixed(12)),e=Number(((180*(r.startAngle/Math.PI)%360+360)%360).toFixed(12)),h=Number(((180*(r.endAngle/Math.PI)%360+360)%360).toFixed(12)),0===h&&1<r.endAngle&&(h=360),e>=h&&0!==s.y&&(h+=360,u<e&&(u+=360)),u>e&&u<h&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:0}),c=!0));break;case"funnel":case"pyramid":u=r.funnelSection;t>u.y1&&t<u.y4&&(u.y6?t>u.y6?(f=u.x6+(u.x5-u.x6)/(u.y5-u.y6)*(t-u.y6),u=u.x3+(u.x4-u.x3)/(u.y4-u.y3)*(t-u.y3)):(f=u.x1+(u.x6-u.x1)/(u.y6-u.y1)*(t-u.y1),u=u.x2+(u.x3-u.x2)/(u.y3-u.y2)*(t-u.y2)):(f=u.x1+(u.x4-u.x1)/(u.y4-u.y1)*(t-u.y1),u=u.x2+(u.x3-u.x2)/(u.y3-u.y2)*(t-u.y2)),n>f&&n<u&&(o.push({dataPoint:s,dataPointIndex:r.dataPointIndex,dataSeries:this,distance:0}),c=!0));break;case"boxAndWhisker":(n>=r.x1-r.borderThickness/2&&n<=r.x2+r.borderThickness/2&&t>=r.y4-r.borderThickness/2&&t<=r.y1+r.borderThickness/2||Math.abs(r.x2-n+r.x1-n)<r.borderThickness&&t>=r.y1&&t<=r.y4)&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:Math.min(Math.abs(r.x1-n),Math.abs(r.x2-n),Math.abs(r.y2-t),Math.abs(r.y3-t))}),c=!0);break;case"candlestick":(n>=r.x1-r.borderThickness/2&&n<=r.x2+r.borderThickness/2&&t>=r.y2-r.borderThickness/2&&t<=r.y3+r.borderThickness/2||Math.abs(r.x2-n+r.x1-n)<r.borderThickness&&t>=r.y1&&t<=r.y4)&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:Math.min(Math.abs(r.x1-n),Math.abs(r.x2-n),Math.abs(r.y2-t),Math.abs(r.y3-t))}),c=!0);break;case"ohlc":(Math.abs(r.x2-n+r.x1-n)<r.borderThickness&&t>=r.y2&&t<=r.y3||n>=r.x1&&n<=(r.x2+r.x1)/2&&t>=r.y1-r.borderThickness/2&&t<=r.y1+r.borderThickness/2||n>=(r.x1+r.x2)/2&&n<=r.x2&&t>=r.y4-r.borderThickness/2&&t<=r.y4+r.borderThickness/2)&&(o.push({dataPoint:s,dataPointIndex:f,dataSeries:this,distance:Math.min(Math.abs(r.x1-n),Math.abs(r.x2-n),Math.abs(r.y2-t),Math.abs(r.y3-t))}),c=!0)}if(c||1e3<p&&1e3<w)break}}else if(0>l-v&&l+v>=this.dataPoints.length)break;-1===a?(v++,a=1):a=-1}for(n=null,t=0;t<o.length;t++)n?o[t].distance<=n.distance&&(n=o[t]):n=o[t];return n},b.prototype.getMarkerProperties=function(n,t,i,r){var u=this.dataPoints;return{x:t,y:i,ctx:r,type:u[n].markerType?u[n].markerType:this.markerType,size:u[n].markerSize?u[n].markerSize:this.markerSize,color:u[n].markerColor?u[n].markerColor:this.markerColor?this.markerColor:u[n].color?u[n].color:this.color?this.color:this._colorSet[n%this._colorSet.length],borderColor:u[n].markerBorderColor?u[n].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:u[n].markerBorderThickness?u[n].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},it(r,c),r.prototype.createExtraLabelsForLog=function(n){var i,u,t;if(n=(n||0)+1,!(5<n)&&(i=this.logLabelValues[0]||this.intervalStartPosition,Math.log(this.range)/Math.log(i/this.viewportMinimum)<this.noTicks-1)){for(u=r.getNiceNumber((i-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),t=Math.ceil(this.viewportMinimum/u)*u;t<i;t+=u)t<this.viewportMinimum||this.logLabelValues.push(t);this.logLabelValues.sort(ei);this.createExtraLabelsForLog(n)}},r.prototype.createLabels=function(){var r,p,f=0,u=0,k,i=0,o=0,u=0,u=this.interval,a=0,g,nt=.6*this.chart.height,h,c,l,b,w,e,d;if(r=!1,c=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],l=c.length?t(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0,"axisX"!==this.type||"dateTime"!==this.valueType||this.logarithmic){if(k=this.viewportMaximum,this.labels){r=Math.ceil(u);for(var u=Math.ceil(this.intervalStartPosition),e=!1,f=u;f<this.viewportMaximum;f+=r)if(this.labels[f])e=!0;else{e=!1;break}e&&(this.interval=r,this.intervalStartPosition=u)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),u=0,e=l;u<this.logLabelValues.length;u++)if(f=this.logLabelValues[u],f<this.viewportMinimum)u++;else{for(;e<c.length&&f>c[e].endValue;e++);r=e<c.length&&f>=c[e].startValue&&f<=c[e].endValue;h=f;r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:h,label:this.labels[h]?this.labels[h]:null}):"axisX"===this.type&&this.labels[h]?this.labels[h]:v(h,this.valueFormatString,this.chart._cultureInfo),r=new y(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:o,angle:this.labelAngle,text:this.prefix+r+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:h,textBlock:r,effectiveHeight:null}))}for(e=l,f=this.intervalStartPosition;f<=k;f=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?f*Math.pow(this.logarithmBase,this.interval):f+this.interval:(this.logarithmic&&this.equidistantInterval?f*Math.pow(this.logarithmBase,this.interval):f+this.interval).toFixed(12))){for(;e<c.length&&f>c[e].endValue;e++);r=e<c.length&&f>=c[e].startValue&&f<=c[e].endValue;h=f;r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:h,label:this.labels[h]?this.labels[h]:null}):"axisX"===this.type&&this.labels[h]?this.labels[h]:v(h,this.valueFormatString,this.chart._cultureInfo),r=new y(this.ctx,{x:0,y:0,maxWidth:i,maxHeight:o,angle:this.labelAngle,text:this.prefix+r+this.suffix,horizontalAlign:"left",backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:h,textBlock:r,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),k=ai(new Date(this.viewportMaximum),this.interval,this.intervalType),e=l,f=this.intervalStartPosition;f<k;ai(f,u,this.intervalType)){for(r=f.getTime();e<c.length&&r>c[e].endValue;e++);h=r;r=e<c.length&&r>=c[e].startValue&&r<=c[e].endValue;r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(h),label:this.labels[h]?this.labels[h]:null}):"axisX"===this.type&&this.labels[h]?this.labels[h]:at(h,this.valueFormatString,this.chart._cultureInfo),r=new y(this.ctx,{x:0,y:0,maxWidth:i,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:o,angle:this.labelAngle,text:this.prefix+r+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:h,textBlock:r,effectiveHeight:null,breaksLabelType:void 0}))}for("bottom"===this._position||"top"===this._position?(a=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*s[this.intervalType+"Duration"]*this.interval,i="undefined"==typeof this.options.labelMaxWidth?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(o="undefined"==typeof this.options.labelWrap||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):("left"===this._position||"right"===this._position)&&(a=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*s[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(i="undefined"==typeof this.options.labelMaxWidth?.3*this.chart.width>>0:this.options.labelMaxWidth),o="undefined"==typeof this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),u=0;u<this._labels.length;u++)r=this._labels[u].textBlock,r.maxWidth=i,r.maxHeight=o,b=r.measureText(),g=b.height;if(k=[],l=c=0,this.labelAutoFit||this.options.labelAutoFit)if(t(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),"bottom"===this._position||"top"===this._position)if(i=.9*a>>0,l=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=i,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,f=0;f<this._labels.length;f++)if(!this._labels[f].breaksLabelType)for(r=this._labels[f].textBlock,e=r.text.split(" "),u=0;u<e.length;u++)h=e[u],this.ctx.font=r.fontStyle+" "+r.fontWeight+" "+r.fontSize+"px "+r.fontFamily,h=this.ctx.measureText(h),h.width>l&&(w=f,l=h.width);for(f=0,f=this.intervalStartPosition<this.viewportMinimum?1:0;f<this._labels.length;f++)if(!this._labels[f].breaksLabelType){for(r=this._labels[f].textBlock,b=r.measureText(),e=f+1;e<this._labels.length;e++)if(!this._labels[e].breaksLabelType){p=this._labels[e].textBlock;p=p.measureText();break}if(k.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,k),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),u=i*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(o-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),t(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle)if(this.sessionVariables.labelMaxHeight=0===this.labelAngle?o:Math.min((u-i*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),u),h=(nt-(g+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),t(this.options.labelWrap)){if(t(this.options.labelWrap))if(t(this.options.labelMaxWidth)){if(!t(p))if(u=b.width+p.width>>0,e=this.labelFontSize,l<i)u-2*i>c&&(c=u-2*i,u>=2*i&&u<2.2*i?(this.sessionVariables.labelMaxWidth=i,t(this.options.labelFontSize)&&12<e&&(e=Math.floor(12/13*e),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?e:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):u>=2.2*i&&u<2.8*i?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelFontSize=e):u>=2.8*i&&u<3.2*i?(this.sessionVariables.labelMaxWidth=Math.max(i,l),this.sessionVariables.labelWrap=!0,t(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?e:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):u>=3.2*i&&u<3.6*i?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelFontSize=this.labelFontSize):u>3.6*i&&u<5*i?(t(this.options.labelFontSize)&&12<e&&(e=Math.floor(12/13*e),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?e:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=h):u>5*i&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=i,this.sessionVariables.labelFontSize=e,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelAngle=this.labelAngle));else if(w===f&&(0===w&&l+this._labels[w+1].textBlock.measureText().width-2*i>c||w===this._labels.length-1&&l+this._labels[w-1].textBlock.measureText().width-2*i>c||0<w&&w<this._labels.length-1&&l+this._labels[w+1].textBlock.measureText().width-2*i>c&&l+this._labels[w-1].textBlock.measureText().width-2*i>c))c=0===w?l+this._labels[w+1].textBlock.measureText().width-2*i:l+this._labels[w-1].textBlock.measureText().width-2*i,this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?e:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=h;else if(0===c)for(this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?e:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,u=0;u<this._labels.length;u++)r=this._labels[u].textBlock,r.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(i,l),h),b=r.measureText(),u<this._labels.length-1&&(e=u+1,p=this._labels[e].textBlock,p.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(i,l),h),p=p.measureText(),b.width+p.width>>0>2*i&&(this.sessionVariables.labelAngle=-25))}else this.options.labelMaxWidth<i?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=u):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=o)}else this.labelWrap?t(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(i,l),h),this.sessionVariables.labelWrap=this.labelWrap,b.width+p.width>>0>2*i&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>i?-25:this.sessionVariables.labelAngle):t(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelMaxWidth=i,b.width+p.width>>0>2*i&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=h)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>i?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelWrap=this.labelWrap);else(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=0===this.labelAngle?o:Math.min((u-i*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),u),h=0!=this.labelAngle?(nt-(g+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):i,this.sessionVariables.labelMaxHeight=o=this.labelWrap?(nt-h*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,t(this.options.labelWrap))?t(this.options.labelWrap)&&(this.labelWrap&&!t(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:h,this.sessionVariables.labelMaxHeight=o):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelMaxHeight=u<.9*a?.9*a:u,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:h):(t(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:h,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=o)}for(u=0;u<this._labels.length;u++)r=this._labels[u].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(f=0;f<this._labels.length;f++)r=this._labels[f].textBlock,r.maxWidth=this.labelMaxWidth=t(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=t(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=t(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=t(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText();else if("left"===this._position||"right"===this._position)if(i=t(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,o="undefined"==typeof this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=i,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelAngle=t(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,f=0;f<this._labels.length;f++)if(!this._labels[f].breaksLabelType){for(r=this._labels[f].textBlock,b=r.measureText(),e=f+1;e<this._labels.length;e++)if(!this._labels[e].breaksLabelType){p=this._labels[e].textBlock;p=p.measureText();break}k.push(r.height);this.sessionVariables.labelMaxHeight=Math.max.apply(Math,k);u=i*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(o-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle));Math.cos(Math.PI/180*Math.abs(this.labelAngle));Math.sin(Math.PI/180*Math.abs(this.labelAngle));t(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle?t(this.options.labelWrap)?t(this.options.labelWrap)&&(t(this.options.labelMaxWidth)?t(p)||(a=b.height+p.height>>0,a-2*o>l&&(l=a-2*o,a>=2*o&&a<2.4*o?(t(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):a>=2.4*o&&a<2.8*o?(this.sessionVariables.labelMaxHeight=u,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):a>=2.8*o&&a<3.2*o?(this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelWrap=!0,t(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=t(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):a>=3.2*o&&a<3.6*o?(this.sessionVariables.labelMaxHeight=u,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):a>3.6*o&&a<10*o?(t(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=i,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelAngle=t(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):a>10*o&&a<50*o&&(t(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=t(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelMaxWidth=i,this.sessionVariables.labelAngle=t(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))):(this.sessionVariables.labelMaxHeight=o,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:i,this.sessionVariables.labelMaxHeight=o):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=0===this.labelAngle?i:Math.min((u-o*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),o),t(this.options.labelWrap))?t(this.options.labelWrap)&&(this.labelWrap&&!t(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth>this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=u):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:i,this.sessionVariables.labelMaxHeight=0===this.labelAngle?o:u,t(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=0===this.labelAngle?o:u,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=i):(this.sessionVariables.labelMaxHeight=o,t(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap)}for(u=0;u<this._labels.length;u++)r=this._labels[u].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(f=0;f<this._labels.length;f++)r=this._labels[f].textBlock,r.maxWidth=this.labelMaxWidth=t(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=t(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=t(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=t(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText();for(f=0;f<this.stripLines.length;f++)i=this.stripLines[f],"outside"===i.labelPlacement?(o=this.sessionVariables.labelMaxWidth,("bottom"===this._position||"top"===this._position)&&(d=t(i.options.labelWrap)?this.sessionVariables.labelMaxHeight:i.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),("left"===this._position||"right"===this._position)&&(d=t(i.options.labelWrap)?this.sessionVariables.labelMaxHeight:i.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),t(i.labelBackgroundColor)&&(i.labelBackgroundColor="#EEEEEE")):(o="bottom"===this._position||"top"===this._position?.9*this.chart.width>>0:.9*this.chart.height>>0,d=t(i.options.labelWrap)||i.labelWrap?"bottom"===this._position||"top"===this._position?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,t(i.labelBackgroundColor)&&(i.labelBackgroundColor=t(i.startValue)&&0!==i.startValue?n?"transparent":null:"#EEEEEE")),r=new y(this.ctx,{x:0,y:0,backgroundColor:i.labelBackgroundColor,borderColor:i.labelBorderColor,borderThickness:i.labelBorderThickness,cornerRadius:i.labelCornerRadius,maxWidth:i.options.labelMaxWidth?i.options.labelMaxWidth:o,maxHeight:d,angle:this.labelAngle,text:i.labelFormatter?i.labelFormatter({chart:this.chart,axis:this,stripLine:i}):i.label,horizontalAlign:"left",fontSize:"outside"===i.labelPlacement?i.options.labelFontSize?i.labelFontSize:this.labelFontSize:i.labelFontSize,fontFamily:"outside"===i.labelPlacement?i.options.labelFontFamily?i.labelFontFamily:this.labelFontFamily:i.labelFontFamily,fontWeight:"outside"===i.labelPlacement?i.options.labelFontWeight?i.labelFontWeight:this.labelFontWeight:i.labelFontWeight,fontColor:i.labelFontColor||i.color,fontStyle:"outside"===i.labelPlacement?i.options.labelFontStyle?i.labelFontStyle:this.fontWeight:i.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:i.value,textBlock:r,effectiveHeight:null,stripLine:i})},r.prototype.createLabelsAndCalculateWidth=function(){var u=0,n=0,f;if(this._labels=[],this._stripLineLabels=[],f=this.chart.isNavigator?0:5,"left"===this._position||"right"===this._position){for(this.createLabels(),n=0;n<this._labels.length;n++){var r=this._labels[n].textBlock,t=r.measureText(),i=0,i=0===this.labelAngle?t.width:t.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(t.height-r.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle));u<i&&(u=i);this._labels[n].effectiveWidth=i}for(n=0;n<this._stripLineLabels.length;n++)"outside"===this._stripLineLabels[n].stripLine.labelPlacement&&this._stripLineLabels[n].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[n].stripLine.value<=this.viewportMaximum&&(r=this._stripLineLabels[n].textBlock,t=r.measureText(),i=0===this.labelAngle?t.width:t.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(t.height-r.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),u<i&&(u=i),this._stripLineLabels[n].effectiveWidth=i)}return n=this.title?this._titleTextBlock.measureText().height+2:0,"inside"===this.labelPlacement?r=n+f:n+u+this.tickLength+f},r.prototype.createLabelsAndCalculateHeight=function(){var u=0,t,n,f;if(this._labels=[],this._stripLineLabels=[],n=0,f=this.chart.isNavigator?0:5,this.createLabels(),"bottom"===this._position||"top"===this._position){for(n=0;n<this._labels.length;n++){t=this._labels[n].textBlock;var i=t.measureText(),r=0,r=0===this.labelAngle?i.height:i.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(i.height-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle));u<r&&(u=r);this._labels[n].effectiveHeight=r}for(n=0;n<this._stripLineLabels.length;n++)"outside"===this._stripLineLabels[n].stripLine.labelPlacement&&this._stripLineLabels[n].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[n].stripLine.value<=this.viewportMaximum&&(t=this._stripLineLabels[n].textBlock,i=t.measureText(),r=0===this.labelAngle?i.height:i.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(i.height-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),u<r&&(u=r),this._stripLineLabels[n].effectiveHeight=r)}return t=this.title?this._titleTextBlock.measureText().height+2:0,"inside"===this.labelPlacement?n=t+f:t+u+this.tickLength+f},r.setLayout=function(n,i,r,u,f,e){var h,s,l,v,p=n[0]?n[0].chart:i[0].chart,b=p.isNavigator?0:10,a=p._axes,o,et,w;if(n&&0<n.length)for(o=0;o<n.length;o++)n[o]&&n[o].calculateAxisParameters();if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].calculateAxisParameters();if(r&&0<r.length)for(o=0;o<r.length;o++)r[o].calculateAxisParameters();if(u&&0<u.length)for(o=0;o<u.length;o++)u[o].calculateAxisParameters();for(o=0;o<a.length;o++)if(a[o]&&a[o].scaleBreaks&&a[o].scaleBreaks._appliedBreaks.length)for(et=a[o].scaleBreaks._appliedBreaks,w=0;w<et.length&&!(et[w].startValue>a[o].viewportMaximum);w++)et[w].endValue<a[o].viewportMinimum||(t(a[o].scaleBreaks.firstBreakIndex)&&(a[o].scaleBreaks.firstBreakIndex=w),et[w].startValue>=a[o].viewPortMinimum&&(a[o].scaleBreaks.lastBreakIndex=w));for(var g=w=0,ht=0,tt=0,ct=0,ut=0,at=0,d,ot,it=s=0,wt,bt,kt,et=wt=bt=kt=!1,o=0;o<a.length;o++)a[o]&&a[o].title&&(a[o]._titleTextBlock=new y(a[o].ctx,{text:a[o].title,horizontalAlign:"center",fontSize:a[o].titleFontSize,fontFamily:a[o].titleFontFamily,fontWeight:a[o].titleFontWeight,fontColor:a[o].titleFontColor,fontStyle:a[o].titleFontStyle,borderColor:a[o].titleBorderColor,borderThickness:a[o].titleBorderThickness,backgroundColor:a[o].titleBackgroundColor,cornerRadius:a[o].titleCornerRadius,textBaseline:"top"}));for(o=0;o<a.length;o++)if(a[o].title)switch(a[o]._position){case"left":a[o]._titleTextBlock.maxWidth=a[o].titleMaxWidth||e.height;a[o]._titleTextBlock.maxHeight=a[o].titleWrap?.8*e.width:1.5*a[o].titleFontSize;a[o]._titleTextBlock.angle=-90;break;case"right":a[o]._titleTextBlock.maxWidth=a[o].titleMaxWidth||e.height;a[o]._titleTextBlock.maxHeight=a[o].titleWrap?.8*e.width:1.5*a[o].titleFontSize;a[o]._titleTextBlock.angle=90;break;default:a[o]._titleTextBlock.maxWidth=a[o].titleMaxWidth||e.width;a[o]._titleTextBlock.maxHeight=a[o].titleWrap?.8*e.height:1.5*a[o].titleFontSize;a[o]._titleTextBlock.angle=0}if("normal"===f){for(var tt=[],ct=[],ut=[],at=[],dt=[],gt=[],yt=[],pt=[];4>w;){var ni=0,ti=0,st=0,ft=0,rt=f=0,c=0,vt=0,k=0,nt=0,ii=0,lt=0;if(r&&0<r.length)for(ut=[],o=ii=0;o<r.length;o++)ut.push(Math.ceil(r[o]?r[o].createLabelsAndCalculateWidth():0)),ii+=ut[o],c+=r[o]&&!p.isNavigator?r[o].margin:0;else ut.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateWidth():0));if(yt.push(ut),u&&0<u.length)for(at=[],o=lt=0;o<u.length;o++)at.push(Math.ceil(u[o]?u[o].createLabelsAndCalculateWidth():0)),lt+=at[o],vt+=u[o]?u[o].margin:0;else at.push(Math.ceil(u[0]?u[0].createLabelsAndCalculateWidth():0));if(pt.push(at),h=Math.round(e.x1+ii+c),l=Math.round(e.x2-lt-vt>p.width-b?p.width-b:e.x2-lt-vt),n&&0<n.length)for(tt=[],o=k=0;o<n.length;o++)n[o]&&(n[o].lineCoordinates={}),n[o].lineCoordinates.width=Math.abs(l-h),n[o].title&&(n[o]._titleTextBlock.maxWidth=0<n[o].titleMaxWidth&&n[o].titleMaxWidth<n[o].lineCoordinates.width?n[o].titleMaxWidth:n[o].lineCoordinates.width),tt.push(Math.ceil(n[o]?n[o].createLabelsAndCalculateHeight():0)),k+=tt[o],f+=n[o]&&!p.isNavigator?n[o].margin:0;else tt.push(Math.ceil(n[0]?n[0].createLabelsAndCalculateHeight():0));if(dt.push(tt),i&&0<i.length)for(ct=[],o=nt=0;o<i.length;o++)i[o]&&(i[o].lineCoordinates={}),i[o].lineCoordinates.width=Math.abs(l-h),i[o].title&&(i[o]._titleTextBlock.maxWidth=0<i[o].titleMaxWidth&&i[o].titleMaxWidth<i[o].lineCoordinates.width?i[o].titleMaxWidth:i[o].lineCoordinates.width),ct.push(Math.ceil(i[o]?i[o].createLabelsAndCalculateHeight():0)),nt+=ct[o],rt+=i[o]&&!p.isNavigator?i[o].margin:0;else ct.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateHeight():0));if(gt.push(ct),n&&0<n.length)for(o=0;o<n.length;o++)n[o]&&(n[o].lineCoordinates.x1=h,l=Math.round(e.x2-lt-vt>p.width-b?p.width-b:e.x2-lt-vt),n[o]._labels&&1<n[o]._labels.length&&(s=v=0,v=n[o]._labels[1],s="dateTime"===n[o].valueType?n[o]._labels[n[o]._labels.length-2]:n[o]._labels[n[o]._labels.length-1],g=v.textBlock.width*Math.cos(Math.PI/180*Math.abs(v.textBlock.angle))+(v.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(v.textBlock.angle)),ht=s.textBlock.width*Math.cos(Math.PI/180*Math.abs(s.textBlock.angle))+(s.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(s.textBlock.angle))),!n[o]||!n[o].labelAutoFit||t(d)||t(ot)||p.isNavigator||(s=0,0<n[o].labelAngle?ot+ht>l&&(s+=0<n[o].labelAngle?ot+ht-l-lt:0):0>n[o].labelAngle?d-g<h&&d-g<n[o].viewportMinimum&&(it=h-(c+n[o].tickLength+ut+d-g+n[o].labelFontSize/2)):0===n[o].labelAngle&&(ot+ht>l&&(s=ot+ht/2-l-lt),d-g<h&&d-g<n[o].viewportMinimum&&(it=h-c-n[o].tickLength-ut-d+g/2)),n[o].viewportMaximum===n[o].maximum&&n[o].viewportMinimum===n[o].minimum&&0<n[o].labelAngle&&0<s?l-=s:n[o].viewportMaximum===n[o].maximum&&n[o].viewportMinimum===n[o].minimum&&0>n[o].labelAngle&&0<it?h+=it:n[o].viewportMaximum===n[o].maximum&&n[o].viewportMinimum===n[o].minimum&&0===n[o].labelAngle&&(0<it&&(h+=it),0<s&&(l-=s))),p.panEnabled?k=p.sessionVariables.axisX.height:p.sessionVariables.axisX.height=k,s=Math.round(e.y2-k-f+ni),v=Math.round(e.y2),n[o].lineCoordinates.x2=l,n[o].lineCoordinates.width=l-h,n[o].lineCoordinates.y1=s,n[o].lineCoordinates.y2=s,n[o].bounds={x1:h,y1:s,x2:l,y2:v-(k+f-tt[o]-ni),width:l-h,height:v-s}),ni+=tt[o]+n[o].margin;if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].lineCoordinates.x1=Math.round(e.x1+ii+c),i[o].lineCoordinates.x2=Math.round(e.x2-lt-vt>p.width-b?p.width-b:e.x2-lt-vt),i[o].lineCoordinates.width=Math.abs(l-h),i[o]._labels&&1<i[o]._labels.length&&(v=i[o]._labels[1],s="dateTime"===i[o].valueType?i[o]._labels[i[o]._labels.length-2]:i[o]._labels[i[o]._labels.length-1],g=v.textBlock.width*Math.cos(Math.PI/180*Math.abs(v.textBlock.angle))+(v.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(v.textBlock.angle)),ht=s.textBlock.width*Math.cos(Math.PI/180*Math.abs(s.textBlock.angle))+(s.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(s.textBlock.angle))),p.panEnabled?nt=p.sessionVariables.axisX2.height:p.sessionVariables.axisX2.height=nt,s=Math.round(e.y1),v=Math.round(e.y2+i[o].margin),i[o].lineCoordinates.y1=s+nt+rt-ti,i[o].lineCoordinates.y2=s,i[o].bounds={x1:h,y1:s+(nt+rt-ct[o]-ti),x2:l,y2:v,width:l-h,height:v-s},ti+=ct[o]+i[o].margin;if(r&&0<r.length)for(o=0;o<r.length;o++)c=p.isNavigator?0:10,r[o]&&(h=Math.round(n[0]?n[0].lineCoordinates.x1:i[0].lineCoordinates.x1),c=r[o]._labels&&0<r[o]._labels.length?r[o]._labels[r[o]._labels.length-1].textBlock.height/2:b,s=Math.round(e.y1+nt+rt<Math.max(c,b)?Math.max(c,b):e.y1+nt+rt),l=Math.round(n[0]?n[0].lineCoordinates.x1:i[0].lineCoordinates.x1),c=0<n.length?0:r[o]._labels&&0<r[o]._labels.length?r[o]._labels[0].textBlock.height/2:b,v=Math.round(e.y2-k-f-c),r[o].lineCoordinates={x1:l-st,y1:s,x2:l-st,y2:v,height:Math.abs(v-s)},r[o].bounds={x1:h-(ut[o]+st),y1:s,x2:l,y2:v,width:l-h,height:v-s},r[o].title&&(r[o]._titleTextBlock.maxWidth=0<r[o].titleMaxWidth&&r[o].titleMaxWidth<r[o].lineCoordinates.height?r[o].titleMaxWidth:r[o].lineCoordinates.height),st+=ut[o]+r[o].margin);if(u&&0<u.length)for(o=0;o<u.length;o++)u[o]&&(h=Math.round(n[0]?n[0].lineCoordinates.x2:i[0].lineCoordinates.x2),l=Math.round(h),c=u[o]._labels&&0<u[o]._labels.length?u[o]._labels[u[o]._labels.length-1].textBlock.height/2:0,s=Math.round(e.y1+nt+rt<Math.max(c,b)?Math.max(c,b):e.y1+nt+rt),c=0<n.length?0:u[o]._labels&&0<u[o]._labels.length?u[o]._labels[0].textBlock.height/2:0,v=Math.round(e.y2-(k+f+c)),u[o].lineCoordinates={x1:h+ft,y1:s,x2:h+ft,y2:v,height:Math.abs(v-s)},u[o].bounds={x1:h,y1:s,x2:l+(at[o]+ft),y2:v,width:l-h,height:v-s},u[o].title&&(u[o]._titleTextBlock.maxWidth=0<u[o].titleMaxWidth&&u[o].titleMaxWidth<u[o].lineCoordinates.height?u[o].titleMaxWidth:u[o].lineCoordinates.height),ft+=at[o]+u[o].margin);if(n&&0<n.length)for(o=0;o<n.length;o++)n[o]&&(n[o].calculateValueToPixelConversionParameters(),n[o].calculateBreaksSizeInValues(),n[o]._labels&&1<n[o]._labels.length&&(d=(n[o].logarithmic?Math.log(n[o]._labels[1].position/n[o].viewportMinimum)/n[o].conversionParameters.lnLogarithmBase:n[o]._labels[1].position-n[o].viewportMinimum)*Math.abs(n[o].conversionParameters.pixelPerUnit)+n[o].lineCoordinates.x1,h=n[o]._labels[n[o]._labels.length-("dateTime"===n[o].valueType?2:1)].position,h=n[o].getApparentDifference(n[o].viewportMinimum,h),ot=n[o].logarithmic?(1<h?Math.log(h)/n[o].conversionParameters.lnLogarithmBase*Math.abs(n[o].conversionParameters.pixelPerUnit):0)+n[o].lineCoordinates.x1:(0<h?h*Math.abs(n[o].conversionParameters.pixelPerUnit):0)+n[o].lineCoordinates.x1));if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].calculateValueToPixelConversionParameters(),i[o].calculateBreaksSizeInValues(),i[o]._labels&&1<i[o]._labels.length&&(d=(i[o].logarithmic?Math.log(i[o]._labels[1].position/i[o].viewportMinimum)/i[o].conversionParameters.lnLogarithmBase:i[o]._labels[1].position-i[o].viewportMinimum)*Math.abs(i[o].conversionParameters.pixelPerUnit)+i[o].lineCoordinates.x1,h=i[o]._labels[i[o]._labels.length-("dateTime"===i[o].valueType?2:1)].position,h=i[o].getApparentDifference(i[o].viewportMinimum,h),ot=i[o].logarithmic?(1<h?Math.log(h)/i[o].conversionParameters.lnLogarithmBase*Math.abs(i[o].conversionParameters.pixelPerUnit):0)+i[o].lineCoordinates.x1:(0<h?h*Math.abs(i[o].conversionParameters.pixelPerUnit):0)+i[o].lineCoordinates.x1);for(o=0;o<a.length;o++)"axisY"===a[o].type&&(a[o].calculateValueToPixelConversionParameters(),a[o].calculateBreaksSizeInValues());if(0<w){if(n&&0<n.length)for(o=0;o<n.length;o++)et=dt[w-1][o]===dt[w][o]?!0:!1;else et=!0;if(i&&0<i.length)for(o=0;o<i.length;o++)wt=gt[w-1][o]===gt[w][o]?!0:!1;else wt=!0;if(r&&0<r.length)for(o=0;o<r.length;o++)bt=yt[w-1][o]===yt[w][o]?!0:!1;else bt=!0;if(u&&0<u.length)for(o=0;o<u.length;o++)kt=pt[w-1][o]===pt[w][o]?!0:!1;else kt=!0}if(et&&wt&&bt&&kt)break;w++}if(n&&0<n.length)for(o=0;o<n.length;o++)n[o].calculateStripLinesThicknessInValues(),n[o].calculateBreaksInPixels();if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].calculateStripLinesThicknessInValues(),i[o].calculateBreaksInPixels();if(r&&0<r.length)for(o=0;o<r.length;o++)r[o].calculateStripLinesThicknessInValues(),r[o].calculateBreaksInPixels();if(u&&0<u.length)for(o=0;o<u.length;o++)u[o].calculateStripLinesThicknessInValues(),u[o].calculateBreaksInPixels()}else{for(b=[],d=[],it=[],g=[],ot=[],ht=[],dt=[],gt=[];4>w;){if(k=ft=ti=st=vt=c=rt=f=pt=yt=ni=nt=0,n&&0<n.length)for(it=[],o=ft=0;o<n.length;o++)it.push(Math.ceil(n[o]?n[o].createLabelsAndCalculateWidth():0)),ft+=it[o],f+=n[o]&&!p.isNavigator?n[o].margin:0;else it.push(Math.ceil(n[0]?n[0].createLabelsAndCalculateWidth():0));if(dt.push(it),i&&0<i.length)for(g=[],o=k=0;o<i.length;o++)g.push(Math.ceil(i[o]?i[o].createLabelsAndCalculateWidth():0)),k+=g[o],rt+=i[o]?i[o].margin:0;else g.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateWidth():0));if(gt.push(g),r&&0<r.length)for(o=0;o<r.length;o++)r[o].lineCoordinates={},h=Math.round(e.x1+ft+f),l=Math.round(e.x2-k-rt>p.width-10?p.width-10:e.x2-k-rt),r[o].labelAutoFit&&!t(tt)&&(0<!n.length&&(h=0>r[o].labelAngle?Math.max(h,tt):0===r[o].labelAngle?Math.max(h,tt/2):h),0<!i.length&&(l=0<r[o].labelAngle?l-ct/2:0===r[o].labelAngle?l-ct/2:l)),r[o].lineCoordinates.x1=h,r[o].lineCoordinates.x2=l,r[o].lineCoordinates.width=Math.abs(l-h),r[o].title&&(r[o]._titleTextBlock.maxWidth=0<r[o].titleMaxWidth&&r[o].titleMaxWidth<r[o].lineCoordinates.width?r[o].titleMaxWidth:r[o].lineCoordinates.width);if(u&&0<u.length)for(o=0;o<u.length;o++)u[o].lineCoordinates={},h=Math.round(e.x1+ft+f),l=Math.round(e.x2-k-rt>u[o].chart.width-10?u[o].chart.width-10:e.x2-k-rt),u[o]&&u[o].labelAutoFit&&!t(ut)&&(0<!n.length&&(h=0<u[o].labelAngle?Math.max(h,ut):0===u[o].labelAngle?Math.max(h,ut/2):h),0<!i.length&&(l-=at/2)),u[o].lineCoordinates.x1=h,u[o].lineCoordinates.x2=l,u[o].lineCoordinates.width=Math.abs(l-h),u[o].title&&(u[o]._titleTextBlock.maxWidth=0<u[o].titleMaxWidth&&u[o].titleMaxWidth<u[o].lineCoordinates.width?u[o].titleMaxWidth:u[o].lineCoordinates.width);if(r&&0<r.length)for(b=[],o=st=0;o<r.length;o++)b.push(Math.ceil(r[o]?r[o].createLabelsAndCalculateHeight():0)),st+=b[o]+r[o].margin,c+=r[o].margin;else b.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateHeight():0));if(ot.push(b),u&&0<u.length)for(d=[],o=ti=0;o<u.length;o++)d.push(Math.ceil(u[o]?u[o].createLabelsAndCalculateHeight():0)),ti+=d[o],vt+=u[o].margin;else d.push(Math.ceil(u[0]?u[0].createLabelsAndCalculateHeight():0));if(ht.push(d),r&&0<r.length)for(o=0;o<r.length;o++)0<r[o]._labels.length&&(v=r[o]._labels[0],s=r[o]._labels[r[o]._labels.length-1],tt=v.textBlock.width*Math.cos(Math.PI/180*Math.abs(v.textBlock.angle))+(v.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(v.textBlock.angle)),ct=s.textBlock.width*Math.cos(Math.PI/180*Math.abs(s.textBlock.angle))+(s.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(s.textBlock.angle)));if(u&&0<u.length)for(o=0;o<u.length;o++)u[o]&&0<u[o]._labels.length&&(v=u[o]._labels[0],s=u[o]._labels[u[o]._labels.length-1],ut=v.textBlock.width*Math.cos(Math.PI/180*Math.abs(v.textBlock.angle))+(v.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(v.textBlock.angle)),at=s.textBlock.width*Math.cos(Math.PI/180*Math.abs(s.textBlock.angle))+(s.textBlock.height-s.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(s.textBlock.angle)));if(p.panEnabled)for(o=0;o<r.length;o++)b[o]=p.sessionVariables.axisY.height;else for(o=0;o<r.length;o++)p.sessionVariables.axisY.height=b[o];if(r&&0<r.length)for(o=r.length-1;0<=o;o--)s=Math.round(e.y2),v=Math.round(e.y2>r[o].chart.height-10?r[o].chart.height-10:e.y2),r[o].lineCoordinates.y1=s-(b[o]+r[o].margin+nt),r[o].lineCoordinates.y2=s-(b[o]+r[o].margin+nt),r[o].bounds={x1:h,y1:s-(b[o]+nt+r[o].margin),x2:l,y2:v-(nt+r[o].margin),width:l-h,height:b[o]},r[o].title&&(r[o]._titleTextBlock.maxWidth=0<r[o].titleMaxWidth&&r[o].titleMaxWidth<r[o].lineCoordinates.width?r[o].titleMaxWidth:r[o].lineCoordinates.width),nt+=b[o]+r[o].margin;if(u&&0<u.length)for(o=u.length-1;0<=o;o--)u[o]&&(s=Math.round(e.y1),v=Math.round(e.y1+(d[o]+u[o].margin+ni)),u[o].lineCoordinates.y1=v,u[o].lineCoordinates.y2=v,u[o].bounds={x1:h,y1:s+(u[o].margin+ni),x2:l,y2:v,width:l-h,height:ti},u[o].title&&(u[o]._titleTextBlock.maxWidth=0<u[o].titleMaxWidth&&u[o].titleMaxWidth<u[o].lineCoordinates.width?u[o].titleMaxWidth:u[o].lineCoordinates.width),ni+=d[o]+u[o].margin);if(n&&0<n.length)for(o=0;o<n.length;o++){if(c=n[o]._labels&&0<n[o]._labels.length?n[o]._labels[0].textBlock.fontSize/2:0,h=Math.round(e.x1+f),s=u&&0<u.length?Math.round(u[0]?u[0].lineCoordinates.y2:e.y1<Math.max(c,10)?Math.max(c,10):e.y1):e.y1<Math.max(c,10)?Math.max(c,10):e.y1,l=Math.round(e.x1+ft+f),v=r&&0<r.length?Math.round(r[0]?r[0].lineCoordinates.y1:e.y2-st>p.height-Math.max(c,10)?p.height-Math.max(c,10):e.y2-st):e.y2>p.height-Math.max(c,10)?p.height-Math.max(c,10):e.y2,r&&0<r.length)for(c=0;c<r.length;c++)r[c]&&r[c].labelAutoFit&&(l=0>r[c].labelAngle?Math.max(l,tt):0===r[c].labelAngle?Math.max(l,tt/2):l,h=0>r[c].labelAngle||0===r[c].labelAngle?l-ft:h);if(u&&0<u.length)for(c=0;c<u.length;c++)u[c]&&u[c].labelAutoFit&&(l=u[c].lineCoordinates.x1,h=l-ft);n[o].lineCoordinates={x1:l-yt,y1:s,x2:l-yt,y2:v,height:Math.abs(v-s)};n[o].bounds={x1:l-(it[o]+yt),y1:s,x2:l,y2:v,width:l-h,height:v-s};n[o].title&&(n[o]._titleTextBlock.maxWidth=0<n[o].titleMaxWidth&&n[o].titleMaxWidth<n[o].lineCoordinates.height?n[o].titleMaxWidth:n[o].lineCoordinates.height);n[o].calculateValueToPixelConversionParameters();n[o].calculateBreaksSizeInValues();yt+=it[o]+n[o].margin}if(i&&0<i.length)for(o=0;o<i.length;o++){if(c=i[o]._labels&&0<i[o]._labels.length?i[o]._labels[0].textBlock.fontSize/2:0,h=Math.round(e.x1-f),s=u&&0<u.length?Math.round(u[0]?u[0].lineCoordinates.y2:e.y1<Math.max(c,10)?Math.max(c,10):e.y1):e.y1<Math.max(c,10)?Math.max(c,10):e.y1,l=Math.round(e.x2-k-rt),v=r&&0<r.length?Math.round(r[0]?r[0].lineCoordinates.y1:e.y2-st>p.height-Math.max(c,10)?p.height-Math.max(c,10):e.y2-st):e.y2>p.height-Math.max(c,10)?p.height-Math.max(c,10):e.y2,r&&0<r.length)for(c=0;c<r.length;c++)r[c]&&r[c].labelAutoFit&&(l=0>r[c].labelAngle?Math.max(l,tt):0===r[c].labelAngle?Math.max(l,tt/2):l,h=0>r[c].labelAngle||0===r[c].labelAngle?l-k:h);if(u&&0<u.length)for(c=0;c<u.length;c++)u[c]&&u[c].labelAutoFit&&(l=u[c].lineCoordinates.x2,h=l-k);i[o].lineCoordinates={x1:l+pt,y1:s,x2:l+pt,y2:v,height:Math.abs(v-s)};i[o].bounds={x1:h,y1:s,x2:l+g[o]+pt,y2:v,width:l-h,height:v-s};i[o].title&&(i[o]._titleTextBlock.maxWidth=0<i[o].titleMaxWidth&&i[o].titleMaxWidth<i[o].lineCoordinates.height?i[o].titleMaxWidth:i[o].lineCoordinates.height);i[o].calculateValueToPixelConversionParameters();i[o].calculateBreaksSizeInValues();pt+=g[o]+i[o].margin}for(o=0;o<a.length;o++)"axisY"===a[o].type&&(a[o].calculateValueToPixelConversionParameters(),a[o].calculateBreaksSizeInValues());if(0<w){if(n&&0<n.length)for(o=0;o<n.length;o++)et=dt[w-1][o]===dt[w][o]?!0:!1;else et=!0;if(i&&0<i.length)for(o=0;o<i.length;o++)wt=gt[w-1][o]===gt[w][o]?!0:!1;else wt=!0;if(r&&0<r.length)for(o=0;o<r.length;o++)bt=ot[w-1][o]===ot[w][o]?!0:!1;else bt=!0;if(u&&0<u.length)for(o=0;o<u.length;o++)kt=ht[w-1][o]===ht[w][o]?!0:!1;else kt=!0}if(et&&wt&&bt&&kt)break;w++}if(r&&0<r.length)for(o=0;o<r.length;o++)r[o].calculateStripLinesThicknessInValues(),r[o].calculateBreaksInPixels();if(u&&0<u.length)for(o=0;o<u.length;o++)u[o].calculateStripLinesThicknessInValues(),u[o].calculateBreaksInPixels();if(n&&0<n.length)for(o=0;o<n.length;o++)n[o].calculateStripLinesThicknessInValues(),n[o].calculateBreaksInPixels();if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].calculateStripLinesThicknessInValues(),i[o].calculateBreaksInPixels()}},r.render=function(t,i,r,u,f){var o=t[0]?t[0].chart:i[0].chart,s,e;if(f=o.ctx,s=o._axes,o.alignVerticalAxes&&o.alignVerticalAxes(),f.save(),f.beginPath(),t[0]&&f.rect(5,t[0].bounds.y1,t[0].chart.width-10,t[0].bounds.height),i[0]&&f.rect(5,i[i.length-1].bounds.y1,i[0].chart.width-10,i[0].bounds.height),f.clip(),t&&0<t.length)for(e=0;e<t.length;e++)t[e].renderLabelsTicksAndTitle();if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderLabelsTicksAndTitle();if(f.restore(),r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderLabelsTicksAndTitle();if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderLabelsTicksAndTitle();if(o.preparePlotArea(),o=o.plotArea,f.save(),f.beginPath(),f.rect(o.x1,o.y1,Math.abs(o.x2-o.x1),Math.abs(o.y2-o.y1)),f.clip(),t&&0<t.length)for(e=0;e<s.length;e++)s[e].renderStripLinesOfThicknessType("value");if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderStripLinesOfThicknessType("value");if(r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderStripLinesOfThicknessType("value");if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderStripLinesOfThicknessType("value");if(t&&0<t.length)for(e=0;e<t.length;e++)t[e].renderInterlacedColors();if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderInterlacedColors();if(r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderInterlacedColors();if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderInterlacedColors();if(f.restore(),t&&0<t.length)for(e=0;e<t.length;e++)t[e].renderGrid(),n&&(t[e].createMask(),t[e].renderBreaksBackground());if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderGrid(),n&&(i[e].createMask(),i[e].renderBreaksBackground());if(r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderGrid(),n&&(r[e].createMask(),r[e].renderBreaksBackground());if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderGrid(),n&&(u[e].createMask(),u[e].renderBreaksBackground());if(t&&0<t.length)for(e=0;e<t.length;e++)t[e].renderAxisLine();if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderAxisLine();if(r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderAxisLine();if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderAxisLine();if(t&&0<t.length)for(e=0;e<t.length;e++)t[e].renderStripLinesOfThicknessType("pixel");if(i&&0<i.length)for(e=0;e<i.length;e++)i[e].renderStripLinesOfThicknessType("pixel");if(r&&0<r.length)for(e=0;e<r.length;e++)r[e].renderStripLinesOfThicknessType("pixel");if(u&&0<u.length)for(e=0;e<u.length;e++)u[e].renderStripLinesOfThicknessType("pixel")},r.prototype.calculateStripLinesThicknessInValues=function(){for(var n=0;n<this.stripLines.length;n++)if(null!==this.stripLines[n].startValue&&null!==this.stripLines[n].endValue){var t=Math.min(this.stripLines[n].startValue,this.stripLines[n].endValue),i=Math.max(this.stripLines[n].startValue,this.stripLines[n].endValue),t=this.getApparentDifference(t,i);this.stripLines[n].value=this.logarithmic?this.stripLines[n].value*Math.sqrt(Math.log(this.stripLines[n].endValue/this.stripLines[n].startValue)/Math.log(t)):this.stripLines[n].value+(Math.abs(this.stripLines[n].endValue-this.stripLines[n].startValue)-t)/2;this.stripLines[n].thickness=t;this.stripLines[n]._thicknessType="value"}},r.prototype.calculateBreaksSizeInValues=function(){for(var r="left"===this._position||"right"===this._position?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,i=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],f=this.conversionParameters.pixelPerUnit||r/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),e=this.scaleBreaks&&!t(this.scaleBreaks.options.spacing),u,n=0;n<i.length;n++)u=e||!t(i[n].options.spacing),i[n].spacing=fi(i[n].spacing,r,8,u?.1*r:8,u?0:3)<<0,i[n].size=0>i[n].spacing?0:Math.abs(i[n].spacing/f),this.logarithmic&&(i[n].size=Math.pow(this.logarithmBase,i[n].size))},r.prototype.calculateBreaksInPixels=function(){var i,n;if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length))for(i=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],i.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null),n=0;n<i.length&&!(i[n].startValue>this.conversionParameters.maximum);n++)i[n].endValue<this.conversionParameters.minimum||(t(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=n),i[n].startValue>=this.conversionParameters.minimum&&(i[n].startPixel=this.convertValueToPixel(i[n].startValue),this.scaleBreaks.lastBreakIndex=n),i[n].endValue<=this.conversionParameters.maximum&&(i[n].endPixel=this.convertValueToPixel(i[n].endValue)))},r.prototype.renderLabelsTicksAndTitle=function(){var i=this,f=!1,o=0,u=0,s=1,e=0,r,n,t;if(0!==this.labelAngle&&360!==this.labelAngle&&(s=1.2),"undefined"==typeof this.options.interval){if("bottom"===this._position||"top"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var o=[],s=0!==this.labelAngle&&360!==this.labelAngle?1:1.2,h,c=this.viewportMaximum,a=this.lineCoordinates.width/Math.log(this.range),r=this._labels.length-1;0<=r;r--){if(n=this._labels[r],n.position<this.viewportMinimum)break;n.position>this.viewportMaximum||!(r===this._labels.length-1||h<Math.log(c/n.position)*a/s)||(o.push(n),c=n.position,h=n.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+n.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)))}this._labels=o}else{for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||(h=n.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+n.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),o+=h);o>this.lineCoordinates.width*s&&this.labelAutoFit&&(f=!0)}if("left"===this._position||"right"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var o=[],l,c=this.viewportMaximum,a=this.lineCoordinates.height/Math.log(this.range),r=this._labels.length-1;0<=r;r--){if(n=this._labels[r],n.position<this.viewportMinimum)break;n.position>this.viewportMaximum||!(r===this._labels.length-1||l<Math.log(c/n.position)*a)||(o.push(n),c=n.position,l=n.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+n.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)))}this._labels=o}else{for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||(l=n.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+n.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),u+=l);u>this.lineCoordinates.height*s&&this.labelAutoFit&&(f=!0)}}if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort(function(n,t){return n.position-t.position}),r=0,"bottom"===this._position){for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||n.position>this.viewportMaximum||f&&0!=e++%2&&this.labelAutoFit||(t=this.getPixelCoordinatesOnAxis(n.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,u=1==this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(u,t.y<<0),this.ctx.lineTo(u,t.y+this.tickLength<<0),this.ctx.stroke()),0===n.textBlock.angle?(t.x-=n.textBlock.width/2,t.y="inside"===this.labelPlacement?t.y-(this.tickLength+n.textBlock.fontSize/2):t.y+this.tickLength+n.textBlock.fontSize/2):(t.x="inside"===this.labelPlacement?0>this.labelAngle?t.x:t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):t.x-(0>this.labelAngle?n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),t.y="inside"===this.labelPlacement?0>this.labelAngle?t.y-this.tickLength-5:t.y-this.tickLength-Math.abs(n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5):t.y+this.tickLength+Math.abs(0>this.labelAngle?n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),n.textBlock.x=t.x,n.textBlock.y=t.y);"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(r=0;r<i._labels.length;r++)if(n=i._labels[r],!(n.position<i.viewportMinimum||n.position>i.viewportMaximum||f&&0!=e++%2&&i.labelAutoFit)&&(t=i.getPixelCoordinatesOnAxis(n.position),i.tickThickness)){i.ctx.lineWidth=i.tickThickness;i.ctx.strokeStyle=i.tickColor;var u=1==i.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0;i.ctx.save();i.ctx.beginPath();i.ctx.moveTo(u,t.y<<0);i.ctx.lineTo(u,t.y-i.tickLength<<0);i.ctx.stroke();i.ctx.restore()}},this);this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height-3,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("top"===this._position){for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||n.position>this.viewportMaximum||f&&0!=e++%2&&this.labelAutoFit||(t=this.getPixelCoordinatesOnAxis(n.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,u=1==this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(u,t.y<<0),this.ctx.lineTo(u,t.y-this.tickLength<<0),this.ctx.stroke()),0===n.textBlock.angle?(t.x-=n.textBlock.width/2,t.y="inside"===this.labelPlacement?t.y+this.labelFontSize/2+this.tickLength+5:t.y-(this.tickLength+n.textBlock.height-n.textBlock.fontSize/2)):(t.x="inside"===this.labelPlacement?0<this.labelAngle?t.x:t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):t.x+(n.textBlock.height-this.tickLength-this.labelFontSize)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),t.y="inside"===this.labelPlacement?0<this.labelAngle?t.y+this.tickLength+5:t.y-n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength+5:t.y-(this.tickLength+((n.textBlock.height-n.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))),n.textBlock.x=t.x,n.textBlock.y=t.y);"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(r=0;r<i._labels.length;r++)if(n=i._labels[r],!(n.position<i.viewportMinimum||n.position>i.viewportMaximum||f&&0!=e++%2&&i.labelAutoFit)&&(t=i.getPixelCoordinatesOnAxis(n.position),i.tickThickness)){i.ctx.lineWidth=i.tickThickness;i.ctx.strokeStyle=i.tickColor;var u=1==this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0;i.ctx.save();i.ctx.beginPath();i.ctx.moveTo(u,t.y<<0);i.ctx.lineTo(u,t.y+i.tickLength<<0);i.ctx.stroke();i.ctx.restore()}},this);this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("left"===this._position){for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||n.position>this.viewportMaximum||f&&0!=e++%2&&this.labelAutoFit||(t=this.getPixelCoordinatesOnAxis(n.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,u=1==this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,u),this.ctx.lineTo(t.x-this.tickLength<<0,u),this.ctx.stroke()),0===this.labelAngle?(n.textBlock.y=t.y,n.textBlock.x="inside"===this.labelPlacement?t.x+this.tickLength+5:t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5):(n.textBlock.y="inside"===this.labelPlacement?t.y:t.y-n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),n.textBlock.x="inside"===this.labelPlacement?t.x+this.tickLength+5:0<this.labelAngle?t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(n.textBlock.height-n.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength));"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(r=0;r<i._labels.length;r++)if(n=i._labels[r],!(n.position<i.viewportMinimum||n.position>i.viewportMaximum||f&&0!=e++%2&&i.labelAutoFit)&&(t=i.getPixelCoordinatesOnAxis(n.position),i.tickThickness)){i.ctx.lineWidth=i.tickThickness;i.ctx.strokeStyle=i.tickColor;var u=1==i.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0;i.ctx.save();i.ctx.beginPath();i.ctx.moveTo(t.x<<0,u);i.ctx.lineTo(t.x+i.tickLength<<0,u);i.ctx.stroke();i.ctx.restore()}},this);this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+1,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("right"===this._position){for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||n.position>this.viewportMaximum||f&&0!=e++%2&&this.labelAutoFit||(t=this.getPixelCoordinatesOnAxis(n.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,u=1==this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,u),this.ctx.lineTo(t.x+this.tickLength<<0,u),this.ctx.stroke()),0===this.labelAngle?(n.textBlock.y=t.y,n.textBlock.x="inside"===this.labelPlacement?t.x-n.textBlock.width-this.tickLength-5:t.x+this.tickLength+5):(n.textBlock.y="inside"===this.labelPlacement?t.y-n.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0>this.labelAngle?t.y:t.y-(n.textBlock.height-n.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),n.textBlock.x="inside"===this.labelPlacement?t.x-n.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:0<this.labelAngle?t.x+(n.textBlock.height-n.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:t.x+this.tickLength+5));"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(r=0;r<i._labels.length;r++)if(n=i._labels[r],!(n.position<i.viewportMinimum||n.position>i.viewportMaximum||f&&0!=e++%2&&i.labelAutoFit)&&(t=i.getPixelCoordinatesOnAxis(n.position),i.tickThickness)){i.ctx.lineWidth=i.tickThickness;i.ctx.strokeStyle=i.tickColor;var u=1==i.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0;i.ctx.save();i.ctx.beginPath();i.ctx.moveTo(t.x<<0,u);i.ctx.lineTo(t.x-i.tickLength<<0,u);i.ctx.stroke();i.ctx.restore()}},this);this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-1,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(e=0,"inside"===this.labelPlacement)this.chart.addEventListener("dataAnimationIterationEnd",function(){for(r=0;r<i._labels.length;r++)n=i._labels[r],n.position<i.viewportMinimum||n.position>i.viewportMaximum||f&&0!=e++%2&&i.labelAutoFit||(i.ctx.save(),i.ctx.beginPath(),n.textBlock.render(!0),i.ctx.restore())},this);else for(r=0;r<this._labels.length;r++)n=this._labels[r],n.position<this.viewportMinimum||n.position>this.viewportMaximum||f&&0!=e++%2&&this.labelAutoFit||n.textBlock.render(!0)},r.prototype.renderInterlacedColors=function(){var u=this.chart.plotArea.ctx,n,i,r=this.chart.plotArea,t=0;if(n=!0,("bottom"===this._position||"top"===this._position)&&this.interlacedColor)for(u.fillStyle=this.interlacedColor,t=0;t<this._labels.length;t++)n?(n=this.getPixelCoordinatesOnAxis(this._labels[t].position),i=t+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[t+1].position),u.fillRect(Math.min(i.x,n.x),r.y1,Math.abs(i.x-n.x),Math.abs(r.y1-r.y2)),n=!1):n=!0;else if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(u.fillStyle=this.interlacedColor,t=0;t<this._labels.length;t++)n?(i=this.getPixelCoordinatesOnAxis(this._labels[t].position),n=t+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[t+1].position),u.fillRect(r.x1,Math.min(i.y,n.y),Math.abs(r.x1-r.x2),Math.abs(n.y-i.y)),n=!1):n=!0;u.beginPath()},r.prototype.renderStripLinesOfThicknessType=function(n){var u,e;if(this.stripLines&&0<this.stripLines.length&&n){for(var o=this,i,r=0,f=0,l=!1,s=!1,c=[],h=[],s=!1,r=0;r<this.stripLines.length;r++)u=this.stripLines[r],u._thicknessType===n&&("pixel"===n&&(u.value<this.viewportMinimum||u.value>this.viewportMaximum||t(u.value)||isNaN(this.range))||c.push(u));for(r=0;r<this._stripLineLabels.length;r++)(u=this.stripLines[r],i=this._stripLineLabels[r],i.position<this.viewportMinimum||i.position>this.viewportMaximum||isNaN(this.range))||(n=this.getPixelCoordinatesOnAxis(i.position),"outside"===i.stripLine.labelPlacement?(u&&(this.ctx.strokeStyle=u.color,"pixel"===u._thicknessType&&(this.ctx.lineWidth=u.thickness)),"bottom"===this._position)?(e=1==this.ctx.lineWidth%2?(n.x<<0)+.5:n.x<<0,this.ctx.beginPath(),this.ctx.moveTo(e,n.y<<0),this.ctx.lineTo(e,n.y+this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(n.x-=i.textBlock.width/2,n.y+=this.tickLength+i.textBlock.fontSize/2):(n.x-=0>this.labelAngle?i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,n.y+=this.tickLength+Math.abs(0>this.labelAngle?i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5))):"top"===this._position?(e=1==this.ctx.lineWidth%2?(n.x<<0)+.5:n.x<<0,this.ctx.beginPath(),this.ctx.moveTo(e,n.y<<0),this.ctx.lineTo(e,n.y-this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(n.x-=i.textBlock.width/2,n.y-=this.tickLength+i.textBlock.height):(n.x+=(i.textBlock.height-this.tickLength-this.labelFontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),n.y-=this.tickLength+(i.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))):"left"===this._position?(e=1==this.ctx.lineWidth%2?(n.y<<0)+.5:n.y<<0,this.ctx.beginPath(),this.ctx.moveTo(n.x<<0,e),this.ctx.lineTo(n.x-this.tickLength<<0,e),this.ctx.stroke(),0===this.labelAngle?n.x=n.x-i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(n.y-=i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),n.x=0<this.labelAngle?n.x-i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:n.x-i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(i.textBlock.height-i.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength)):"right"===this._position&&(e=1==this.ctx.lineWidth%2?(n.y<<0)+.5:n.y<<0,this.ctx.beginPath(),this.ctx.moveTo(n.x<<0,e),this.ctx.lineTo(n.x+this.tickLength<<0,e),this.ctx.stroke(),0===this.labelAngle?n.x=n.x+this.tickLength+5:(n.y=0>this.labelAngle?n.y:n.y-(i.textBlock.height-i.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),n.x=0<this.labelAngle?n.x+(i.textBlock.height-i.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:n.x+this.tickLength+5)):(i.textBlock.angle=-90,"bottom"===this._position?(i.textBlock.maxWidth=this.options.stripLines[r].labelMaxWidth?this.options.stripLines[r].labelMaxWidth:this.chart.plotArea.height-3,i.textBlock.measureText(),n.x-i.textBlock.height>this.chart.plotArea.x1?n.x-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2+3:(i.textBlock.angle=90,n.x+=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2+3),n.y=-90===i.textBlock.angle?"near"===i.stripLine.labelAlign?this.chart.plotArea.y2-3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+i.textBlock.width)/2:this.chart.plotArea.y1+i.textBlock.width+3:"near"===i.stripLine.labelAlign?this.chart.plotArea.y2-i.textBlock.width-3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-i.textBlock.width)/2:this.chart.plotArea.y1+3):"top"===this._position?(i.textBlock.maxWidth=this.options.stripLines[r].labelMaxWidth?this.options.stripLines[r].labelMaxWidth:this.chart.plotArea.height-3,i.textBlock.measureText(),n.x-i.textBlock.height>this.chart.plotArea.x1?n.x-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2+3:(i.textBlock.angle=90,n.x+=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2+3),n.y=-90===i.textBlock.angle?"near"===i.stripLine.labelAlign?this.chart.plotArea.y1+i.textBlock.width+3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+i.textBlock.width)/2:this.chart.plotArea.y2-3:"near"===i.stripLine.labelAlign?this.chart.plotArea.y1+3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-i.textBlock.width)/2:this.chart.plotArea.y2-i.textBlock.width-3):"left"===this._position?(i.textBlock.maxWidth=this.options.stripLines[r].labelMaxWidth?this.options.stripLines[r].labelMaxWidth:this.chart.plotArea.width-3,i.textBlock.angle=0,i.textBlock.measureText(),n.y-i.textBlock.height>this.chart.plotArea.y1?n.y-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize+3:n.y-i.textBlock.height<this.chart.plotArea.y2?n.y+=i.textBlock.fontSize/2+3:n.y-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize+3,n.x="near"===i.stripLine.labelAlign?this.chart.plotArea.x1+3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-i.textBlock.width/2:this.chart.plotArea.x2-i.textBlock.width-3):"right"===this._position&&(i.textBlock.maxWidth=this.options.stripLines[r].labelMaxWidth?this.options.stripLines[r].labelMaxWidth:this.chart.plotArea.width-3,i.textBlock.angle=0,i.textBlock.measureText(),n.y-+i.textBlock.height>this.chart.plotArea.y1?n.y-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2-3:n.y-i.textBlock.height<this.chart.plotArea.y2?n.y+=i.textBlock.fontSize/2+3:n.y-=t(u.startValue)?i.textBlock.height-i.textBlock.fontSize/2:i.textBlock.height/2-i.textBlock.fontSize/2+3,n.x="near"===i.stripLine.labelAlign?this.chart.plotArea.x2-i.textBlock.width-3:"center"===i.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-i.textBlock.width/2:this.chart.plotArea.x1+3)),i.textBlock.x=n.x,i.textBlock.y=n.y,h.push(i));if(!s){for(s=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),r=0;r<c.length;r++)u=c[r],u.showOnTop?l||(l=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),f=0;f<c.length;f++)u=c[f],u.showOnTop&&u.render();this.ctx.restore()},u)):u.render();for(r=0;r<h.length;r++)i=h[r],i.stripLine.showOnTop?s||(s=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(f=0;f<h.length;f++)i=h[f],"inside"===i.stripLine.labelPlacement&&i.stripLine.showOnTop&&(o.ctx.save(),o.ctx.beginPath(),o.ctx.rect(o.chart.plotArea.x1,o.chart.plotArea.y1,o.chart.plotArea.width,o.chart.plotArea.height),o.ctx.clip(),i.textBlock.render(!0),o.ctx.restore())},i.textBlock)):"inside"===i.stripLine.labelPlacement&&i.textBlock.render(!0);this.ctx.restore();s=!0}if(s)for(s=!1,r=0;r<h.length;r++)i=h[r],i.stripLine.showOnTop?s||(s=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(f=0;f<h.length;f++)i=h[f],"outside"===i.stripLine.labelPlacement&&i.stripLine.showOnTop&&i.textBlock.render(!0)},i.textBlock)):"outside"===i.stripLine.labelPlacement&&i.textBlock.render(!0)}},r.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},r.prototype.createMask=function(){var i,t;if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){for(i=this.scaleBreaks._appliedBreaks,n?(this.maskCanvas=ut(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip(),t=0;t<i.length;t++)i[t].endValue<this.viewportMinimum||i[t].startValue>this.viewportMaximum||isNaN(this.range)||i[t].render(this.maskCtx);this.maskCtx.restore()}},r.prototype.renderCrosshair=function(n,t){this.crosshair.render(n,t)},r.prototype.renderGrid=function(){var n,i,r,t;if(this.gridThickness&&0<this.gridThickness){if(n=this.chart.ctx,n.save(),r=this.chart.plotArea,n.lineWidth=this.gridThickness,n.strokeStyle=this.gridColor,n.setLineDash&&n.setLineDash(u(this.gridDashType,this.gridThickness)),"bottom"===this._position||"top"===this._position)for(t=0;t<this._labels.length;t++)this._labels[t].position<this.viewportMinimum||this._labels[t].position>this.viewportMaximum||this._labels[t].breaksLabelType||(n.beginPath(),i=this.getPixelCoordinatesOnAxis(this._labels[t].position),i=1==n.lineWidth%2?(i.x<<0)+.5:i.x<<0,n.moveTo(i,r.y1<<0),n.lineTo(i,r.y2<<0),n.stroke());else if("left"===this._position||"right"===this._position)for(t=0;t<this._labels.length;t++)this._labels[t].position<this.viewportMinimum||this._labels[t].position>this.viewportMaximum||this._labels[t].breaksLabelType||(n.beginPath(),i=this.getPixelCoordinatesOnAxis(this._labels[t].position),i=1==n.lineWidth%2?(i.y<<0)+.5:i.y<<0,n.moveTo(r.x1<<0,i),n.lineTo(r.x2<<0,i),n.stroke());n.restore()}},r.prototype.renderAxisLine=function(){var c=this.chart.ctx,i=n?this.chart._preRenderCtx:c,s=Math.ceil(this.tickThickness/(this.reversed?-2:2)),h=Math.ceil(this.tickThickness/(this.reversed?2:-2)),r,o,f,e;if(i.save(),"bottom"===this._position||"top"===this._position){if(this.lineThickness){if(this.reversed?(r=this.lineCoordinates.x2,o=this.lineCoordinates.x1):(r=this.lineCoordinates.x1,o=this.lineCoordinates.x2),i.lineWidth=this.lineThickness,i.strokeStyle=this.lineColor?this.lineColor:"black",i.setLineDash&&i.setLineDash(u(this.lineDashType,this.lineThickness)),f=1==this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0,i.beginPath(),this.scaleBreaks&&!t(this.scaleBreaks.firstBreakIndex))if(t(this.scaleBreaks.lastBreakIndex))r=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+h;else for(e=this.scaleBreaks.firstBreakIndex;e<=this.scaleBreaks.lastBreakIndex;e++)i.moveTo(r,f),i.lineTo(this.scaleBreaks._appliedBreaks[e].startPixel+s,f),r=this.scaleBreaks._appliedBreaks[e].endPixel+h;r&&(i.moveTo(r,f),i.lineTo(o,f));i.stroke()}}else if(("left"===this._position||"right"===this._position)&&this.lineThickness){if(this.reversed?(r=this.lineCoordinates.y1,o=this.lineCoordinates.y2):(r=this.lineCoordinates.y2,o=this.lineCoordinates.y1),i.lineWidth=this.lineThickness,i.strokeStyle=this.lineColor,i.setLineDash&&i.setLineDash(u(this.lineDashType,this.lineThickness)),f=1==this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,i.beginPath(),this.scaleBreaks&&!t(this.scaleBreaks.firstBreakIndex))if(t(this.scaleBreaks.lastBreakIndex))r=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+s;else for(e=this.scaleBreaks.firstBreakIndex;e<=this.scaleBreaks.lastBreakIndex;e++)i.moveTo(f,r),i.lineTo(f,this.scaleBreaks._appliedBreaks[e].startPixel+h),r=this.scaleBreaks._appliedBreaks[e].endPixel+s;r&&(i.moveTo(f,r),i.lineTo(f,o));i.stroke()}n&&(c.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),i.clearRect(0,0,this.chart.width,this.chart.height));i.restore()},r.prototype.getPixelCoordinatesOnAxis=function(n){var t={};return("bottom"===this._position||"top"===this._position)&&(t.x=this.convertValueToPixel(n),t.y=this.lineCoordinates.y1),("left"===this._position||"right"===this._position)&&(t.y=this.convertValueToPixel(n),t.x=this.lineCoordinates.x2),t},r.prototype.convertPixelToValue=function(n){if("undefined"==typeof n)return null;var u=0,t=0,r,u=!0,i=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],t="number"==typeof n?n:"left"===this._position||"right"===this._position?n.y:n.x;if(this.logarithmic){if(n=r=Math.pow(this.logarithmBase,(t-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),t<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(t=0;t<i.length;t++)if(!(i[t].endValue<this.conversionParameters.minimum))if(u)if(i[t].startValue<this.conversionParameters.minimum){if(1<i[t].size&&this.conversionParameters.minimum*Math.pow(i[t].endValue/i[t].startValue,Math.log(r)/Math.log(i[t].size))<i[t].endValue){n=Math.pow(i[t].endValue/i[t].startValue,Math.log(r)/Math.log(i[t].size));break}else n*=i[t].endValue/this.conversionParameters.minimum/Math.pow(i[t].size,Math.log(i[t].endValue/this.conversionParameters.minimum)/Math.log(i[t].endValue/i[t].startValue)),r/=Math.pow(i[t].size,Math.log(i[t].endValue/this.conversionParameters.minimum)/Math.log(i[t].endValue/i[t].startValue));u=!1}else if(r>i[t].startValue/this.conversionParameters.minimum){if(r/=i[t].startValue/this.conversionParameters.minimum,r<i[t].size){n*=Math.pow(i[t].endValue/i[t].startValue,1===i[t].size?1:Math.log(r)/Math.log(i[t].size))/r;break}else n*=i[t].endValue/i[t].startValue/i[t].size;r/=i[t].size;u=!1}else break;else if(r>i[t].startValue/i[t-1].endValue){if(r/=i[t].startValue/i[t-1].endValue,r<i[t].size){n*=Math.pow(i[t].endValue/i[t].startValue,1===i[t].size?1:Math.log(r)/Math.log(i[t].size))/r;break}else n*=i[t].endValue/i[t].startValue/i[t].size;r/=i[t].size}else break}else for(t=i.length-1;0<=t;t--)if(!(i[t].startValue>this.conversionParameters.minimum))if(u)if(i[t].endValue>this.conversionParameters.minimum){if(1<i[t].size&&this.conversionParameters.minimum*Math.pow(i[t].endValue/i[t].startValue,Math.log(r)/Math.log(i[t].size))>i[t].startValue){n=Math.pow(i[t].endValue/i[t].startValue,Math.log(r)/Math.log(i[t].size));break}else n*=i[t].startValue/this.conversionParameters.minimum*Math.pow(i[t].size,Math.log(i[t].startValue/this.conversionParameters.minimum)/Math.log(i[t].endValue/i[t].startValue))*r,r*=Math.pow(i[t].size,Math.log(this.conversionParameters.minimum/i[t].startValue)/Math.log(i[t].endValue/i[t].startValue));u=!1}else if(r<i[t].endValue/this.conversionParameters.minimum){if(r/=i[t].endValue/this.conversionParameters.minimum,r>1/i[t].size){n*=Math.pow(i[t].endValue/i[t].startValue,1>=i[t].size?1:Math.log(r)/Math.log(i[t].size))*r;break}else n/=i[t].endValue/i[t].startValue/i[t].size;r*=i[t].size;u=!1}else break;else if(r<i[t].endValue/i[t+1].startValue){if(r/=i[t].endValue/i[t+1].startValue,r>1/i[t].size){n*=Math.pow(i[t].endValue/i[t].startValue,1>=i[t].size?1:Math.log(r)/Math.log(i[t].size))*r;break}else n/=i[t].endValue/i[t].startValue/i[t].size;r*=i[t].size}else break;u=n*this.viewportMinimum}else{if(n=r=(t-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,t<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(t=0;t<i.length;t++)if(!(i[t].endValue<this.conversionParameters.minimum))if(u)if(i[t].startValue<this.conversionParameters.minimum){if(i[t].size&&this.conversionParameters.minimum+r*(i[t].endValue-i[t].startValue)/i[t].size<i[t].endValue){n=0>=i[t].size?0:r*(i[t].endValue-i[t].startValue)/i[t].size;break}else n+=i[t].endValue-this.conversionParameters.minimum-i[t].size*(i[t].endValue-this.conversionParameters.minimum)/(i[t].endValue-i[t].startValue),r-=i[t].size*(i[t].endValue-this.conversionParameters.minimum)/(i[t].endValue-i[t].startValue);u=!1}else if(r>i[t].startValue-this.conversionParameters.minimum){if(r-=i[t].startValue-this.conversionParameters.minimum,r<i[t].size){n+=(i[t].endValue-i[t].startValue)*(0===i[t].size?1:r/i[t].size)-r;break}else n+=i[t].endValue-i[t].startValue-i[t].size;r-=i[t].size;u=!1}else break;else if(r>i[t].startValue-i[t-1].endValue){if(r-=i[t].startValue-i[t-1].endValue,r<i[t].size){n+=(i[t].endValue-i[t].startValue)*(0===i[t].size?1:r/i[t].size)-r;break}else n+=i[t].endValue-i[t].startValue-i[t].size;r-=i[t].size}else break}else for(t=i.length-1;0<=t;t--)if(!(i[t].startValue>this.conversionParameters.minimum))if(u)if(i[t].endValue>this.conversionParameters.minimum)if(i[t].size&&this.conversionParameters.minimum+r*(i[t].endValue-i[t].startValue)/i[t].size>i[t].startValue){n=0>=i[t].size?0:r*(i[t].endValue-i[t].startValue)/i[t].size;break}else n+=i[t].startValue-this.conversionParameters.minimum+i[t].size*(this.conversionParameters.minimum-i[t].startValue)/(i[t].endValue-i[t].startValue),r+=i[t].size*(this.conversionParameters.minimum-i[t].startValue)/(i[t].endValue-i[t].startValue),u=!1;else if(r<i[t].endValue-this.conversionParameters.minimum){if(r-=i[t].endValue-this.conversionParameters.minimum,r>-1*i[t].size){n+=(i[t].endValue-i[t].startValue)*(0===i[t].size?1:r/i[t].size)+r;break}else n-=i[t].endValue-i[t].startValue-i[t].size;r+=i[t].size;u=!1}else break;else if(r<i[t].endValue-i[t+1].startValue){if(r-=i[t].endValue-i[t+1].startValue,r>-1*i[t].size){n+=(i[t].endValue-i[t].startValue)*(0===i[t].size?1:r/i[t].size)+r;break}else n-=i[t].endValue-i[t].startValue-i[t].size;r+=i[t].size}else break;u=this.conversionParameters.minimum+n}return u},r.prototype.convertValueToPixel=function(n){return n=this.getApparentDifference(this.conversionParameters.minimum,n,n),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(n/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:"axisX"===this.type?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(n-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(n-this.conversionParameters.minimum)+.5},r.prototype.getApparentDifference=function(n,i,r,u){var e=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],f;if(this.logarithmic)for(r=t(r)?i/n:r,f=0;f<e.length&&!(i<e[f].startValue);f++)n>e[f].endValue||(n<=e[f].startValue&&i>=e[f].endValue?r=r/e[f].endValue*e[f].startValue*e[f].size:n>=e[f].startValue&&i>=e[f].endValue?r=r/e[f].endValue*n*Math.pow(e[f].size,Math.log(e[f].endValue/n)/Math.log(e[f].endValue/e[f].startValue)):n<=e[f].startValue&&i<=e[f].endValue?r=r/i*e[f].startValue*Math.pow(e[f].size,Math.log(i/e[f].startValue)/Math.log(e[f].endValue/e[f].startValue)):!u&&n>e[f].startValue&&i<e[f].endValue&&(r=n*Math.pow(e[f].size,Math.log(i/n)/Math.log(e[f].endValue/e[f].startValue))));else for(r=t(r)?Math.abs(i-n):r,f=0;f<e.length&&!(i<e[f].startValue);f++)n>e[f].endValue||(n<=e[f].startValue&&i>=e[f].endValue?r=r-e[f].endValue+e[f].startValue+e[f].size:n>e[f].startValue&&i>=e[f].endValue?r=r-e[f].endValue+n+e[f].size*(e[f].endValue-n)/(e[f].endValue-e[f].startValue):n<=e[f].startValue&&i<e[f].endValue?r=r-i+e[f].startValue+e[f].size*(i-e[f].startValue)/(e[f].endValue-e[f].startValue):!u&&n>e[f].startValue&&i<e[f].endValue&&(r=n+e[f].size*(i-n)/(e[f].endValue-e[f].startValue)));return r},r.prototype.setViewPortRange=function(n,t){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(n,t);this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(n,t)},r.prototype.getXValueAt=function(n){if(!n)return null;var t=null;return"left"===this._position?t=this.convertPixelToValue(n.y):"bottom"===this._position&&(t=this.convertPixelToValue(n.x)),t},r.prototype.calculateValueToPixelConversionParameters=function(n){var t;n=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var u={pixelPerUnit:null,minimum:null,reference:null},i=this.lineCoordinates.width,r=this.lineCoordinates.height,i="bottom"===this._position||"top"===this._position?i:r,r=Math.abs(this.range);if(this.logarithmic)for(t=0;t<n.length&&!(this.viewportMaximum<n[t].startValue);t++)this.viewportMinimum>n[t].endValue||(this.viewportMinimum>=n[t].startValue&&this.viewportMaximum<=n[t].endValue?i=0:this.viewportMinimum<=n[t].startValue&&this.viewportMaximum>=n[t].endValue?(r=r/n[t].endValue*n[t].startValue,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100):i-Math.min(n[t].spacing,.1*i)):this.viewportMinimum>n[t].startValue&&this.viewportMaximum>=n[t].endValue?(r=r/n[t].endValue*this.viewportMinimum,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100*Math.log(n[t].endValue/this.viewportMinimum)/Math.log(n[t].endValue/n[t].startValue)):i-Math.min(n[t].spacing,.1*i)*Math.log(n[t].endValue/this.viewportMinimum)/Math.log(n[t].endValue/n[t].startValue)):this.viewportMinimum<=n[t].startValue&&this.viewportMaximum<n[t].endValue&&(r=r/this.viewportMaximum*n[t].startValue,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100*Math.log(this.viewportMaximum/n[t].startValue)/Math.log(n[t].endValue/n[t].startValue)):i-Math.min(n[t].spacing,.1*i)*Math.log(this.viewportMaximum/n[t].startValue)/Math.log(n[t].endValue/n[t].startValue)));else for(t=0;t<n.length&&!(this.viewportMaximum<n[t].startValue);t++)this.viewportMinimum>n[t].endValue||(this.viewportMinimum>=n[t].startValue&&this.viewportMaximum<=n[t].endValue?i=0:this.viewportMinimum<=n[t].startValue&&this.viewportMaximum>=n[t].endValue?(r=r-n[t].endValue+n[t].startValue,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100):i-Math.min(n[t].spacing,.1*i)):this.viewportMinimum>n[t].startValue&&this.viewportMaximum>=n[t].endValue?(r=r-n[t].endValue+this.viewportMinimum,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100*(n[t].endValue-this.viewportMinimum)/(n[t].endValue-n[t].startValue)):i-Math.min(n[t].spacing,.1*i)*(n[t].endValue-this.viewportMinimum)/(n[t].endValue-n[t].startValue)):this.viewportMinimum<=n[t].startValue&&this.viewportMaximum<n[t].endValue&&(r=r-this.viewportMaximum+n[t].startValue,i=0<n[t].spacing.toString().indexOf("%")?i*(1-parseFloat(n[t].spacing)/100*(this.viewportMaximum-n[t].startValue)/(n[t].endValue-n[t].startValue)):i-Math.min(n[t].spacing,.1*i)*(this.viewportMaximum-n[t].startValue)/(n[t].endValue-n[t].startValue)));u.minimum=this.viewportMinimum;u.maximum=this.viewportMaximum;u.range=r;("bottom"===this._position||"top"===this._position)&&(this.logarithmic?(u.lnLogarithmBase=Math.log(this.logarithmBase),u.pixelPerUnit=(this.reversed?-1:1)*i*u.lnLogarithmBase/Math.log(Math.abs(r))):u.pixelPerUnit=(this.reversed?-1:1)*i/Math.abs(r),u.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1);("left"===this._position||"right"===this._position)&&(this.logarithmic?(u.lnLogarithmBase=Math.log(this.logarithmBase),u.pixelPerUnit=(this.reversed?1:-1)*i*u.lnLogarithmBase/Math.log(Math.abs(r))):u.pixelPerUnit=(this.reversed?1:-1)*i/Math.abs(r),u.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2);this.conversionParameters=u},r.prototype.calculateAxisParameters=function(){var f,i,u,e,n;if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var f=this.chart.layoutManager.getFreeSpace(),h=!1,o=!1;if("bottom"===this._position||"top"===this._position?(this.maxWidth=f.width,this.maxHeight=f.height):(this.maxWidth=f.height,this.maxHeight=f.width),f="axisX"===this.type?"xySwapped"===this.chart.plotInfo.axisPlacement?62:70:"xySwapped"===this.chart.plotInfo.axisPlacement?50:40,n=4,"axisX"===this.type&&(n=600>this.maxWidth?8:6),f=Math.max(n,Math.floor(this.maxWidth/f)),n=0,!t(this.options.viewportMinimum)&&!t(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),!t(this.options.viewportMinimum)||t(this.sessionVariables.newViewportMinimum)||isNaN(this.sessionVariables.newViewportMinimum)?(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum):this.viewportMinimum=this.sessionVariables.newViewportMinimum,!t(this.options.viewportMaximum)||t(this.sessionVariables.newViewportMaximum)||isNaN(this.sessionVariables.newViewportMaximum)?(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum):this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.scaleBreaks)for(n=0;n<this.scaleBreaks._appliedBreaks.length;n++)if((!t(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[n].startValue||!t(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[n].startValue||!t(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[n].startValue)&&(!t(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[n].endValue||!t(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[n].endValue||!t(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[n].endValue)){this.scaleBreaks._appliedBreaks.splice(n,1);break}if("axisX"===this.type){if(this.dataSeries&&0<this.dataSeries.length)for(i=0;i<this.dataSeries.length;i++)"dateTime"===this.dataSeries[i].xValueType&&(o=!0);i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin;u=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax;0==u-i&&(n="undefined"==typeof this.options.interval?.4:this.options.interval,u+=n,i-=n);Infinity!==this.dataInfo.minDiff?e=this.dataInfo.minDiff:1<u-i?e=.5*Math.abs(u-i):(e=1,o&&(h=!0))}else"axisY"===this.type&&(i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,u=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(i)||isFinite(u)?isFinite(i)?isFinite(u)||(u=i):i=u:(u="undefined"==typeof this.options.interval?-Infinity:this.options.interval,i="undefined"!=typeof this.options.interval||isFinite(this.dataInfo.minDiff)?0:Infinity),0===i&&0===u?(u+=9,i=0):0==u-i?(n=Math.min(Math.abs(.01*Math.abs(u)),5),u+=n,i-=n):i>u?(n=Math.min(.01*Math.abs(this.getApparentDifference(u,i,null,!0)),5),0<=u?i=u-n:u=isFinite(i)?i+n:0):(n=Math.min(.01*Math.abs(this.getApparentDifference(i,u,null,!0)),.05),0!==u&&(u+=n),0!==i&&(i-=n)),e=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<u-i?.5*Math.abs(u-i):1,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&0<i&&(i=0),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&0>u&&(u=0));n=this.getApparentDifference(isNaN(this.viewportMinimum)||null===this.viewportMinimum?i:this.viewportMinimum,isNaN(this.viewportMaximum)||null===this.viewportMaximum?u:this.viewportMaximum,null,!0);"axisX"===this.type&&o?(this.intervalType||(n/1<=f?(this.interval=1,this.intervalType="millisecond"):n/2<=f?(this.interval=2,this.intervalType="millisecond"):n/5<=f?(this.interval=5,this.intervalType="millisecond"):n/10<=f?(this.interval=10,this.intervalType="millisecond"):n/20<=f?(this.interval=20,this.intervalType="millisecond"):n/50<=f?(this.interval=50,this.intervalType="millisecond"):n/100<=f?(this.interval=100,this.intervalType="millisecond"):n/200<=f?(this.interval=200,this.intervalType="millisecond"):n/250<=f?(this.interval=250,this.intervalType="millisecond"):n/300<=f?(this.interval=300,this.intervalType="millisecond"):n/400<=f?(this.interval=400,this.intervalType="millisecond"):n/500<=f?(this.interval=500,this.intervalType="millisecond"):n/(1*s.secondDuration)<=f?(this.interval=1,this.intervalType="second"):n/(2*s.secondDuration)<=f?(this.interval=2,this.intervalType="second"):n/(5*s.secondDuration)<=f?(this.interval=5,this.intervalType="second"):n/(10*s.secondDuration)<=f?(this.interval=10,this.intervalType="second"):n/(15*s.secondDuration)<=f?(this.interval=15,this.intervalType="second"):n/(20*s.secondDuration)<=f?(this.interval=20,this.intervalType="second"):n/(30*s.secondDuration)<=f?(this.interval=30,this.intervalType="second"):n/(1*s.minuteDuration)<=f?(this.interval=1,this.intervalType="minute"):n/(2*s.minuteDuration)<=f?(this.interval=2,this.intervalType="minute"):n/(5*s.minuteDuration)<=f?(this.interval=5,this.intervalType="minute"):n/(10*s.minuteDuration)<=f?(this.interval=10,this.intervalType="minute"):n/(15*s.minuteDuration)<=f?(this.interval=15,this.intervalType="minute"):n/(20*s.minuteDuration)<=f?(this.interval=20,this.intervalType="minute"):n/(30*s.minuteDuration)<=f?(this.interval=30,this.intervalType="minute"):n/(1*s.hourDuration)<=f?(this.interval=1,this.intervalType="hour"):n/(2*s.hourDuration)<=f?(this.interval=2,this.intervalType="hour"):n/(3*s.hourDuration)<=f?(this.interval=3,this.intervalType="hour"):n/(6*s.hourDuration)<=f?(this.interval=6,this.intervalType="hour"):n/(1*s.dayDuration)<=f?(this.interval=1,this.intervalType="day"):n/(2*s.dayDuration)<=f?(this.interval=2,this.intervalType="day"):n/(4*s.dayDuration)<=f?(this.interval=4,this.intervalType="day"):n/(1*s.weekDuration)<=f?(this.interval=1,this.intervalType="week"):n/(2*s.weekDuration)<=f?(this.interval=2,this.intervalType="week"):n/(3*s.weekDuration)<=f?(this.interval=3,this.intervalType="week"):n/(1*s.monthDuration)<=f?(this.interval=1,this.intervalType="month"):n/(2*s.monthDuration)<=f?(this.interval=2,this.intervalType="month"):n/(3*s.monthDuration)<=f?(this.interval=3,this.intervalType="month"):n/(6*s.monthDuration)<=f?(this.interval=6,this.intervalType="month"):(this.interval=n/(1*s.yearDuration)<=f?1:n/(2*s.yearDuration)<=f?2:n/(4*s.yearDuration)<=f?4:Math.floor(r.getNiceNumber(n/(f-1),!0)/s.yearDuration),this.intervalType="year")),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=i-e/2),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=u+e/2),h?this.autoValueFormatString="MMM DD YYYY HH:mm":"year"===this.intervalType?this.autoValueFormatString="YYYY":"month"===this.intervalType?this.autoValueFormatString="MMM YYYY":"week"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"day"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.autoValueFormatString="hh:mm TT":"minute"===this.intervalType?this.autoValueFormatString="hh:mm TT":"second"===this.intervalType?this.autoValueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",n=r.getNiceNumber(n,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:r.getNiceNumber(n/(f-1),!0),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?i-e/2:Math.floor(i/this.interval)*this.interval),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?u+e/2:Math.ceil(u/this.interval)*this.interval),0===this.viewportMaximum&&0===this.viewportMinimum&&(0===this.options.viewportMinimum?this.viewportMaximum+=10:0===this.options.viewportMaximum&&(this.viewportMinimum-=10),this.options&&"undefined"==typeof this.options.interval&&(this.interval=r.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(f-1),!0))));(null===this.minimum||null===this.maximum)&&(("axisX"===this.type?(i=null!==this.minimum?this.minimum:this.dataInfo.min,u=null!==this.maximum?this.maximum:this.dataInfo.max,0==u-i&&(n="undefined"==typeof this.options.interval?.4:this.options.interval,u+=n,i-=n),e=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<u-i?.5*Math.abs(u-i):1):"axisY"===this.type&&(i=null!==this.minimum?this.minimum:this.dataInfo.min,u=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(i)||isFinite(u)?0===i&&0===u?(u+=9,i=0):0==u-i?(n=Math.min(Math.abs(.01*Math.abs(u)),5),u+=n,i-=n):i>u?(n=Math.min(.01*Math.abs(this.getApparentDifference(u,i,null,!0)),5),0<=u?i=u-n:u=isFinite(i)?i+n:0):(n=Math.min(.01*Math.abs(this.getApparentDifference(i,u,null,!0)),.05),0!==u&&(u+=n),0!==i&&(i-=n)):(u="undefined"==typeof this.options.interval?-Infinity:this.options.interval,i="undefined"!=typeof this.options.interval||isFinite(this.dataInfo.minDiff)?0:Infinity),e=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<u-i?.5*Math.abs(u-i):1,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&0<i&&(i=0),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&0>u&&(u=0)),Math.abs(this.getApparentDifference(i,u,null,!0)),"axisX"===this.type&&o)?(this.valueType="dateTime",(null===this.minimum||isNaN(this.minimum))&&(this.minimum=i-e/2),(null===this.maximum||isNaN(this.maximum))&&(this.maximum=u+e/2)):(this.intervalType=this.valueType="number",null===this.minimum&&(this.minimum="axisX"===this.type?i-e/2:Math.floor(i/this.interval)*this.interval,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?Infinity:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?u+e/2:Math.ceil(u/this.interval)*this.interval,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-Infinity:this.sessionVariables.viewportMaximum)),0===this.maximum&&0===this.minimum&&(0===this.options.minimum?this.maximum+=10:0===this.options.maximum&&(this.minimum-=10))));t(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum));t(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum));this.range=this.viewportMaximum-this.viewportMinimum;this.intervalStartPosition="axisX"===this.type&&o?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval;this.valueFormatString||(this.valueFormatString=r.generateValueFormatString(this.range,2))}},r.prototype.calculateLogarithmicAxisParameters=function(){var e=this.chart.layoutManager.getFreeSpace(),f=Math.log(this.logarithmBase),o,n,i,s,u,h;if("bottom"===this._position||"top"===this._position?(this.maxWidth=e.width,this.maxHeight=e.height):(this.maxWidth=e.height,this.maxHeight=e.width),e="axisX"===this.type?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),u=1,(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks)for(u=0;u<this.scaleBreaks._appliedBreaks.length;u++)if((!t(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[u].startValue||!t(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[u].startValue||!t(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[u].startValue)&&(!t(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[u].endValue||!t(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[u].endValue||!t(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[u].endValue)){this.scaleBreaks._appliedBreaks.splice(u,1);break}if("axisX"===this.type?(n=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,i=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,1==i/n&&(u=Math.pow(this.logarithmBase,"undefined"==typeof this.options.interval?.4:this.options.interval),i*=u,n/=u),s=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:i/n>this.logarithmBase?i/n*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(n=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,i=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,0>=n&&!isFinite(i)?(i="undefined"==typeof this.options.interval?0:this.options.interval,n=1):0>=n?n=i:isFinite(i)||(i=n),1===n&&1===i?(i*=this.logarithmBase-1/this.logarithmBase,n=1):1==i/n?(u=Math.min(i*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),i*=u,n/=u):n>i?(u=Math.min(n/i*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=i?n=i/u:i=n*u):(u=Math.min(i/n*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==i&&(i*=u),1!==n&&(n/=u)),s=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:i/n>this.logarithmBase?i/n*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&1<n&&(n=1),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&1>i&&(i=1)),u=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?i:this.viewportMaximum)/(isNaN(this.viewportMinimum)||null===this.viewportMinimum?n:this.viewportMinimum),h=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?i:this.viewportMaximum)-(isNaN(this.viewportMinimum)||null===this.viewportMinimum?n:this.viewportMinimum),this.intervalType="number",u=Math.pow(this.logarithmBase,r.getNiceNumber(Math.abs(Math.log(u)/f),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=r.getNiceExponent(Math.log(u)/f/(e-1),!0),o=r.getNiceNumber(h/(e-1),!0)),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?n/Math.sqrt(s):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(n)/f/this.interval))),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?i*Math.sqrt(s):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(i)/f/this.interval))),1===this.viewportMaximum&&1===this.viewportMinimum&&(1===this.options.viewportMinimum?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.viewportMaximum&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&"undefined"==typeof this.options.interval&&(this.interval=r.getNiceExponent(Math.ceil(Math.log(u)/f)/(e-1)),o=r.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(e-1),!0))),(null===this.minimum||null===this.maximum)&&("axisX"===this.type?(n=null!==this.minimum?this.minimum:this.dataInfo.min,i=null!==this.maximum?this.maximum:this.dataInfo.max,1==i/n&&(u=Math.pow(this.logarithmBase,"undefined"==typeof this.options.interval?.4:this.options.interval),i*=u,n/=u),s=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:i/n>this.logarithmBase?i/n*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(n=null!==this.minimum?this.minimum:this.dataInfo.min,i=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(n)||isFinite(i)?1===n&&1===i?(i*=this.logarithmBase,n/=this.logarithmBase):1==i/n?(u=Math.pow(this.logarithmBase,this.interval),i*=u,n/=u):n>i?(u=Math.min(.01*(n/i),5),1<=i?n=i/u:i=n*u):(u=Math.min(i/n*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==i&&(i*=u),1!==n&&(n/=u)):(i="undefined"==typeof this.options.interval?0:this.options.interval,n=1),s=Infinity!==this.dataInfo.minDiff?this.dataInfo.minDiff:i/n>this.logarithmBase?i/n*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&1<n&&(n=1),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&1>i&&(i=1)),this.intervalType="number",null===this.minimum&&(this.minimum="axisX"===this.type?n/Math.sqrt(s):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(n)/f/this.interval)),this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?"undefined"==typeof this.sessionVariables.newViewportMinimum?Infinity:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?i*Math.sqrt(s):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(i)/f/this.interval)),this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?"undefined"==typeof this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)),1===this.maximum&&1===this.minimum&&(1===this.options.minimum?this.maximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.maximum&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),n=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(f*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=e,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>e?2:3)){for(f=Math.floor(this.viewportMinimum/o+.5)*o;f<this.viewportMinimum;)f+=o;this.equidistantInterval=!1;this.intervalStartPosition=f;this.interval=o}else this.options.interval||(o=Math.ceil(this.interval),this.range>this.interval&&(this.interval=o,n=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(f*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=n;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(f=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,(isNaN(f)||!isFinite(f))&&(f=2),2<f))for(u=0;u<f-2;u++)this.valueFormatString+="#"},r.generateValueFormatString=function(n,t){var u="#,##0.",i=t,r;for(1>n&&(i+=Math.floor(Math.abs(Math.log(n)/Math.LN10)),isNaN(i)||!isFinite(i))&&(i=t),r=0;r<i;r++)u+="#";return u},r.getNiceExponent=function(n){var t=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,t),i=0>t?1>=i?1:5>=i?5:10:Math.max(Math.floor(i),1);return-20>t?Number(i*Math.pow(10,t)):Number((i*Math.pow(10,t)).toFixed(20))},r.getNiceNumber=function(n,t){var r=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,r),i=t?1.5>i?1:3>i?2:7>i?5:10:1>=i?1:2>=i?2:5>=i?5:10;return-20>r?Number(i*Math.pow(10,r)):Number((i*Math.pow(10,r)).toFixed(20))},r.prototype.getLabelStartPoint=function(){var n=s[this.intervalType+"Duration"]*this.interval,n=new Date(Math.floor(this.viewportMinimum/n)*n);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<n.getMilliseconds()&&(n.setSeconds(n.getSeconds()+1),n.setMilliseconds(0)):"minute"===this.intervalType?(0<n.getSeconds()||0<n.getMilliseconds())&&(n.setMinutes(n.getMinutes()+1),n.setSeconds(0),n.setMilliseconds(0)):"hour"===this.intervalType?(0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds())&&(n.setHours(n.getHours()+1),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"day"===this.intervalType?(0<n.getHours()||0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds())&&(n.setDate(n.getDate()+1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"week"===this.intervalType?(0<n.getDay()||0<n.getHours()||0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds())&&(n.setDate(n.getDate()+(7-n.getDay())),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"month"===this.intervalType?(1<n.getDate()||0<n.getHours()||0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds())&&(n.setMonth(n.getMonth()+1),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)):"year"===this.intervalType&&(0<n.getMonth()||1<n.getDate()||0<n.getHours()||0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds())&&(n.setFullYear(n.getFullYear()+1),n.setMonth(0),n.setDate(1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0))),n},it(ci,c),it(k,c),k.prototype.createUserOptions=function(n){if("undefined"!=typeof n||this.options._isPlaceholder){var t=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions();this.options._isPlaceholder||(yt(this.parent[this.optionsName]),t=this.parent.options[this.optionsName].indexOf(this.options));this.options="undefined"==typeof n?{}:n;this.parent.options[this.optionsName][t]=this.options}},k.prototype.render=function(n){var v,y,o,s,r,c,l,t,i,a,h,f;if(0!==this.spacing||0!==this.options.lineThickness&&("undefined"!=typeof this.options.lineThickness||0!==this.parent.lineThickness)){if(v=this.ctx,y=this.ctx.globalAlpha,this.ctx=n||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),o=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),s=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue),this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,e(this.id),n=Math.max(this.spacing,3),h=Math.max(0,this.lineThickness),this.ctx.lineWidth=h,this.ctx.setLineDash&&this.ctx.setLineDash(u(this.lineDashType,h)),"bottom"===this.scaleBreaks.parent._position||"top"===this.scaleBreaks.parent._position){if(o=1==h%2?(o.x<<0)+.5:o.x<<0,c=1==h%2?(s.x<<0)+.5:s.x<<0,"top"===this.scaleBreaks.parent._position?(s=this.chart.plotArea.y1,l=this.chart.plotArea.y2+h/2+.5<<0):(s=this.chart.plotArea.y2,l=this.chart.plotArea.y1-h/2+.5<<0,n*=-1),this.bounds={x1:o-h/2,y1:s,x2:c+h/2,y2:l},this.ctx.moveTo(o,s),"straight"===this.type||"top"===this.scaleBreaks.parent._position&&0>=n||"bottom"===this.scaleBreaks.parent._position&&0<=n)this.ctx.lineTo(o,l),this.ctx.lineTo(c,l),this.ctx.lineTo(c,s);else if("wavy"===this.type){for(t=o,i=s,r=.5,a=(l-i)/n/3,f=0;f<a;f++)this.ctx.bezierCurveTo(t+r*n,i+n,t+r*n,i+2*n,t,i+3*n),i+=3*n,r*=-1;for(this.ctx.bezierCurveTo(t+r*n,i+n,t+r*n,i+2*n,t,i+3*n),t=c,r*=-1,this.ctx.lineTo(t,i),f=0;f<a;f++)this.ctx.bezierCurveTo(t+r*n,i-n,t+r*n,i-2*n,t,i-3*n),i-=3*n,r*=-1}else if("zigzag"===this.type){for(r=-1,i=s+n,t=o+n,a=(l-i)/n/2,f=0;f<a;f++)this.ctx.lineTo(t,i),t+=2*r*n,i+=2*n,r*=-1;for(this.ctx.lineTo(t,i),t+=c-o,f=0;f<a+1;f++)this.ctx.lineTo(t,i),t+=2*r*n,i-=2*n,r*=-1;this.ctx.lineTo(t+r*n,i+n)}}else if("left"===this.scaleBreaks.parent._position||"right"===this.scaleBreaks.parent._position)if(s=1==h%2?(s.y<<0)+.5:s.y<<0,l=1==h%2?(o.y<<0)+.5:o.y<<0,"left"===this.scaleBreaks.parent._position?(o=this.chart.plotArea.x1,c=this.chart.plotArea.x2+h/2+.5<<0):(o=this.chart.plotArea.x2,c=this.chart.plotArea.x1-h/2+.5<<0,n*=-1),this.bounds={x1:o,y1:s-h/2,x2:c,y2:l+h/2},this.ctx.moveTo(o,s),"straight"===this.type||"left"===this.scaleBreaks.parent._position&&0>=n||"right"===this.scaleBreaks.parent._position&&0<=n)this.ctx.lineTo(c,s),this.ctx.lineTo(c,l),this.ctx.lineTo(o,l);else if("wavy"===this.type){for(t=o,i=s,r=.5,a=(c-t)/n/3,f=0;f<a;f++)this.ctx.bezierCurveTo(t+n,i+r*n,t+2*n,i+r*n,t+3*n,i),t+=3*n,r*=-1;for(this.ctx.bezierCurveTo(t+n,i+r*n,t+2*n,i+r*n,t+3*n,i),i=l,r*=-1,this.ctx.lineTo(t,i),f=0;f<a;f++)this.ctx.bezierCurveTo(t-n,i+r*n,t-2*n,i+r*n,t-3*n,i),t-=3*n,r*=-1}else if("zigzag"===this.type){for(r=1,i=s-n,t=o+n,a=(c-t)/n/2,f=0;f<a;f++)this.ctx.lineTo(t,i),i+=2*r*n,t+=2*n,r*=-1;for(this.ctx.lineTo(t,i),i+=l-s,f=0;f<a+1;f++)this.ctx.lineTo(t,i),i+=2*r*n,t-=2*n,r*=-1;this.ctx.lineTo(t+n,i+r*n)}0<h&&this.ctx.stroke();this.ctx.closePath();this.ctx.globalAlpha=this.fillOpacity;this.ctx.globalCompositeOperation="destination-over";this.ctx.fill();this.ctx.restore();this.ctx.globalAlpha=y;this.ctx=v}},it(nt,c),nt.prototype.createUserOptions=function(n){if("undefined"!=typeof n||this.options._isPlaceholder){var t=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions();this.options._isPlaceholder||(yt(this.parent.stripLines),t=this.parent.options.stripLines.indexOf(this.options));this.options="undefined"==typeof n?{}:n;this.parent.options.stripLines[t]=this.options}},nt.prototype.render=function(){var t,n,s,h,i,r,f,o;this.ctx.save();t=this.parent.getPixelCoordinatesOnAxis(this.value);n=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);0<n&&(s=null===this.opacity?1:this.opacity,this.ctx.strokeStyle=this.color,this.ctx.beginPath(),h=this.ctx.globalAlpha,this.ctx.globalAlpha=s,e(this.id),this.ctx.lineWidth=n,this.ctx.setLineDash&&this.ctx.setLineDash(u(this.lineDashType,n)),"bottom"===this.parent._position||"top"===this.parent._position?(i=r=1==this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,f=this.chart.plotArea.y1,o=this.chart.plotArea.y2,this.bounds={x1:i-n/2,y1:f,x2:r+n/2,y2:o}):("left"===this.parent._position||"right"===this.parent._position)&&(f=o=1==this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,i=this.chart.plotArea.x1,r=this.chart.plotArea.x2,this.bounds={x1:i,y1:f-n/2,x2:r,y2:o+n/2}),this.ctx.moveTo(i,f),this.ctx.lineTo(r,o),this.ctx.stroke(),this.ctx.globalAlpha=h);this.ctx.restore()},it(st,c),st.prototype.render=function(n,i){var p,g,nt,d,o=null,e=o=null,h="",k,f,s,l;this.valueFormatString||("dateTime"===this.parent.valueType?this.valueFormatString=this.parent.valueFormatString:(k=0,k="xySwapped"===this.chart.plotInfo.axisPlacement?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0),this.valueFormatString=r.generateValueFormatString(this.parent.range,k)));var e=null===this.opacity?1:this.opacity,k=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),w=this.chart.overlaidCanvasCtx,tt=w.globalAlpha;if(w.globalAlpha=e,w.beginPath(),w.strokeStyle=this.color,w.lineWidth=k,w.save(),this.labelFontSize=t(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize,"left"===this.parent._position||"right"===this.parent._position?(this.labelMaxWidth=t(this.options.labelMaxWidth)?this.parent.bounds.x2-this.parent.bounds.x1:this.labelMaxWidth,this.labelMaxHeight=t(this.options.labelWrap)||this.labelWrap?3*this.chart.height:2*this.labelFontSize):("top"===this.parent._position||"bottom"===this.parent._position)&&(this.labelMaxWidth=t(this.options.labelMaxWidth)?3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=t(this.options.labelWrap)||this.labelWrap?this.parent.bounds.height:2*this.labelFontSize),0<k&&w.setLineDash&&w.setLineDash(u(this.lineDashType,k)),e=new y(w,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:h,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){if(f=0,o=[],"xySwapped"===this.chart.plotInfo.axisPlacement){for(s=null,"bottom"===this.parent._position||"top"===this.parent._position?f=this.parent.dataSeries[0].axisX.convertPixelToValue({y:i}):("left"===this.parent._position||"right"===this.parent._position)&&(f=this.parent.convertPixelToValue({y:i})),l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(s.dataSeries=this.parent.dataSeries[l],null!==s.dataPoint.y&&o.push(s));if(s=null,0===o.length)return;if(o.sort(function(n,t){return n.distance-t.distance}),s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),l=0,"rangeBar"===o[0].dataSeries.type||"error"===o[0].dataSeries.type)for(var s=Math.abs(n-this.parent.convertValueToPixel(o[l].dataPoint.y[0])),c=0,f=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y)),c<s&&(s=c,l=f);else if("stackedBar"===o[0].dataSeries.type)for(var s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),b=c=0,f=l=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else b+=o[f].dataPoint.y,c=Math.abs(n-this.parent.convertValueToPixel(b)),c<s&&(s=c,l=f);else if("stackedBar100"===o[0].dataSeries.type)for(var s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),a=b=c=0,f=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else b+=o[f].dataPoint.y,a=o[f].dataPoint.x.getTime?o[f].dataPoint.x.getTime():o[f].dataPoint.x,a=100*(b/o[f].dataSeries.plotUnit.dataPointYSums[a]),c=Math.abs(n-this.parent.convertValueToPixel(a)),c<s&&(s=c,l=f);else for(s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),f=l=c=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else c=Math.abs(n-this.parent.convertValueToPixel(o[f].dataPoint.y)),c<s&&(s=c,l=f);if(h=o[l],"bottom"===this.parent._position||"top"===this.parent._position){if(p=0,"rangeBar"===this.parent.dataSeries[l].type||"error"===this.parent.dataSeries[l].type){for(s=Math.abs(n-this.parent.convertValueToPixel(h.dataPoint.y[0])),f=c=0;f<h.dataPoint.y.length;f++)c=Math.abs(n-this.parent.convertValueToPixel(h.dataPoint.y[f])),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.y[p])<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.y[p])<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y[p]}):t(this.options.label)?v(h.dataPoint.y[p],this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar"===this.parent.dataSeries[l].type){for(s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),b=c=0,f=l;0<=f;f--)b+=o[f].dataPoint.y,c=Math.abs(n-this.parent.convertValueToPixel(b)),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(b)<<0)+.5:this.parent.convertValueToPixel(b)<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y}):t(this.options.label)?v(h.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar100"===this.parent.dataSeries[l].type){for(s=Math.abs(n-this.parent.convertValueToPixel(o[0].dataPoint.y)),a=b=c=0,f=l;0<=f;f--)b+=o[f].dataPoint.y,a=o[f].dataPoint.x.getTime?o[f].dataPoint.x.getTime():o[f].dataPoint.x,a=100*(b/o[f].dataSeries.plotUnit.dataPointYSums[a]),c=Math.abs(n-this.parent.convertValueToPixel(a)),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(a)<<0)+.5:this.parent.convertValueToPixel(a)<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:a}):t(this.options.label)?v(a,this.valueFormatString,this.chart._cultureInfo):this.label}else o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.y)<<0,e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y}):t(this.options.label)?v(h.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label;p=g=o;nt=this.chart.plotArea.y1;d=this.chart.plotArea.y2;this.bounds={x1:p-k/2,y1:nt,x2:g+k/2,y2:d};e.x=p-e.measureText().width/2;e.x+e.width>this.chart.bounds.x2?e.x=this.chart.bounds.x2-e.width:e.x<this.chart.bounds.x1&&(e.x=this.chart.bounds.x1);e.y=this.parent.lineCoordinates.y2+e.fontSize/2+2}else if("left"===this.parent._position||"right"===this.parent._position){if(nt=d=o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.x)<<0,p=this.chart.plotArea.x1,g=this.chart.plotArea.x2,this.bounds={x1:p,y1:nt-k/2,x2:g,y2:d+k/2},a=!1,this.parent.labels)for(o=Math.ceil(this.parent.interval),f=0;f<this.parent.viewportMaximum;f+=o)if(this.parent.labels[f])a=!0;else{a=!1;break}if(a){if("axisX"===this.parent.type)for(f=this.parent.convertPixelToValue({y:i}),s=null,l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?s.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?at(h.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?v(h.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);e.y=d+e.fontSize/2-e.measureText().height/2+2;e.y-e.fontSize/2<this.chart.bounds.y1?e.y=this.chart.bounds.y1+e.fontSize/2+2:e.y+e.measureText().height-e.fontSize/2>this.chart.bounds.y2&&(e.y=this.chart.bounds.y2-e.measureText().height+e.fontSize/2);"left"===this.parent._position?e.x=this.parent.lineCoordinates.x2-e.measureText().width:"right"===this.parent._position&&(e.x=this.parent.lineCoordinates.x2)}}else if("bottom"===this.parent._position||"top"===this.parent._position){for(f=this.parent.convertPixelToValue({x:n}),l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(s.dataSeries=this.parent.dataSeries[l],null!==s.dataPoint.y&&o.push(s));if(0===o.length)return;if(o.sort(function(n,t){return n.distance-t.distance}),h=o[0],p=g=o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.x)<<0,nt=this.chart.plotArea.y1,d=this.chart.plotArea.y2,this.bounds={x1:p-k/2,y1:nt,x2:g+k/2,y2:d},a=!1,this.parent.labels)for(o=Math.ceil(this.parent.interval),f=0;f<this.parent.viewportMaximum;f+=o)if(this.parent.labels[f])a=!0;else{a=!1;break}if(a){if("axisX"===this.parent.type)for(f=this.parent.convertPixelToValue({x:n}),s=null,l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?s.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?at(h.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.x}):t(this.options.label)?v(h.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);e.x=p-e.measureText().width/2;e.x+e.width>this.chart.bounds.x2&&(e.x=this.chart.bounds.x2-e.width);e.x<this.chart.bounds.x1&&(e.x=this.chart.bounds.x1);"bottom"===this.parent._position?e.y=this.parent.lineCoordinates.y2+e.fontSize/2+2:"top"===this.parent._position&&(e.y=this.parent.lineCoordinates.y1-e.height+e.fontSize/2+2)}else if("left"===this.parent._position||"right"===this.parent._position){for(!t(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(f=this.parent.dataSeries[0].axisX.convertPixelToValue({x:n})),l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(s.dataSeries=this.parent.dataSeries[l],null!==s.dataPoint.y&&o.push(s));if(0===o.length)return;if(o.sort(function(n,t){return n.distance-t.distance}),l=0,"rangeColumn"===o[0].dataSeries.type||"rangeArea"===o[0].dataSeries.type||"error"===o[0].dataSeries.type||"rangeSplineArea"===o[0].dataSeries.type||"candlestick"===o[0].dataSeries.type||"ohlc"===o[0].dataSeries.type||"boxAndWhisker"===o[0].dataSeries.type)for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y[0])),f=c=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y)),c<s&&(s=c,l=f);else if("stackedColumn"===o[0].dataSeries.type||"stackedArea"===o[0].dataSeries.type)for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y)),f=b=c=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else b+=o[f].dataPoint.y,c=Math.abs(i-this.parent.convertValueToPixel(b)),c<s&&(s=c,l=f);else if("stackedColumn100"===o[0].dataSeries.type||"stackedArea100"===o[0].dataSeries.type)for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y)),f=a=b=c=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else b+=o[f].dataPoint.y,a=o[f].dataPoint.x.getTime?o[f].dataPoint.x.getTime():o[f].dataPoint.x,a=100*(b/o[f].dataSeries.plotUnit.dataPointYSums[a]),c=Math.abs(i-this.parent.convertValueToPixel(a)),c<s&&(s=c,l=f);else for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y)),f=c=0;f<o.length;f++)if(o[f].dataPoint.y&&o[f].dataPoint.y.length)for(h=0;h<o[f].dataPoint.y.length;h++)c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y[h])),c<s&&(s=c,l=f);else c=Math.abs(i-this.parent.convertValueToPixel(o[f].dataPoint.y)),c<s&&(s=c,l=f);if(h=o[l],p=0,"rangeColumn"===this.parent.dataSeries[l].type||"rangeArea"===this.parent.dataSeries[l].type||"error"===this.parent.dataSeries[l].type||"rangeSplineArea"===this.parent.dataSeries[l].type||"candlestick"===this.parent.dataSeries[l].type||"ohlc"===this.parent.dataSeries[l].type||"boxAndWhisker"===this.parent.dataSeries[l].type){for(s=Math.abs(i-this.parent.convertValueToPixel(h.dataPoint.y[0])),f=c=0;f<h.dataPoint.y.length;f++)c=Math.abs(i-this.parent.convertValueToPixel(h.dataPoint.y[f])),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.y[p])<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.y[p])<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y[p]}):t(this.options.label)?v(h.dataPoint.y[p],this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedColumn"===this.parent.dataSeries[l].type||"stackedArea"===this.parent.dataSeries[l].type){for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y)),b=c=0,f=l;0<=f;f--)b+=o[f].dataPoint.y,c=Math.abs(i-this.parent.convertValueToPixel(b)),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(b)<<0)+.5:this.parent.convertValueToPixel(b)<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y}):t(this.options.label)?v(h.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedColumn100"===this.parent.dataSeries[l].type||"stackedArea100"===this.parent.dataSeries[l].type){for(s=Math.abs(i-this.parent.convertValueToPixel(o[0].dataPoint.y)),b=c=0,f=l;0<=f;f--)b+=o[f].dataPoint.y,a=o[f].dataPoint.x.getTime?o[f].dataPoint.x.getTime():o[f].dataPoint.x,a=100*(b/o[f].dataSeries.plotUnit.dataPointYSums[a]),c=Math.abs(i-this.parent.convertValueToPixel(a)),c<s&&(s=c,p=f);o=1==w.lineWidth%2?(this.parent.convertValueToPixel(a)<<0)+.5:this.parent.convertValueToPixel(a)<<0;e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:a}):t(this.options.label)?v(a,this.valueFormatString,this.chart._cultureInfo):this.label}else"waterfall"===this.parent.dataSeries[l].type?(o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataSeries.dataPointEOs[h.index].cumulativeSum)<<0)+.5:this.parent.convertValueToPixel(h.dataSeries.dataPointEOs[h.index].cumulativeSum)<<0,e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataSeries.dataPointEOs[h.index].cumulativeSum}):t(this.options.label)?v(h.dataSeries.dataPointEOs[h.index].cumulativeSum,this.valueFormatString,this.chart._cultureInfo):this.label):(o=1==w.lineWidth%2?(this.parent.convertValueToPixel(h.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(h.dataPoint.y)<<0,e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:h.dataPoint.y}):t(this.options.label)?v(h.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label);nt=d=o;p=this.chart.plotArea.x1;g=this.chart.plotArea.x2;this.bounds={x1:p,y1:nt-k/2,x2:g,y2:d+k/2};e.y=d+e.fontSize/2-e.measureText().height/2+2;e.y-e.fontSize/2<this.chart.bounds.y1?e.y=this.chart.bounds.y1+e.fontSize/2+2:e.y+e.measureText().height-e.fontSize/2>this.chart.bounds.y2&&(e.y=this.chart.bounds.y2-e.measureText().height+e.fontSize/2);"left"===this.parent._position?e.x=this.parent.lineCoordinates.x2-e.measureText().width:"right"===this.parent._position&&(e.x=this.parent.lineCoordinates.x2)}o=null;("bottom"===this.parent._position||"top"===this.parent._position)&&p>=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&g<=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&(0<k&&(w.moveTo(p,nt),w.lineTo(g,d),w.stroke()),w.restore(),!t(e.text)&&("number"==typeof e.text.valueOf()||0<e.text.length)&&e.render(!0));("left"===this.parent._position||"right"===this.parent._position)&&d>=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&nt<=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&(0<k&&(w.moveTo(p,nt),w.lineTo(g,d),w.stroke()),w.restore(),!t(e.text)&&("number"==typeof e.text.valueOf()||0<e.text.length)&&e.render(!0))}else{if("bottom"===this.parent._position||"top"===this.parent._position?(p=g=o=1==w.lineWidth%2?(n<<0)+.5:n<<0,nt=this.chart.plotArea.y1,d=this.chart.plotArea.y2,this.bounds={x1:p-k/2,y1:nt,x2:g+k/2,y2:d}):("left"===this.parent._position||"right"===this.parent._position)&&(nt=d=o=1==w.lineWidth%2?(i<<0)+.5:i<<0,p=this.chart.plotArea.x1,g=this.chart.plotArea.x2,this.bounds={x1:p,y1:nt-k/2,x2:g,y2:d+k/2}),"xySwapped"===this.chart.plotInfo.axisPlacement)if("left"===this.parent._position||"right"===this.parent._position){if(a=!1,this.parent.labels)for(o=Math.ceil(this.parent.interval),f=0;f<this.parent.viewportMaximum;f+=o)if(this.parent.labels[f])a=!0;else{a=!1;break}if(a){if("axisX"===this.parent.type)for(f=this.parent.convertPixelToValue({y:i}),s=null,l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(n)}):t(this.options.label)?s.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(i)}):t(this.options.label)?at(this.parent.convertPixelToValue(i),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(i)}):t(this.options.label)?v(this.parent.convertPixelToValue(i),this.valueFormatString,this.chart._cultureInfo):this.label);e.y=i+e.fontSize/2-e.measureText().height/2+2;e.y-e.fontSize/2<this.chart.bounds.y1?e.y=this.chart.bounds.y1+e.fontSize/2+2:e.y+e.measureText().height-e.fontSize/2>this.chart.bounds.y2&&(e.y=this.chart.bounds.y2-e.measureText().height+e.fontSize/2);"left"===this.parent._position?e.x=this.parent.lineCoordinates.x1-e.measureText().width:"right"===this.parent._position&&(e.x=this.parent.lineCoordinates.x2)}else("bottom"===this.parent._position||"top"===this.parent._position)&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(n)}):t(this.options.label)?v(this.parent.convertPixelToValue(n),this.valueFormatString,this.chart._cultureInfo):this.label,e.x=p-e.measureText().width/2,e.x+e.width>this.chart.bounds.x2&&(e.x=this.chart.bounds.x2-e.width),e.x<this.chart.bounds.x1&&(e.x=this.chart.bounds.x1),"bottom"===this.parent._position&&(e.y=this.parent.lineCoordinates.y2+e.fontSize/2+2),"top"===this.parent._position&&(e.y=this.parent.lineCoordinates.y1-e.height+e.fontSize/2+2));else if("bottom"===this.parent._position||"top"===this.parent._position){if(a=!1,h="",this.parent.labels)for(o=Math.ceil(this.parent.interval),f=0;f<this.parent.viewportMaximum;f+=o)if(this.parent.labels[f])a=!0;else{a=!1;break}if(a){if("axisX"===this.parent.type)for(f=this.parent.convertPixelToValue({x:n}),s=null,l=0;l<this.parent.dataSeries.length;l++)(s=this.parent.dataSeries[l].getDataPointAtX(f,!0))&&0<=s.index&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(n)}):t(this.options.label)?s.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(n)}):t(this.options.label)?at(this.parent.convertPixelToValue(n),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:0<this.parent.dataSeries.length?this.parent.convertPixelToValue(n):""}):t(this.options.label)?v(this.parent.convertPixelToValue(n),this.valueFormatString,this.chart._cultureInfo):this.label);e.x=p-e.measureText().width/2;e.x+e.width>this.chart.bounds.x2&&(e.x=this.chart.bounds.x2-e.width);e.x<this.chart.bounds.x1&&(e.x=this.chart.bounds.x1);"bottom"===this.parent._position?e.y=this.parent.lineCoordinates.y2+e.fontSize/2+2:"top"===this.parent._position&&(e.y=this.parent.lineCoordinates.y1-e.height+e.fontSize/2+2)}else("left"===this.parent._position||"right"===this.parent._position)&&(e.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(i)}):t(this.options.label)?v(this.parent.convertPixelToValue(i),this.valueFormatString,this.chart._cultureInfo):this.label,e.y=i+e.fontSize/2-e.measureText().height/2+2,e.y-e.fontSize/2<this.chart.bounds.y1?e.y=this.chart.bounds.y1+e.fontSize/2+2:e.y+e.measureText().height-e.fontSize/2>this.chart.bounds.y2&&(e.y=this.chart.bounds.y2-e.measureText().height+e.fontSize/2),"left"===this.parent._position?e.x=this.parent.lineCoordinates.x2-e.measureText().width:"right"===this.parent._position&&(e.x=this.parent.lineCoordinates.x2));0<k&&(w.moveTo(p,nt),w.lineTo(g,d),w.stroke());w.restore();!t(e.text)&&("number"==typeof e.text.valueOf()||0<e.text.length)&&e.render(!0)}w.globalAlpha=tt},it(w,c),w.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div");this.container.setAttribute("class","canvasjs-chart-tooltip");this.container.style.position="absolute";this.container.style.height="auto";this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)";this.container.style.zIndex="1000";this.container.style.pointerEvents="none";this.container.style.display="none";var t;t='<div style=" width: auto;height: auto;min-width: 50px;';t+="line-height: auto;";t+="margin: 0px 0px 0px 0px;";t+="padding: 5px;";t+="font-family: Calibri, Arial, Georgia, serif;";t+="font-weight: normal;";t+="font-style: "+(n?"italic;":"normal;");t+="font-size: 14px;";t+="color: #000000;";t+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);";t+="text-align: left;";t+="border: 2px solid gray;";t+=n?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);";t+="text-indent: 0px;";t+="white-space: nowrap;";t+="border-radius: 5px;";t+="-moz-user-select:none;";t+="-khtml-user-select: none;";t+="-webkit-user-select: none;";t+="-ms-user-select: none;";t+="user-select: none;";n||(t+="filter: alpha(opacity = 90);",t+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');");t+='} "> Sample Tooltip<\/div>';this.container.innerHTML=t;this.contentDiv=this.container.firstChild;this.container.style.borderRadius=this.contentDiv.style.borderRadius;this.chart._canvasJSContainer.appendChild(this.container)}},w.prototype.mouseMoveHandler=function(n,t){this._lastUpdated&&4>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(n,t))},w.prototype._updateToolTip=function(i,r,u){var c,h;if(u="undefined"==typeof u?!0:u,this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if("undefined"==typeof i||"undefined"==typeof r){if(isNaN(this._prevX)||isNaN(this._prevY))return;i=this._prevX;r=this._prevY}else this._prevX=i,this._prevY=r;var o=null,s=null,e=[],l=0;if(this.shared&&this.enabled&&"none"!==this.chart.plotInfo.axisPlacement){if("xySwapped"===this.chart.plotInfo.axisPlacement){if(c=[],this.chart.axisX)for(h=0;h<this.chart.axisX.length;h++){for(var l=this.chart.axisX[h].convertPixelToValue({y:r}),f=null,o=0;o<this.chart.axisX[h].dataSeries.length;o++)(f=this.chart.axisX[h].dataSeries[o].getDataPointAtX(l,u))&&0<=f.index&&(f.dataSeries=this.chart.axisX[h].dataSeries[o],null!==f.dataPoint.y&&c.push(f));f=null}if(this.chart.axisX2)for(h=0;h<this.chart.axisX2.length;h++){for(l=this.chart.axisX2[h].convertPixelToValue({y:r}),f=null,o=0;o<this.chart.axisX2[h].dataSeries.length;o++)(f=this.chart.axisX2[h].dataSeries[o].getDataPointAtX(l,u))&&0<=f.index&&(f.dataSeries=this.chart.axisX2[h].dataSeries[o],null!==f.dataPoint.y&&c.push(f));f=null}}else{if(c=[],this.chart.axisX)for(h=0;h<this.chart.axisX.length;h++)for(l=this.chart.axisX[h].convertPixelToValue({x:i}),f=null,o=0;o<this.chart.axisX[h].dataSeries.length;o++)(f=this.chart.axisX[h].dataSeries[o].getDataPointAtX(l,u))&&0<=f.index&&(f.dataSeries=this.chart.axisX[h].dataSeries[o],null!==f.dataPoint.y&&c.push(f));if(this.chart.axisX2)for(h=0;h<this.chart.axisX2.length;h++)for(l=this.chart.axisX2[h].convertPixelToValue({x:i}),f=null,o=0;o<this.chart.axisX2[h].dataSeries.length;o++)(f=this.chart.axisX2[h].dataSeries[o].getDataPointAtX(l,u))&&0<=f.index&&(f.dataSeries=this.chart.axisX2[h].dataSeries[o],null!==f.dataPoint.y&&c.push(f))}if(0===c.length)return;for(c.sort(function(n,t){return n.distance-t.distance}),u=c[0],o=0;o<c.length;o++)c[o].dataPoint.x.valueOf()===u.dataPoint.x.valueOf()&&e.push(c[o]);c=null}else{if(f=this.chart.getDataPointAtXY(i,r,u))this.currentDataPointIndex=f.dataPointIndex,this.currentSeriesIndex=f.dataSeries.index;else if(n)if(f=yi(i,r,this.chart._eventManager.ghostCtx),0<f&&"undefined"!=typeof this.chart._eventManager.objectMap[f]){if(f=this.chart._eventManager.objectMap[f],"legendItem"===f.objectType)return;this.currentSeriesIndex=f.dataSeriesIndex;this.currentDataPointIndex=0<=f.dataPointIndex?f.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(s=this.chart.data[this.currentSeriesIndex],f={},0<=this.currentDataPointIndex)o=s.dataPoints[this.currentDataPointIndex],f.dataSeries=s,f.dataPoint=o,f.index=this.currentDataPointIndex,f.distance=Math.abs(o.x-l),"waterfall"===s.type&&(f.cumulativeSumYStartValue=s.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,f.cumulativeSum=s.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else{if(!this.enabled||"line"!==s.type&&"stepLine"!==s.type&&"spline"!==s.type&&"area"!==s.type&&"stepArea"!==s.type&&"splineArea"!==s.type&&"stackedArea"!==s.type&&"stackedArea100"!==s.type&&"rangeArea"!==s.type&&"rangeSplineArea"!==s.type&&"candlestick"!==s.type&&"ohlc"!==s.type&&"boxAndWhisker"!==s.type)return;l=s.axisX.convertPixelToValue({x:i});f=s.getDataPointAtX(l,u);t(f)||(f.dataSeries=s,this.currentDataPointIndex=f.index,o=f.dataPoint)}if(!t(f)&&!t(f.dataPoint)&&!t(f.dataPoint.y))if(f.dataSeries.axisY)if(0<f.dataPoint.y.length){for(o=u=0;o<f.dataPoint.y.length;o++)f.dataPoint.y[o]<f.dataSeries.axisY.viewportMinimum?u--:f.dataPoint.y[o]>f.dataSeries.axisY.viewportMaximum&&u++;u<f.dataPoint.y.length&&u>-f.dataPoint.y.length&&e.push(f)}else"column"===s.type||"bar"===s.type?0>f.dataPoint.y?0>f.dataSeries.axisY.viewportMinimum&&f.dataSeries.axisY.viewportMaximum>=f.dataPoint.y&&e.push(f):f.dataSeries.axisY.viewportMinimum<=f.dataPoint.y&&0<=f.dataSeries.axisY.viewportMaximum&&e.push(f):"bubble"===s.type?(u=this.chart._eventManager.objectMap[s.dataPointIds[f.index]].size/2,f.dataPoint.y>=f.dataSeries.axisY.viewportMinimum-u&&f.dataPoint.y<=f.dataSeries.axisY.viewportMaximum+u&&e.push(f)):"waterfall"===s.type?(u=0,f.cumulativeSumYStartValue<f.dataSeries.axisY.viewportMinimum?u--:f.cumulativeSumYStartValue>f.dataSeries.axisY.viewportMaximum&&u++,f.cumulativeSum<f.dataSeries.axisY.viewportMinimum?u--:f.cumulativeSum>f.dataSeries.axisY.viewportMaximum&&u++,2>u&&-2<u&&e.push(f)):(0<=f.dataSeries.type.indexOf("100")||"stackedColumn"===s.type||"stackedBar"===s.type||f.dataPoint.y>=f.dataSeries.axisY.viewportMinimum&&f.dataPoint.y<=f.dataSeries.axisY.viewportMaximum)&&e.push(f);else e.push(f)}}if(0<e.length){if(this.highlightObjects(e),this.enabled)if(u="",u=this.getToolTipInnerHTML({entries:e}),null!==u){this.contentDiv.innerHTML=u;u=!1;"none"===this.container.style.display&&(u=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:n?"rgba(255,255,255,.9)":"rgb(255,255,255)";this.borderColor=this.contentDiv.style.borderRightColor="waterfall"===e[0].dataSeries.type?this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:e[0].dataPoint.color?e[0].dataPoint.color:0<e[0].dataPoint.y?e[0].dataSeries.risingColor:e[0].dataSeries.fallingColor:"error"===e[0].dataSeries.type?this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:e[0].dataSeries.color?e[0].dataSeries.color:e[0].dataSeries._colorSet[s.index%e[0].dataSeries._colorSet.length]:this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:e[0].dataPoint.color?e[0].dataPoint.color:e[0].dataSeries.color?e[0].dataSeries.color:e[0].dataSeries._colorSet[e[0].index%e[0].dataSeries._colorSet.length];this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px";this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px";this.container.style.borderRadius=this.contentDiv.style.borderRadius;this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px";this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000";this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;";this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal";this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:n?"italic":"normal"}catch(a){}"pie"===e[0].dataSeries.type||"doughnut"===e[0].dataSeries.type||"funnel"===e[0].dataSeries.type||"pyramid"===e[0].dataSeries.type||"bar"===e[0].dataSeries.type||"rangeBar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?i=i-10-this.container.clientWidth:(i=e[0].dataSeries.axisX.convertValueToPixel(e[0].dataPoint.x)-this.container.clientWidth<<0,i-=10);0>i&&(i+=this.container.clientWidth+20);i+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(i=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth));r=1!==e.length||this.shared||"line"!==e[0].dataSeries.type&&"stepLine"!==e[0].dataSeries.type&&"spline"!==e[0].dataSeries.type&&"area"!==e[0].dataSeries.type&&"stepArea"!==e[0].dataSeries.type&&"splineArea"!==e[0].dataSeries.type?"bar"===e[0].dataSeries.type||"rangeBar"===e[0].dataSeries.type||"stackedBar"===e[0].dataSeries.type||"stackedBar100"===e[0].dataSeries.type?e[0].dataSeries.axisX.convertValueToPixel(e[0].dataPoint.x):r:e[0].dataSeries.axisY.convertValueToPixel(e[0].dataPoint.y);r=-r+10;0<r+this.container.clientHeight+5&&(r-=r+this.container.clientHeight+5-0);this.fixMozTransitionDelay(i,r);!this.animationEnabled||u?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition);this.container.style.left=i+"px";this.container.style.bottom=r+"px"}else this.hide(!1)}else this.hide()}},w.prototype.highlightObjects=function(n){var i=this.chart.overlaidCanvasCtx,f,r,t;for(this.chart.resetOverlayedCanvas(),i.clearRect(0,0,this.chart.width,this.chart.height),i.save(),f=this.chart.plotArea,r=0,i.beginPath(),i.rect(f.x1,f.y1,f.x2-f.x1,f.y2-f.y1),i.clip(),f=0;f<n.length;f++)if(t=n[f],(t=this.chart._eventManager.objectMap[t.dataSeries.dataPointIds[t.index]])&&t.objectType&&"dataPoint"===t.objectType){var r=this.chart.data[t.dataSeriesIndex],u=r.dataPoints[t.dataPointIndex],e=t.dataPointIndex;!1===u.highlightEnabled||!0!==r.highlightEnabled&&!0!==u.highlightEnabled||("line"===r.type||"stepLine"===r.type||"spline"===r.type||"scatter"===r.type||"area"===r.type||"stepArea"===r.type||"splineArea"===r.type||"stackedArea"===r.type||"stackedArea100"===r.type||"rangeArea"===r.type||"rangeSplineArea"===r.type?(u=r.getMarkerProperties(e,t.x1,t.y1,this.chart.overlaidCanvasCtx),u.size=Math.max(1.5*u.size<<0,10),u.borderColor=u.borderColor||"#FFFFFF",u.borderThickness=u.borderThickness||Math.ceil(.1*u.size),l.drawMarkers([u]),"undefined"!=typeof t.y2&&(u=r.getMarkerProperties(e,t.x1,t.y2,this.chart.overlaidCanvasCtx),u.size=Math.max(1.5*u.size<<0,10),u.borderColor=u.borderColor||"#FFFFFF",u.borderThickness=u.borderThickness||Math.ceil(.1*u.size),l.drawMarkers([u]))):"bubble"===r.type?(u=r.getMarkerProperties(e,t.x1,t.y1,this.chart.overlaidCanvasCtx),u.size=t.size,u.color="white",u.borderColor="white",i.globalAlpha=.3,l.drawMarkers([u]),i.globalAlpha=1):"column"===r.type||"stackedColumn"===r.type||"stackedColumn100"===r.type||"bar"===r.type||"rangeBar"===r.type||"stackedBar"===r.type||"stackedBar100"===r.type||"rangeColumn"===r.type||"waterfall"===r.type?a(i,t.x1,t.y1,t.x2,t.y2,"white",0,null,!1,!1,!1,!1,.3):"pie"===r.type||"doughnut"===r.type?wt(i,t.center,t.radius,"white",r.type,t.startAngle,t.endAngle,.3,t.percentInnerRadius):"funnel"===r.type||"pyramid"===r.type?bt(i,t.funnelSection,.3,"white"):"candlestick"===r.type?(i.globalAlpha=1,i.strokeStyle=t.color,i.lineWidth=2*t.borderThickness,r=0==i.lineWidth%2?0:.5,i.beginPath(),i.moveTo(t.x3-r,Math.min(t.y2,t.y3)),i.lineTo(t.x3-r,Math.min(t.y1,t.y4)),i.stroke(),i.beginPath(),i.moveTo(t.x3-r,Math.max(t.y1,t.y4)),i.lineTo(t.x3-r,Math.max(t.y2,t.y3)),i.stroke(),a(i,t.x1,Math.min(t.y1,t.y4),t.x2,Math.max(t.y1,t.y4),"transparent",2*t.borderThickness,t.color,!1,!1,!1,!1),i.globalAlpha=1):"ohlc"===r.type?(i.globalAlpha=1,i.strokeStyle=t.color,i.lineWidth=2*t.borderThickness,r=0==i.lineWidth%2?0:.5,i.beginPath(),i.moveTo(t.x3-r,t.y2),i.lineTo(t.x3-r,t.y3),i.stroke(),i.beginPath(),i.moveTo(t.x3,t.y1),i.lineTo(t.x1,t.y1),i.stroke(),i.beginPath(),i.moveTo(t.x3,t.y4),i.lineTo(t.x2,t.y4),i.stroke(),i.globalAlpha=1):"boxAndWhisker"===r.type?(i.save(),i.globalAlpha=1,i.strokeStyle=t.stemColor,i.lineWidth=2*t.stemThickness,0<t.stemThickness&&(i.beginPath(),i.moveTo(t.x3,t.y2+t.borderThickness/2),i.lineTo(t.x3,t.y1+t.whiskerThickness/2),i.stroke(),i.beginPath(),i.moveTo(t.x3,t.y4-t.whiskerThickness/2),i.lineTo(t.x3,t.y3-t.borderThickness/2),i.stroke()),i.beginPath(),a(i,t.x1-t.borderThickness/2,Math.max(t.y2+t.borderThickness/2,t.y3+t.borderThickness/2),t.x2+t.borderThickness/2,Math.min(t.y2-t.borderThickness/2,t.y3-t.borderThickness/2),"transparent",t.borderThickness,t.color,!1,!1,!1,!1),i.globalAlpha=1,i.strokeStyle=t.whiskerColor,i.lineWidth=2*t.whiskerThickness,0<t.whiskerThickness&&(i.beginPath(),i.moveTo(Math.floor(t.x3-t.whiskerLength/2),t.y4),i.lineTo(Math.ceil(t.x3+t.whiskerLength/2),t.y4),i.stroke(),i.beginPath(),i.moveTo(Math.floor(t.x3-t.whiskerLength/2),t.y1),i.lineTo(Math.ceil(t.x3+t.whiskerLength/2),t.y1),i.stroke()),i.globalAlpha=1,i.strokeStyle=t.lineColor,i.lineWidth=2*t.lineThickness,0<t.lineThickness&&(i.beginPath(),i.moveTo(t.x1,t.y5),i.lineTo(t.x2,t.y5),i.stroke()),i.restore(),i.globalAlpha=1):"error"===r.type&&ti(i,t.x1,t.y1,t.x2,t.y2,"white",t.whiskerProperties,t.stemProperties,t.isXYSwapped,.3))}i.restore();i.globalAlpha=1;i.beginPath()},w.prototype.getToolTipInnerHTML=function(n){n=n.entries;for(var u=null,t=null,i=null,e=0,r="",h=!0,f=0;f<n.length;f++)if(n[f].dataSeries.toolTipContent||n[f].dataPoint.toolTipContent){h=!1;break}if(h&&(this.content&&"function"==typeof this.content||this.contentFormatter))n={chart:this.chart,toolTip:this.options,entries:n},u=this.contentFormatter?this.contentFormatter(n):this.content(n);else if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(var o=null,s="",f=0;f<n.length;f++)t=n[f].dataSeries,i=n[f].dataPoint,e=n[f].index,r="",0===f&&h&&!this.content&&(this.chart.axisX&&0<this.chart.axisX.length?s+="undefined"!=typeof this.chart.axisX[0].labels[i.x]?this.chart.axisX[0].labels[i.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(s+="undefined"!=typeof this.chart.axisX2[0].labels[i.x]?this.chart.axisX2[0].labels[i.x]:"{x}"),s+="<\/br>",s=this.chart.replaceKeywordsWithValue(s,i,t,e)),null===i.toolTipContent||"undefined"==typeof i.toolTipContent&&null===t.options.toolTipContent||("line"===t.type||"stepLine"===t.type||"spline"===t.type||"area"===t.type||"stepArea"===t.type||"splineArea"===t.type||"column"===t.type||"bar"===t.type||"scatter"===t.type||"stackedColumn"===t.type||"stackedColumn100"===t.type||"stackedBar"===t.type||"stackedBar100"===t.type||"stackedArea"===t.type||"stackedArea100"===t.type||"waterfall"===t.type?(this.chart.axisX&&1<this.chart.axisX.length&&(r+=o!=t.axisXIndex?t.axisX.title?t.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),r+=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:<\/span>&nbsp;&nbsp;{y}",o=t.axisXIndex):"bubble"===t.type?(this.chart.axisX&&1<this.chart.axisX.length&&(r+=o!=t.axisXIndex?t.axisX.title?t.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),r+=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:<\/span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}"):"rangeColumn"===t.type||"rangeBar"===t.type||"rangeArea"===t.type||"rangeSplineArea"===t.type||"error"===t.type?(this.chart.axisX&&1<this.chart.axisX.length&&(r+=o!=t.axisXIndex?t.axisX.title?t.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),r+=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:<\/span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}"):"candlestick"===t.type||"ohlc"===t.type?(this.chart.axisX&&1<this.chart.axisX.length&&(r+=o!=t.axisXIndex?t.axisX.title?t.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),r+=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:<\/span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"):"boxAndWhisker"===t.type&&(this.chart.axisX&&1<this.chart.axisX.length&&(r+=o!=t.axisXIndex?t.axisX.title?t.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),r+=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:<\/span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===u&&(u=""),!0===this.reversed?(u=this.chart.replaceKeywordsWithValue(r,i,t,e)+u,f<n.length-1&&(u="<\/br>"+u)):(u+=this.chart.replaceKeywordsWithValue(r,i,t,e),f<n.length-1&&(u+="<\/br>")));null!==u&&(u=s+u)}else{if(t=n[0].dataSeries,i=n[0].dataPoint,e=n[0].index,null===i.toolTipContent||"undefined"==typeof i.toolTipContent&&null===t.options.toolTipContent)return null;"line"===t.type||"stepLine"===t.type||"spline"===t.type||"area"===t.type||"stepArea"===t.type||"splineArea"===t.type||"column"===t.type||"bar"===t.type||"scatter"===t.type||"stackedColumn"===t.type||"stackedColumn100"===t.type||"stackedBar"===t.type||"stackedBar100"===t.type||"stackedArea"===t.type||"stackedArea100"===t.type||"waterfall"===t.type?r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+":<\/span>&nbsp;&nbsp;{y}":"bubble"===t.type?r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+":<\/span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"===t.type||"doughnut"===t.type||"funnel"===t.type||"pyramid"===t.type?r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.name?"{name}:<\/span>&nbsp;&nbsp;":i.label?"{label}:<\/span>&nbsp;&nbsp;":"<\/span>")+"{y}":"rangeColumn"===t.type||"rangeBar"===t.type||"rangeArea"===t.type||"rangeSplineArea"===t.type||"error"===t.type?r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+" :<\/span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":"candlestick"===t.type||"ohlc"===t.type?r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+"<\/span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":"boxAndWhisker"===t.type&&(r=i.toolTipContent?i.toolTipContent:t.toolTipContent?t.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+"<\/span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}");null===u&&(u="");u+=this.chart.replaceKeywordsWithValue(r,i,t,e)}return u},w.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var n=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=n;this.container.style.MsTransition=n;this.container.style.transition=n;this.container.style.MozTransition=this.mozContainerTransition}},w.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},w.prototype.hide=function(n){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,("undefined"==typeof n||n)&&this.chart.resetOverlayedCanvas())},w.prototype.show=function(n,t,i){this._updateToolTip(n,t,"undefined"==typeof i?!1:i)},w.prototype.fixMozTransitionDelay=function(n,t){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var i=parseFloat(this.container.style.left),i=isNaN(i)?0:i,r=parseFloat(this.container.style.bottom),r=isNaN(r)?0:r;this.mozContainerTransition=10<Math.sqrt(Math.pow(i-n,2)+Math.pow(r-t,2))?this.getContainerTransition(.1):this.getContainerTransition(0)}},w.prototype.getContainerTransition=function(n){return"left "+n+"s ease-out 0s, bottom "+n+"s ease-out 0s"},tt.prototype.reset=function(){this.lastObjectId=0;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.eventObjects=[];n&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},tt.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},tt.prototype.mouseEventHandler=function(n){if("mousemove"===n.type||"click"===n.type){var u=[],i=ui(n),t=null;if((t=this.chart.getObjectAtXY(i.x,i.y,!1))&&"undefined"!=typeof this.objectMap[t])if(t=this.objectMap[t],"dataPoint"===t.objectType){var r=this.chart.data[t.dataSeriesIndex],f=r.dataPoints[t.dataPointIndex],e=t.dataPointIndex;t.eventParameter={x:i.x,y:i.y,dataPoint:f,dataSeries:r.options,dataPointIndex:e,dataSeriesIndex:r.index,chart:this.chart};t.eventContext={context:f,userContext:f,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};u.push(t);t=this.objectMap[r.id];t.eventParameter={x:i.x,y:i.y,dataPoint:f,dataSeries:r.options,dataPointIndex:e,dataSeriesIndex:r.index,chart:this.chart};t.eventContext={context:r,userContext:r.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};u.push(this.objectMap[r.id])}else"legendItem"===t.objectType&&(r=this.chart.data[t.dataSeriesIndex],f=null!==t.dataPointIndex?r.dataPoints[t.dataPointIndex]:null,t.eventParameter={x:i.x,y:i.y,dataSeries:r.options,dataPoint:f,dataPointIndex:t.dataPointIndex,dataSeriesIndex:t.dataSeriesIndex,chart:this.chart},t.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},u.push(t));for(r=[],i=0;i<this.mouseoveredObjectMaps.length;i++){for(f=!0,t=0;t<u.length;t++)if(u[t].id===this.mouseoveredObjectMaps[i].id){f=!1;break}f?this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",n):r.push(this.mouseoveredObjectMaps[i])}for(this.mouseoveredObjectMaps=r,i=0;i<u.length;i++){for(r=!1,t=0;t<this.mouseoveredObjectMaps.length;t++)if(u[i].id===this.mouseoveredObjectMaps[t].id){r=!0;break}r||(this.fireEvent(u[i],"mouseover",n),this.mouseoveredObjectMaps.push(u[i]));"click"===n.type?this.fireEvent(u[i],"click",n):"mousemove"===n.type&&this.fireEvent(u[i],"mousemove",n)}}},tt.prototype.fireEvent=function(n,t,i){if(n&&t){var u=n.eventParameter,f=n.eventContext,r=n.eventContext.userContext;r&&f&&r[f[t]]&&r[f[t]].call(r,u);"mouseout"!==t?r.cursor&&r.cursor!==i.target.style.cursor&&(i.target.style.cursor=r.cursor):(i.target.style.cursor=this.chart._defaultCursor,delete n.eventParameter,delete n.eventContext);"click"===t&&"dataPoint"===n.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[n.dataSeriesIndex],u);"click"===t&&"dataPoint"===n.objectType&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[n.dataSeriesIndex],u)}},li.prototype.animate=function(n,t,i,r,u){var e=this;for(this.chart.isAnimating=!0,u=u||f.easing.linear,i&&this.animations.push({startTime:(new Date).getTime()+(n?n:0),duration:t,animationCallback:i,onComplete:r}),n=[];0<this.animations.length;)(t=this.animations.shift(),i=(new Date).getTime(),r=0,t.startTime<=i&&(r=u(Math.min(i-t.startTime,t.duration),0,1,t.duration),r=Math.min(r,1),isNaN(r)||!isFinite(r))&&(r=1),1>r&&n.push(t),t.animationCallback(r),1<=r&&t.onComplete)&&t.onComplete();this.animations=n;0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){e.animate.call(e)}):this.chart.isAnimating=!1},li.prototype.cancelAllAnimations=function(){this.animations=[];this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId);this.animationRequestId=null;this.chart.isAnimating=!1},f={yScaleAnimation:function(n,t){if(0!==n){var i=t.dest,r=t.source.canvas,u=t.animationBase;i.drawImage(r,0,0,r.width,r.height,0,u-u*n,i.canvas.width/p,n*i.canvas.height/p)}},xScaleAnimation:function(n,t){if(0!==n){var i=t.dest,r=t.source.canvas,u=t.animationBase;i.drawImage(r,0,0,r.width,r.height,u-u*n,0,n*i.canvas.width/p,i.canvas.height/p)}},xClipAnimation:function(n,t){if(0!==n){var r=t.dest,i=t.source.canvas;r.save();0<n&&r.drawImage(i,0,0,i.width*n,i.height,0,0,i.width*n/p,i.height/p);r.restore()}},fadeInAnimation:function(n,t){if(0!==n){var i=t.dest,r=t.source.canvas;i.save();i.globalAlpha=n;i.drawImage(r,0,0,r.width,r.height,0,0,i.canvas.width/p,i.canvas.height/p);i.restore()}},easing:{linear:function(n,t,i,r){return i*n/r+t},easeOutQuad:function(n,t,i,r){return-i*(n/=r)*(n-2)+t},easeOutQuart:function(n,t,i,r){return-i*((n=n/r-1)*n*n*n-1)+t},easeInQuad:function(n,t,i,r){return i*(n/=r)*n+t},easeInQuart:function(n,t,i,r){return i*(n/=r)*n*n*n+t}}},l={drawMarker:function(n,t,i,r,f,e,o,s){if(i){var h=1;i.fillStyle=e?e:"#000000";i.strokeStyle=o?o:"#000000";i.lineWidth=s?s:0;i.setLineDash&&i.setLineDash(u("solid",s));"circle"===r?(i.moveTo(n,t),i.beginPath(),i.arc(n,t,f/2,0,2*Math.PI,!1),e&&i.fill(),s&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"square"===r?(i.beginPath(),i.rect(n-f/2,t-f/2,f,f),e&&i.fill(),s&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"triangle"===r?(i.beginPath(),i.moveTo(n-f/2,t+f/2),i.lineTo(n+f/2,t+f/2),i.lineTo(n,t-f/2),i.closePath(),e&&i.fill(),s&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h)),i.beginPath()):"cross"===r&&(i.strokeStyle=e,i.lineWidth=f/4,i.beginPath(),i.moveTo(n-f/2,t-f/2),i.lineTo(n+f/2,t+f/2),i.stroke(),i.moveTo(n+f/2,t-f/2),i.lineTo(n-f/2,t+f/2),i.stroke())}},drawMarkers:function(n){for(var t,i=0;i<n.length;i++)t=n[i],l.drawMarker(t.x,t.y,t.ctx,t.type,t.size,t.color,t.borderColor,t.borderThickness)}},i}();bt.Chart.version="v2.3.2 GA"})();document.createElement("canvas").getContext||function(){function ct(){return this.context_||(this.context_=new w(this))}function lt(n,t){var i=g.call(arguments,2);return function(){return n.apply(t,i.concat(g.call(arguments)))}}function rt(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function ut(n){n.namespaces.g_vml_||n.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");n.namespaces.g_o_||n.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");n.styleSheets.ex_canvas_||(n=n.createStyleSheet(),n.owningElement.id="ex_canvas_",n.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function at(n){var t=n.srcElement;switch(n.propertyName){case"width":t.getContext().clearRect();t.style.width=t.attributes.width.nodeValue+"px";t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect();t.style.height=t.attributes.height.nodeValue+"px";t.firstChild.style.height=t.clientHeight+"px"}}function vt(n){n=n.srcElement;n.firstChild&&(n.firstChild.style.width=n.clientWidth+"px",n.firstChild.style.height=n.clientHeight+"px")}function a(){return[[1,0,0],[0,1,0],[0,0,1]]}function o(n,t){for(var r,e,u,f=a(),i=0;3>i;i++)for(r=0;3>r;r++){for(e=0,u=0;3>u;u++)e+=n[i][u]*t[u][r];f[i][r]=e}return f}function ft(n,t){t.fillStyle=n.fillStyle;t.lineCap=n.lineCap;t.lineJoin=n.lineJoin;t.lineWidth=n.lineWidth;t.miterLimit=n.miterLimit;t.shadowBlur=n.shadowBlur;t.shadowColor=n.shadowColor;t.shadowOffsetX=n.shadowOffsetX;t.shadowOffsetY=n.shadowOffsetY;t.strokeStyle=n.strokeStyle;t.globalAlpha=n.globalAlpha;t.font=n.font;t.textAlign=n.textAlign;t.textBaseline=n.textBaseline;t.arcScaleX_=n.arcScaleX_;t.arcScaleY_=n.arcScaleY_;t.lineScale_=n.lineScale_}function et(n){var t=n.indexOf("(",3),i=n.indexOf(")",t+1),t=n.substring(t+1,i).split(",");return(4!=t.length||"a"!=n.charAt(3))&&(t[3]=1),t}function v(n,t,i){return Math.min(i,Math.max(t,n))}function y(n,t,i){return 0>i&&i++,1<i&&i--,1>6*i?n+6*(t-n)*i:1>2*i?t:2>3*i?n+6*(t-n)*(2/3-i):n}function p(n){var i,r,u,t,f,o;if(n in tt)return tt[n];if(r=1,n=String(n),"#"==n.charAt(0))i=n;else if(/^rgb/.test(n)){for(r=et(n),i="#",t=0;3>t;t++)u=-1!=r[t].indexOf("%")?Math.floor(255*(parseFloat(r[t])/100)):+r[t],i+=e[v(u,0,255)];r=+r[3]}else/^hsl/.test(n)?(t=r=et(n),i=parseFloat(t[0])/360%360,0>i&&i++,u=v(parseFloat(t[1])/100,0,1),t=v(parseFloat(t[2])/100,0,1),0==u?u=t=i=t:(f=.5>t?t*(1+u):t+u-t*u,o=2*t-f,u=y(o,f,i+1/3),t=y(o,f,i),i=y(o,f,i-1/3)),i="#"+e[Math.floor(255*u)]+e[Math.floor(255*t)]+e[Math.floor(255*i)],r=r[3]):i=wt[n]||n;return tt[n]={color:i,alpha:r}}function w(n){this.m_=a();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=1*i;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=n;var t="width:"+n.clientWidth+"px;height:"+n.clientHeight+"px;overflow:hidden;position:absolute",r=n.ownerDocument.createElement("div");r.style.cssText=t;n.appendChild(r);t=r.cloneNode(!1);t.style.backgroundColor="red";t.style.filter="alpha(opacity=0)";n.appendChild(t);this.element_=r;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function ot(n,t,i,r){n.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:i.x,cp2y:i.y,x:r.x,y:r.y});n.currentX_=r.x;n.currentY_=r.y}function st(n,t){var i=p(n.strokeStyle),u=i.color,i=i.alpha*n.globalAlpha,r=n.lineScale_*n.lineWidth;1>r&&(i*=r);t.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',n.lineJoin,'"',' miterlimit="',n.miterLimit,'"',' endcap="',bt[n.lineCap]||"square",'"',' weight="',r,'px"',' color="',u,'" />')}function ht(n,t,f,e){var o=n.fillStyle,s=n.arcScaleX_,c=n.arcScaleY_,v=e.x-f.x,a=e.y-f.y,k,g;if(o instanceof h){var l=0,nt=e=0,d=0,w=1;if("gradient"==o.type_){l=o.x1_/s;f=o.y1_/c;var y=r(n,o.x0_/s,o.y0_/c),l=r(n,l,f),l=180*Math.atan2(l.x-y.x,l.y-y.y)/Math.PI;0>l&&(l+=360);1e-6>l&&(l=0)}else y=r(n,o.x0_,o.y0_),e=(y.x-f.x)/v,nt=(y.y-f.y)/a,v/=s*i,a/=c*i,w=u.max(v,a),d=2*o.r0_/w,w=2*o.r1_/w-d;for(s=o.colors_,s.sort(function(n,t){return n.offset-t.offset}),c=s.length,y=s[0].color,f=s[c-1].color,v=s[0].alpha*n.globalAlpha,n=s[c-1].alpha*n.globalAlpha,a=[],k=0;k<c;k++)g=s[k],a.push(g.offset*w+d+" "+g.color);t.push('<g_vml_:fill type="',o.type_,'"',' method="none" focus="100%"',' color="',y,'"',' color2="',f,'"',' colors="',a.join(","),'"',' opacity="',n,'"',' g_o_:opacity2="',v,'"',' angle="',l,'"',' focusposition="',e,",",nt,'" />')}else o instanceof b?v&&a&&t.push("<g_vml_:fill",' position="',-f.x/v*s*s,",",-f.y/a*c*c,'"',' type="tile"',' src="',o.src_,'" />'):(o=p(n.fillStyle),t.push('<g_vml_:fill color="',o.color,'" opacity="',o.alpha*n.globalAlpha,'" />'))}function r(n,t,r){return n=n.m_,{x:i*(t*n[0][0]+r*n[1][0]+n[2][0])-f,y:i*(t*n[0][1]+r*n[1][1]+n[2][1])-f}}function s(n,t,i){isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])&&(n.m_=t,i&&(n.lineScale_=pt(yt(t[0][0]*t[1][1]-t[0][1]*t[1][0]))))}function h(n){this.type_=n;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}function b(n,t){if(!n||1!=n.nodeType||"IMG"!=n.tagName)throw new c("TYPE_MISMATCH_ERR");if("complete"!=n.readyState)throw new c("INVALID_STATE_ERR");switch(t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:throw new c("SYNTAX_ERR");}this.src_=n.src;this.width_=n.width;this.height_=n.height}function c(n){this.code=this[n];this.message=n+": DOM Exception "+this.code}var u=Math,t=u.round,k=u.sin,d=u.cos,yt=u.abs,pt=u.sqrt,i=10,f=i/2,g,nt,e,n,l;for(navigator.userAgent.match(/MSIE ([\d.]+)?/),g=Array.prototype.slice,ut(document),nt={init:function(n){n=n||document;n.createElement("canvas");n.attachEvent("onreadystatechange",lt(this.init_,this,n))},init_:function(n){n=n.getElementsByTagName("canvas");for(var t=0;t<n.length;t++)this.initElement(n[t])},initElement:function(n){if(!n.getContext){n.getContext=ct;ut(n.ownerDocument);n.innerHTML="";n.attachEvent("onpropertychange",at);n.attachEvent("onresize",vt);var t=n.attributes;t.width&&t.width.specified?n.style.width=t.width.nodeValue+"px":n.width=n.clientWidth;t.height&&t.height.specified?n.style.height=t.height.nodeValue+"px":n.height=n.clientHeight}return n}},nt.init(),e=[],n=0;16>n;n++)for(l=0;16>l;l++)e[16*n+l]=n.toString(16)+l.toString(16);var wt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},tt={},it={},bt={butt:"flat",round:"round"},n=w.prototype;n.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null);this.element_.innerHTML=""};n.beginPath=function(){this.currentPath_=[]};n.moveTo=function(n,t){var i=r(this,n,t);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y});this.currentX_=i.x;this.currentY_=i.y};n.lineTo=function(n,t){var i=r(this,n,t);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y});this.currentX_=i.x;this.currentY_=i.y};n.bezierCurveTo=function(n,t,i,u,f,e){f=r(this,f,e);n=r(this,n,t);i=r(this,i,u);ot(this,n,i,f)};n.quadraticCurveTo=function(n,t,i,u){n=r(this,n,t);i=r(this,i,u);u={x:this.currentX_+2/3*(n.x-this.currentX_),y:this.currentY_+2/3*(n.y-this.currentY_)};ot(this,u,{x:u.x+(i.x-this.currentX_)/3,y:u.y+(i.y-this.currentY_)/3},i)};n.arc=function(n,t,u,e,o,s){u*=i;var c=s?"at":"wa",h=n+d(e)*u-f,l=t+k(e)*u-f;e=n+d(o)*u-f;o=t+k(o)*u-f;h!=e||s||(h+=.125);n=r(this,n,t);h=r(this,h,l);e=r(this,e,o);this.currentPath_.push({type:c,x:n.x,y:n.y,radius:u,xStart:h.x,yStart:h.y,xEnd:e.x,yEnd:e.y})};n.rect=function(n,t,i,r){this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath()};n.strokeRect=function(n,t,i,r){var u=this.currentPath_;this.beginPath();this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath();this.stroke();this.currentPath_=u};n.fillRect=function(n,t,i,r){var u=this.currentPath_;this.beginPath();this.moveTo(n,t);this.lineTo(n+i,t);this.lineTo(n+i,t+r);this.lineTo(n,t+r);this.closePath();this.fill();this.currentPath_=u};n.createLinearGradient=function(n,t,i,r){var u=new h("gradient");return u.x0_=n,u.y0_=t,u.x1_=i,u.y1_=r,u};n.createRadialGradient=function(n,t,i,r,u,f){var e=new h("gradientradial");return e.x0_=n,e.y0_=t,e.r0_=i,e.x1_=r,e.y1_=u,e.r1_=f,e};n.drawImage=function(n){var e,h,o,s,v,y,p,w,c,l,f,a,b,k,d;if(o=n.runtimeStyle.width,s=n.runtimeStyle.height,n.runtimeStyle.width="auto",n.runtimeStyle.height="auto",c=n.width,l=n.height,n.runtimeStyle.width=o,n.runtimeStyle.height=s,3==arguments.length)e=arguments[1],h=arguments[2],v=y=0,p=o=c,w=s=l;else if(5==arguments.length)e=arguments[1],h=arguments[2],o=arguments[3],s=arguments[4],v=y=0,p=c,w=l;else if(9==arguments.length)v=arguments[1],y=arguments[2],p=arguments[3],w=arguments[4],e=arguments[5],h=arguments[6],o=arguments[7],s=arguments[8];else throw Error("Invalid number of arguments");f=r(this,e,h);a=[];a.push(" <g_vml_:group",' coordsize="',10*i,",",10*i,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]?(b=[],b.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",t(f.x/i),",","Dy=",t(f.y/i),""),k=r(this,e+o,h),d=r(this,e,h+s),e=r(this,e+o,h+s),f.x=u.max(f.x,k.x,d.x,e.x),f.y=u.max(f.y,k.y,d.y,e.y),a.push("padding:0 ",t(f.x/i),"px ",t(f.y/i),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",b.join(""),", sizingmethod='clip');")):a.push("top:",t(f.y/i),"px;left:",t(f.x/i),"px;");a.push(' ">','<g_vml_:image src="',n.src,'"',' style="width:',i*o,"px;"," height:",i*s,'px"',' cropleft="',v/c,'"',' croptop="',y/l,'"',' cropright="',(c-v-p)/c,'"',' cropbottom="',(l-y-w)/l,'"'," />","<\/g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",a.join(""))};n.stroke=function(n){var u=[],r;u.push("<g_vml_:shape",' filled="',!!n,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*i,",",10*i,'"',' stroked="',!n,'"',' path="');for(var f={x:null,y:null},e={x:null,y:null},o=0;o<this.currentPath_.length;o++){r=this.currentPath_[o];switch(r.type){case"moveTo":u.push(" m ",t(r.x),",",t(r.y));break;case"lineTo":u.push(" l ",t(r.x),",",t(r.y));break;case"close":u.push(" x ");r=null;break;case"bezierCurveTo":u.push(" c ",t(r.cp1x),",",t(r.cp1y),",",t(r.cp2x),",",t(r.cp2y),",",t(r.x),",",t(r.y));break;case"at":case"wa":u.push(" ",r.type," ",t(r.x-this.arcScaleX_*r.radius),",",t(r.y-this.arcScaleY_*r.radius)," ",t(r.x+this.arcScaleX_*r.radius),",",t(r.y+this.arcScaleY_*r.radius)," ",t(r.xStart),",",t(r.yStart)," ",t(r.xEnd),",",t(r.yEnd))}r&&((null==f.x||r.x<f.x)&&(f.x=r.x),(null==e.x||r.x>e.x)&&(e.x=r.x),(null==f.y||r.y<f.y)&&(f.y=r.y),(null==e.y||r.y>e.y)&&(e.y=r.y))}u.push(' ">');n?ht(this,u,f,e):st(this,u);u.push("<\/g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",u.join(""))};n.fill=function(){this.stroke(!0)};n.closePath=function(){this.currentPath_.push({type:"close"})};n.save=function(){var n={};ft(this,n);this.aStack_.push(n);this.mStack_.push(this.m_);this.m_=o(a(),this.m_)};n.restore=function(){this.aStack_.length&&(ft(this.aStack_.pop(),this),this.m_=this.mStack_.pop())};n.translate=function(n,t){s(this,o([[1,0,0],[0,1,0],[n,t,1]],this.m_),!1)};n.rotate=function(n){var t=d(n);n=k(n);s(this,o([[t,n,0],[-n,t,0],[0,0,1]],this.m_),!1)};n.scale=function(n,t){this.arcScaleX_*=n;this.arcScaleY_*=t;s(this,o([[n,0,0],[0,t,0],[0,0,1]],this.m_),!0)};n.transform=function(n,t,i,r,u,f){s(this,o([[n,t,0],[i,r,0],[u,f,1]],this.m_),!0)};n.setTransform=function(n,t,i,r,u,f){s(this,[[n,t,0],[i,r,0],[u,f,1]],!0)};n.drawText_=function(n,u,f,e,o){var v=this.m_,s,c,l;e=0;var y=1e3,p=0,a=[],h;if(h=this.font,it[h])h=it[h];else{s=document.createElement("div").style;try{s.font=h}catch(w){}h=it[h]={style:s.fontStyle||"normal",variant:s.fontVariant||"normal",weight:s.fontWeight||"normal",size:s.fontSize||10,family:s.fontFamily||"sans-serif"}}s=h;c=this.element_;h={};for(l in s)h[l]=s[l];l=parseFloat(c.currentStyle.fontSize);c=parseFloat(s.size);h.size="number"==typeof s.size?s.size:-1!=s.size.indexOf("px")?c:-1!=s.size.indexOf("em")?l*c:-1!=s.size.indexOf("%")?l/100*c:-1!=s.size.indexOf("pt")?c/.75:l;h.size*=.981;l=h.style+" "+h.variant+" "+h.weight+" "+h.size+"px "+h.family;c=this.element_.currentStyle;s=this.textAlign.toLowerCase();switch(s){case"left":case"center":case"right":break;case"end":s="ltr"==c.direction?"right":"left";break;case"start":s="rtl"==c.direction?"right":"left";break;default:s="left"}switch(this.textBaseline){case"hanging":case"top":p=h.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":p=-h.size/2.25}switch(s){case"right":e=1e3;y=.05;break;case"center":e=y=500}u=r(this,u+0,f+p);a.push('<g_vml_:line from="',-e,' 0" to="',y,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!o,'" stroked="',!!o,'" style="position:absolute;width:1px;height:1px;">');o?st(this,a):ht(this,a,{x:-e,y:0},{x:y,y:h.size});o=v[0][0].toFixed(3)+","+v[1][0].toFixed(3)+","+v[0][1].toFixed(3)+","+v[1][1].toFixed(3)+",0,0";u=t(u.x/i)+","+t(u.y/i);a.push('<g_vml_:skew on="t" matrix="',o,'" ',' offset="',u,'" origin="',e,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',rt(n),'" style="v-text-align:',s,";font:",rt(l),'" /><\/g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",a.join(""))};n.fillText=function(n,t,i,r){this.drawText_(n,t,i,r,!1)};n.strokeText=function(n,t,i,r){this.drawText_(n,t,i,r,!0)};n.measureText=function(n){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"><\/span>'),this.textMeasureEl_=this.element_.lastChild);var t=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(t.createTextNode(n)),{width:this.textMeasureEl_.offsetWidth}};n.clip=function(){};n.arcTo=function(){};n.createPattern=function(n,t){return new b(n,t)};h.prototype.addColorStop=function(n,t){t=p(t);this.colors_.push({offset:n,color:t.color,alpha:t.alpha})};n=c.prototype=Error();n.INDEX_SIZE_ERR=1;n.DOMSTRING_SIZE_ERR=2;n.HIERARCHY_REQUEST_ERR=3;n.WRONG_DOCUMENT_ERR=4;n.INVALID_CHARACTER_ERR=5;n.NO_DATA_ALLOWED_ERR=6;n.NO_MODIFICATION_ALLOWED_ERR=7;n.NOT_FOUND_ERR=8;n.NOT_SUPPORTED_ERR=9;n.INUSE_ATTRIBUTE_ERR=10;n.INVALID_STATE_ERR=11;n.SYNTAX_ERR=12;n.INVALID_MODIFICATION_ERR=13;n.NAMESPACE_ERR=14;n.INVALID_ACCESS_ERR=15;n.VALIDATION_ERR=16;n.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=nt;CanvasRenderingContext2D=w;CanvasGradient=h;CanvasPattern=b;DOMException=c}();